(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{280:function(e,t){},335:function(e,t,n){},528:function(e,t){},603:function(e,t){},604:function(e,t){},607:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n(0),i=n(49),o=n.n(i),c=n(16),s=n(87),l=n(59),d=n(24),u=(n(334),n(321)),b=(n(335),"/login"),f="/perfil-usuario",j="/dashboard/resumen-general",h="/sistemas/configuracion-empleados/areas",p="/sistemas/configuracion-empleados/cargos",O="/sistemas/configuracion-empleados/tipo-empleados",g="/sistemas/configuracion-empleados/vistas",x="/sistemas/configuracion-empleados/zonas",m="/rrhh/lista-personal",v="/rrhh/lista-contratas",_="/i+m/lista-rutas/asignar-rutas",w="/i+m/lista-rutas/asistencias",y="/i+m/administrar-ordenes/averias-hfc",S="/i+m/administrar-ordenes/altas-hfc",C="/i+m/administrar-ordenes/basicas",A="/i+m/administrar-ordenes/speedy",I="/i+m/asistencias",k="/i+m/gestionar-ordenes/lista-ordenes",T="/i+m/gestionar-ordenes/liquidar-ordenes";function E(){return Object(r.jsx)("div",{children:Object(r.jsx)("a",{href:b,children:"login"})})}var R=n(3),D=n.n(R),N=n(8),M=n(84),L=n.n(M),z=n(609),q=n(610),F=n(616),P=n(188),B=n(56),Y=n(631),G=n(632),H=n(214),U=n.n(H),V=n(27),K={urlApi:"http://23.96.3.164/api",public:"http://23.96.3.164/",socket:"http://localhost/",TOKEN_STORAGE_KEY:"atenea.authToken",logoPath:"/icon.png",logoFull:"/iconL.png",version:"0.0.31",formatosAdmitidos:["application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"]},Z=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=V.a.loading("Iniciando sesi\xf3n...",{hideAfter:0,position:"top-right",role:"success"}),r=U.a.create({baseURL:K.urlApi}),e.next=4,r(Object(c.a)({},t)).then((function(e){var t=e.data;if(n.hide(),t&&t.data)return V.a.success(t.message,{position:"top-right"}),{data:t.data,errors:!1};throw V.a.error("No se puede obtener la data",{position:"top-right"}),Error("No se puede obtener la data")})).catch((function(e){if(n.hide(),e.response){console.log(e.response);var t=e.response.data,r=void 0!==t[Object.keys(t)[0]]?t[Object.keys(t)[0]]:"Error en la solicitud.";return V.a.warn(r,{position:"top-right"}),{data:!1,errors:t}}throw e.request?(console.log(e.request),V.a.warn("Se realiz\xf3 la solicitud, pero no se recibi\xf3 respuesta.",{position:"top-right"}),e):(V.a.error("Algo sucedi\xf3 al configurar la solicitud que provoc\xf3 un error.",{position:"top-right"}),e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J=function(){var e=Object(N.a)(D.a.mark((function e(t,n){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n&&(r=V.a.loading("Cargando...",{hideAfter:0,position:"top-right",role:"success"})),a=U.a.create({baseURL:K.urlApi,headers:{Authorization:"Bearer "+L.a.get(K.TOKEN_STORAGE_KEY)}}),e.next=4,a(Object(c.a)({},t)).then((function(e){var t=e.data;return n&&(r.hide(),V.a[t.status?t.status:"error"](t.message,{position:"top-right"})),t})).catch((function(e){if(n&&r.hide(),e.response){var t=e.response.data;return"401"===String(e.response.status)?(V.a.error("Token Invalido, cerrando sesi\xf3n.",{position:"top-right"}),L.a.remove(K.TOKEN_STORAGE_KEY),document.location.href="/login"):V.a.warn("undefined"!==t.message?t.message:"Error en la solicitud.",{position:"top-right"}),{data:null,errors:t}}throw e.request?(console.log(e.request),V.a.warn("Se realiz\xf3 la solicitud, pero no se recibi\xf3 respuesta.",{position:"top-right"}),e):(V.a.error("Algo sucedi\xf3 al configurar la solicitud que provoc\xf3 un error.",{position:"top-right"}),e)}));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),W=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Z({url:"private/auth/login",method:"POST",data:t}));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"private/auth/session",method:"GET"},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q=function(){var e=Object(N.a)(D.a.mark((function e(){var t,n=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=!(n.length>0&&void 0!==n[0])||n[0],e.abrupt("return",J({url:"private/auth/logout",method:"GET"},t));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),$=n(162),ee=n(163),te=n(281),ne=function(){function e(t){Object($.a)(this,e),this.decodedToken={nombre:null,id:null,cargo:null,imagen:null,gestor:null,exp:0};try{t&&(this.decodedToken=Object(te.a)(t))}catch(n){console.log("Error"),console.log(n)}}return Object(ee.a)(e,[{key:"isValid",get:function(){return!this.isExpired}},{key:"expiresAt",get:function(){return new Date(1e3*this.decodedToken.exp)}},{key:"isExpired",get:function(){return new Date>this.expiresAt}},{key:"authorizationString",get:function(){return"Bearer ".concat(this.token)}}]),e}();function re(){var e=Object(l.f)();function t(){return(t=Object(N.a)(D.a.mark((function t(n){return D.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,W(n).then((function(t){t.data&&!t.errors&&(L.a.set(K.TOKEN_STORAGE_KEY,t.data),e.push(j))})).catch((function(e){console.log("error"),console.log(e)}));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}return Object(a.useEffect)((function(){new ne(L.a.get(K.TOKEN_STORAGE_KEY)).isValid&&e.push(j)}),[e]),Object(r.jsx)("div",{children:Object(r.jsx)(z.a,{type:"flex",justify:"space-around",align:"middle",style:{backgroundColor:"rgb(242, 242, 247)",height:"100vh"},children:Object(r.jsx)(q.a,{xs:20,sm:12,md:8,lg:6,xl:5,children:Object(r.jsx)("div",{className:"contenedor-padre",children:Object(r.jsxs)(F.a,{name:"normal_login",className:"login-form",initialValues:{remember:!0},onFinish:function(e){return t.apply(this,arguments)},children:[Object(r.jsx)("div",{className:"logoForm"}),Object(r.jsx)(F.a.Item,{name:"username",hasFeedback:!0,rules:[{required:!0,message:"\xa1Se necesita una correo!"},{type:"email",message:"\xa1Ingresa un email v\xe1lido!"}],children:Object(r.jsx)(P.a,{autoComplete:"current-email",type:"email",prefix:Object(r.jsx)(Y.a,{className:"site-form-item-icon"}),placeholder:"Correo"})}),Object(r.jsx)(F.a.Item,{name:"password",hasFeedback:!0,rules:[{required:!0,message:"\xa1Se necesita una contrase\xf1a v\xe1lida!"},{min:6,message:"\xa1La contrase\xf1a debe tener mas de 6 car\xe1cteres!"}],children:Object(r.jsx)(P.a.Password,{autoComplete:"current-password",prefix:Object(r.jsx)(G.a,{className:"site-form-item-icon"}),type:"password",placeholder:"Contrase\xf1a"})}),Object(r.jsx)(F.a.Item,{children:Object(r.jsx)(B.a,{type:"primary",htmlType:"submit",className:"login-form-button",children:"Acceder"})})]})})})})})}var ae=n(5),ie=Object(a.createContext)(),oe="GET_VIEWS",ce=function(e,t){var n=t.payload;switch(t.type){case oe:return Object(c.a)(Object(c.a)({},e),{},{views:n&&n.length>0?n.map((function(e){return e.ruta})):[]});default:return e}},se=function(e){var t=Object(a.useReducer)(ce,{views:[]}),n=Object(ae.a)(t,2),i=n[0],o=n[1],c=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{o({type:oe,payload:t})}catch(n){}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsx)(ie.Provider,{value:{views:i.views,getViews:c},children:e.children})},le=n(4),de=n.n(le),ue=n(179),be=n(611),fe=n(633),je=n(634),he=n(635),pe=n(636),Oe=n(637),ge=n(638),xe=n(639),me=n(62),ve=me.a.SubMenu,_e=me.a.Item,we=me.a.Divider,ye=me.a.ItemGroup,Se=function(){return String(window.location.pathname).substring(1)},Ce=[{titulo:"Panel de Control",rutas:[j],children:[{grupo:!0,key:"sub100",icon:fe.a,titulo:"Dashboard",rutas:[j],children:[{ruta:j,icon:fe.a,titulo:"Resumen General"}]}]},{titulo:"Configuracion del Sistema",rutas:[h,p,O,g,x],children:[{grupo:!0,key:h,icon:je.a,titulo:"Configuracion Empleados",rutas:[h,p,O,g,x],children:[{ruta:h,icon:je.a,titulo:"Areas"},{ruta:p,icon:je.a,titulo:"Cargos"},{ruta:O,icon:je.a,titulo:"Tipo Empleados"},{ruta:g,icon:je.a,titulo:"Vistas"},{ruta:x,icon:je.a,titulo:"Zonas"}]}]},{titulo:"Rescursos Humanos",rutas:[m,v],children:[{grupo:!1,ruta:m,icon:he.a,titulo:"Lista de Personal"},{grupo:!1,ruta:v,icon:pe.a,titulo:"Lista de Contratas"}]},{titulo:"Instalaciones y Mantenimiento",rutas:[_,w,I,y,S,C,A,k,T],children:[{grupo:!0,key:"listaRutas",icon:Oe.a,titulo:"Lista Rutas",rutas:[_,w],children:[{ruta:_,icon:Oe.a,titulo:"Asignar Rutas"},{ruta:w,icon:Oe.a,titulo:"Asistencias"}]},{grupo:!1,ruta:I,icon:Oe.a,titulo:"Asistencia"},{grupo:!0,key:"Administrar ordenes",icon:ge.a,titulo:"Administrar ordenes",rutas:[y,S,C,A],children:[{ruta:y,icon:ge.a,titulo:"Averias Hfc"},{ruta:S,icon:ge.a,titulo:"Altas Hfc"},{ruta:C,icon:ge.a,titulo:"Basicas"},{ruta:A,icon:ge.a,titulo:"Speedy"}]},{grupo:!0,key:"sub97",icon:xe.a,titulo:"Gestionar ordenes",rutas:[k,T],children:[{ruta:k,icon:xe.a,titulo:"Lista de Ordenes"},{ruta:T,icon:xe.a,titulo:"Liquidar Orden"}]}]}];var Ae=function(){var e=Object(a.useContext)(ie).views;return e?Object(r.jsx)(me.a,{theme:"light",mode:"inline",defaultSelectedKeys:Se(),children:Ce.map((function(t,n){return t.rutas&&t.rutas.some((function(t){return e.includes(t)}))?Object(r.jsxs)(ye,{title:t.titulo,children:[Object(r.jsx)(we,{}),t.children.map((function(t){return!t.grupo&&e.includes(t.ruta)?Object(r.jsx)(_e,{children:Object(r.jsxs)(s.b,{to:t.ruta,children:[Object(r.jsx)(t.icon,{}),Object(r.jsx)("span",{children:t.titulo})]})},String(t.ruta).substring(1)):t.grupo&&t.rutas&&t.rutas.some((function(t){return e.includes(t)}))?Object(r.jsx)(ve,{title:Object(r.jsxs)("span",{children:[Object(r.jsx)(t.icon,{}),Object(r.jsx)("span",{children:t.titulo})]}),children:t.children.map((function(t){return e.includes(t.ruta)?Object(r.jsx)(_e,{children:Object(r.jsxs)(s.b,{to:t.ruta,children:[Object(r.jsx)(t.icon,{}),Object(r.jsx)("span",{children:t.titulo})]})},String(t.ruta).substring(1)):null}))},t.key):null}))]},n):null}))}):Object(r.jsx)(me.a,{theme:"light",mode:"inline",defaultSelectedKeys:Se(),children:Object(r.jsxs)(ye,{title:"Panel de Control",children:[Object(r.jsx)(we,{}),Object(r.jsx)(_e,{children:Object(r.jsxs)(s.b,{to:j,children:[Object(r.jsx)(fe.a,{}),Object(r.jsx)("span",{children:"Dashboard"})]})},"dashboard")]})})},Ie=be.a.Sider,ke=function(e){var t=e.collapsed;return Object(r.jsxs)(Ie,{width:256,theme:"light",breakpoint:"lg",trigger:null,collapsible:!0,collapsed:t,className:"sider",children:[Object(r.jsx)("div",{className:"brand",children:t?Object(r.jsx)("div",{className:"logo",children:Object(r.jsx)("img",{alt:"logo",src:K.logoPath})}):Object(r.jsx)("div",{className:"full-logo",children:Object(r.jsx)("img",{alt:"full-logo",src:K.logoFull})})}),Object(r.jsx)("div",{className:"menu-container",children:Object(r.jsx)(Ae,{})})]})},Te=n(644),Ee=n(645),Re=n(287),De=n(629),Ne=n(625),Me=n(640),Le=n(641),ze=[{title:"Hola",icon:"success"},{title:"Hola",icon:"error"},{title:"Hola",icon:"warning"}],qe=function(){var e=Object(a.useState)(!1),t=Object(ae.a)(e,2),n=t[0],i=t[1];return Object(r.jsx)(Re.a,{trigger:"click",placement:"bottomRight",overlayClassName:"notification-popover",visible:n,onVisibleChange:function(e){return i(e)},content:Object(r.jsxs)("div",{className:"caja-notificaciones",style:{minWidth:"20rem"},children:[Object(r.jsx)(De.b,{itemLayout:"horizontal",dataSource:ze,locale:{emptyText:Object(r.jsx)("span",{children:"You have viewed all notifications."})},renderItem:function(e){return Object(r.jsxs)(De.b.Item,{className:"item-notificaciones",children:[Object(r.jsx)(De.b.Item.Meta,{className:"datos-notificaciones",title:Object(r.jsx)("span",{lines:1,children:"Orden Actualizada"}),description:"hola k tal como te va"}),Object(r.jsx)(Me.a,{className:"flecha-notificaciones"})]})}}),ze.length?Object(r.jsx)("div",{className:"clear-button",children:Object(r.jsx)("span",{children:"Limpiar Notificaciones"})}):null]}),children:Object(r.jsx)(Ne.a,{count:0,dot:!0,offset:[-10,10],className:"icon-button",children:Object(r.jsx)(Le.a,{className:"icon-font"})})})},Fe=n(323),Pe=n(619),Be=n(642),Ye=n(643);function Ge(){var e=Object(a.useState)(null),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(l.f)();Object(a.useEffect)((function(){var e=new ne(L.a.get(K.TOKEN_STORAGE_KEY));e&&i(e.decodedToken)}),[]);var c=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q().then(function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:"error"!==t.status&&(L.a.remove(K.TOKEN_STORAGE_KEY),o.push("/login"));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){console.log(e),console.log("Error cerrando sesi\xf3n.")}));case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsx)(me.a,{mode:"horizontal",children:Object(r.jsxs)(me.a.SubMenu,{title:Object(r.jsxs)(a.Fragment,{children:[Object(r.jsx)("span",{style:{color:"#999",marginRight:4},children:Object(r.jsx)("span",{children:"Hola,"})}),Object(r.jsx)("span",{children:n&&n.nombre}),Object(r.jsx)(Fe.a,{style:{marginLeft:8},src:n&&n.imagen})]}),children:[Object(r.jsx)(me.a.Item,{children:Object(r.jsx)(Pe.a.Text,{type:"sucess",children:Object(r.jsxs)(s.b,{to:f,children:[Object(r.jsx)(Be.a,{}),"Configuraciones"]})})},"Configuraciones"),Object(r.jsx)(me.a.Item,{onClick:c,children:Object(r.jsxs)(Pe.a.Text,{type:"danger",children:[Object(r.jsx)(Ye.a,{}),"Desconectar"]})},"SignOut")]})},"user")}var He=n(327),Ue=n(322);var Ve=function(e){var t,n;return n=t=function(t){Object(He.a)(a,t);var n=Object(Ue.a)(a);function a(e){var t;return Object($.a)(this,a),(t=n.call(this,e)).state={spin:!0},t}return Object(ee.a)(a,[{key:"componentDidMount",value:function(){var e=Object(N.a)(D.a.mark((function e(){var t=this;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(L.a.get(K.TOKEN_STORAGE_KEY)){e.next=5;break}document.location.href=b,e.next=7;break;case 5:return e.next=7,X(!0).then((function(e){"success"!==e.status?(L.a.remove(K.TOKEN_STORAGE_KEY),document.location.href=b):(e&&e.data&&e.data.vistas&&t.context.getViews(e.data.vistas),t.setState({spin:!1}))})).catch((function(e){t.setState({spin:!1}),console.log(e),console.log("error de sesion en (PrivateRoutes)")}));case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(r.jsx)(e,Object(c.a)(Object(c.a)({},this.props),{},{spinLoading:this.state.spin}))}}]),a}(a.Component),t.contextType=ie,n}((function(e){var t=e.children,n=e.spinLoading,i=Object(a.useState)(!1),o=Object(ae.a)(i,2),c=o[0],s=o[1],l={backgroundColor:"white",width:"100%",margin:"0px",padding:"16px 16px 24px 10px",transition:"margin .2s",clear:"both",left:c?"80px":"256px",bottom:0,right:0};return Object(r.jsx)(ue.a,{spinning:n,tip:"Cargando Interfaz...",size:"large",className:"spin-container",children:Object(r.jsxs)(be.a,{children:[Object(r.jsx)(ke,{collapsed:c}),Object(r.jsxs)(be.a,{className:"site-layout",children:[Object(r.jsxs)(be.a.Header,{style:{minWidth:c&&"calc(100vw - 95px)"},className:de()("header",{collapsed:c}),id:"layoutHeader",children:[Object(r.jsx)("div",{className:"button",onClick:function(){return s(!c)},children:c?Object(r.jsx)(Te.a,{className:"text-primary"}):Object(r.jsx)(Ee.a,{})}),Object(r.jsxs)("div",{className:"right-container",children:[Object(r.jsx)(qe,{}),Object(r.jsx)(Ge,{})]})]}),Object(r.jsx)(be.a.Content,{className:"site-layout-background",style:{minHeight:"calc(100vh - 94px - 3rem)",marginTop:".5rem",transition:"margin .2s"},children:t}),Object(r.jsxs)(be.a.Footer,{style:l,children:["Atenea System v",K.version," - 2020\xa9"]})]})]})})})),Ke=n(42),Ze=n(38),Je=n(149),We=n(630),Xe=n(613),Qe=n(187),$e=n(620),et=n(10),tt=n.n(et);function nt(e){var t=e.children;return Object(r.jsx)(z.a,{style:{margin:"0 24px 1rem",borderRadius:".3rem"},children:Object(r.jsx)(q.a,{span:24,style:{borderRadius:".3rem",padding:"0 1rem",backgroundColor:"#fff",WebkitBoxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)",MozBoxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)",boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)"},children:t})})}var rt=n(624),at=function(e){var t=e.titulo,n=[{breadcrumbName:e.subtitulo}];return Object(r.jsx)(rt.a,{className:"site-page-header",title:t,breadcrumb:{routes:n}})},it=function(){var e=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"empleados",method:"GET",params:n},t));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ot=function(){var e=Object(N.a)(D.a.mark((function e(t,n){var r,a,i,o,c,s,l,d,u,b,f,j,h,p,O;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.id,a=n.metodo,i=n.cargo,o=n.fecha_baja,c=n.estado_empresa,s=n.gestor,l=n.auditor,d=n.negocio,u=n.subNegocio,b=n.columnas,f=n.tecnico,j=n.tecnicos,h=n.password,p=n.newPassword1,O=n.newPassword2,e.abrupt("return",J({url:"empleados",method:"PATCH",data:{id:r,metodo:a,cargo:i,fecha_baja:o,estado_empresa:c,gestor:s,auditor:l,negocio:d,subNegocio:u,columnas:b,tecnico:f,tecnicos:j,password:h,newPassword1:p,newPassword2:O}},t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ct=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.email,a=t.empleado,e.abrupt("return",J({url:"empleados",method:"POST",data:{metodo:n,email:r,empleado:a}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(N.a)(D.a.mark((function e(t,n){var r,a,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.metodo,a=n.email,i=n.empleado,e.abrupt("return",J({url:"empleados/"+t,method:"PUT",data:{metodo:r,email:a,empleado:i}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lt="comprobarInfancias",dt="cruzarData",ut="obtenerOrdenesPendientes",bt="obtenerOrdenesAnuladas",ft="obtenerOrdenesOtrasBandejas",jt="exportarPendientes",ht="exportarLiquidadas",pt="exportarPendientesGestor",Ot="obtenerOrdenesPendientesGestor",gt="buscarReiterada",xt="buscarInfancia",mt="buscarRegistro",vt="obtenerDetalleOrden",_t="agendarOrden",wt="agendarOrdenGestor",yt="asignarOrden",St="actualizarEstado",Ct="agregarObservacion",At={AREA_CREAR:"crearArea",AREA_ACTUALIZAR:"actualizarArea",AREA_BORRAR:"borrarArea",ASISTENCIA_CREAR:"asistenciaCrear",ASISTENCIA_ACTUALIZAR:"asistenciaActualizar",CARGO_CREAR:"crearCargo",CARGO_ACTUALIZAR:"actualizarCargo",CARGO_BORRAR:"borrarCargo",CONTRATA_CREAR:"contrataCrear",CONTRATA_LISTAR_TODO:"contrataListarTodo",CONTRATA_LISTAR_NOMBRES:"contrataListarNombres",CONTRATA_EDITAR:"contrataEditar",CONTRATA_BAJA:"contrataBaja",PERFIL_USUARIO:"perfilUsuario",EMPLEADOS_LISTAR_TODO:"empleadosListarTodo",EMPLEADOS_LISTAR_AUDITORES:"empleadoListarAuditores",EMPLEADOS_LISTAR_SUPERVISORES:"empleadoListarSupervisores",EMPLEADOS_LISTAR_GESTORES:"empleadoListarGestores",EMPLEADOS_LISTAR_TECNICOS:"empleadoListarTecnicosGlobal",EMPLEADOS_LISTAR_APOYO:"empleadoListarTecnicosApoyo",EMPLEADOS_CREAR:"empleadosCrear",EMPLEADOS_ACTUALIZAR:"empleadosActualizar",EMPLEADOS_LISTAR_COLUMNAS:"empleadosListarColumnas",EMPLEADOS_ACTUALIZAR_COLUMNAS:"empleadosActualizarColumnas",EMPLEADOS_CAMBIAR_PASS:"empleadosCambiarPassword",EMPLEADOS_RESET_PASS:"empleadosResetearPassword",EMPLEADOS_CERRAR_SESION:"empleadosCerrarSesion",EMPLEADOS_ACTUALIZAR_PERMISOS:"empleadosActualizarPermisos",EMPLEADOS_ACTIVAR_CUENTA:"empleadosActivarCuenta",EMPLEADOS_EDITAR_ESTADO_EMPRESA:"empleadosEditarEstadoEmpresa",EMPLEADOS_ACTUALIZAR_RUTA:"empleadosActualizarRuta",ORDENES_SUBIR_DATA:"ordenesSubirData",ORDENES_COMPROBAR_INFANCIAS:"ordenesComprobarInfancias",ORDENES_ACTUALIZAR_LIQUIDADAS:"ordenesActualizarLiquidadas",ORDENES_OBTENER_LIQUIDADAS:"ordenesObtenerLiquidadas",ORDENES_OBTENER_OTRAS_BANDEJAS:"ordenesObtenerOtrasBandejas",ORDENES_OBTENER_ANULADAS:"ordenesObtenerAnuladas",TIPOEMPLEADO_CREAR:"crearTipoEmpleado",TIPOEMPLEADO_ACTUALIZAR:"actualizarTipoEmpleado",TIPOEMPLEADO_BORRAR:"borrarTipoEmpleado",VISTA_CREAR:"crearVista",VISTA_ACTUALIZAR:"actualizarVista",VISTA_BORRAR:"borrarVista",ZONA_CREAR:"crearZona",ZONA_ACTUALIZAR:"actualizarZona",ZONA_BORRAR:"borrarZona"},It=["https://res.cloudinary.com/liteyca/image/upload/v1613847830/avatars/daniel_fbzpxm.jpg","https://res.cloudinary.com/liteyca/image/upload/v1613847803/avatars/stevie_g4dcxw.jpg","https://res.cloudinary.com/liteyca/image/upload/v1613847793/avatars/veronika_ydt9xq.jpg","https://res.cloudinary.com/liteyca/image/upload/v1613847792/avatars/nan_ng0uzp.jpg","https://res.cloudinary.com/liteyca/image/upload/v1613847790/avatars/justen_oprd2m.jpg","https://res.cloudinary.com/liteyca/image/upload/v1613847788/avatars/jenny_goini9.jpg","https://res.cloudinary.com/liteyca/image/upload/v1613847786/avatars/elyse_tqzbdt.png","https://res.cloudinary.com/liteyca/image/upload/v1613847983/avatars/matthew_wwdp4r.png","https://res.cloudinary.com/liteyca/image/upload/v1613847771/avatars/elliot_dpwphr.jpg"],kt=Je.a.Option;var Tt=[{path:f,exact:!0,component:function(){var e=Object(a.useState)(!1),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),s=Object(ae.a)(o,2),l=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(ae.a)(u,2),f=b[0],j=b[1],h=Object(a.useState)({}),p=Object(ae.a)(h,2),O=p[0],g=p[1],x=Object(a.useState)(null),m=Object(ae.a)(x,2),v=m[0],_=m[1],w=Object(a.useState)(null),y=Object(ae.a)(w,2),S=y[0],C=y[1],A=Object(a.useState)(null),I=Object(ae.a)(A,2),k=I[0],T=I[1];function E(){return(E=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,it(!0,At.PERFIL_USUARIO).then((function(e){var t=e.data;g(t||{})})).catch((function(e){return console.log(e)})).finally((function(){return i(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O._id){e.next=7;break}return d(!0),e.next=4,st(O._id,O).catch((function(e){return console.log(e)})).finally((function(){return d(!1)}));case 4:return e.abrupt("return",e.sent);case 7:V.a.warn("No se encontr\xf3 el id del usuario.",{position:"top-right"});case 8:case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!O._id){e.next=7;break}return j(!0),e.next=4,ot(!0,{id:O._id,metodo:At.EMPLEADOS_CAMBIAR_PASS,password:v,newPassword1:S,newPassword2:k}).catch((function(e){return console.log(e)})).finally((function(){F(),j(!1)}));case 4:return e.abrupt("return",e.sent);case 7:V.a.warn("No se encontr\xf3 el id del usuario.",{position:"top-right"});case 8:case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){E.apply(this,arguments)}()}),[]);var L=function(e,t){g(Object(c.a)(Object(c.a)({},O),{},Object(Ze.a)({},e,t)))},F=function(){_(null),C(null),T(null)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Datos de Usuario",subtitulo:"Perfil"}),Object(r.jsx)(nt,{children:n?Object(r.jsx)("div",{style:{margin:"2rem",justifyContent:"center",display:"flex"},children:Object(r.jsx)(ue.a,{spinning:!0,size:"large"})}):Object(r.jsxs)("div",{style:{margin:"1rem .5rem"},children:[Object(r.jsx)("h3",{children:"Editar Datos Personales:"}),Object(r.jsxs)(z.a,{style:{margin:"1rem 0"},children:[Object(r.jsx)(q.a,{sm:12,children:Object(r.jsxs)(We.b,{direction:"vertical",children:[Object(r.jsx)(P.a,{addonBefore:"Nombre:",placeholder:"Nombre",style:{width:"400px"},value:O.nombre?O.nombre:null,onChange:function(e){return L("nombre",e.currentTarget.value)}}),Object(r.jsx)(P.a,{addonBefore:"Apellidos:",placeholder:"Apellidos",style:{width:"400px",marginBottom:".5rem"},value:O.apellidos?O.apellidos:null,onChange:function(e){return L("apellidos",e.currentTarget.value)}}),Object(r.jsx)(P.a,{addonBefore:"Correo:",placeholder:"Correo",style:{width:"400px",marginBottom:".5rem"},value:O.usuario&&O.usuario.email?O.usuario.email:null,onChange:function(e){return g(Object(c.a)(Object(c.a)({},O),{},{usuario:Object(c.a)(Object(c.a)({},O.usuario),{},{email:e.target.value})}))}}),Object(r.jsx)(P.a,{onChange:function(e){return L("nacionalidad",e.currentTarget.value)},value:O.nacionalidad?O.nacionalidad:null,addonBefore:"Nacionalidad",placeholder:"Nacionalidad",style:{width:"400px"}})]})}),Object(r.jsx)(q.a,{sm:12,children:Object(r.jsxs)(We.b,{direction:"vertical",children:[Object(r.jsx)("span",{children:"Fecha de Nacimiento:"}),Object(r.jsx)(Xe.a,{placeholder:"Fecha de Nacimiento",style:{width:"400px"},value:O.fecha_nacimiento?tt()(O.fecha_nacimiento):null,onChange:function(e,t){return L("fecha_nacimiento",t)}}),Object(r.jsx)("span",{children:"Tipo de Documento:"}),Object(r.jsxs)(Je.a,{onChange:function(e){return L("tipo_documento",e)},value:O.tipo_documento?O.tipo_documento:null,style:{width:"400px"},placeholder:"Seleccionar tipo de Documento",children:[Object(r.jsx)(kt,{value:"DNI",children:"DNI"}),Object(r.jsx)(kt,{value:"Otro",children:"Otros"})]}),Object(r.jsx)(P.a,{onChange:function(e){return L("numero_documento",e.currentTarget.value)},value:O.numero_documento?O.numero_documento:null,addonBefore:"N\xfamero de Documento",placeholder:"Numero de Documento",style:{width:"400px"}})]})})]}),Object(r.jsxs)(z.a,{style:{marginBottom:"3rem"},children:[Object(r.jsx)("span",{children:"Imagen de Perfil:"}),Object(r.jsx)("br",{}),Object(r.jsx)(Qe.a.Group,{value:O.usuario&&O.usuario.imagen?O.usuario.imagen:null,onChange:function(e){return g(Object(c.a)(Object(c.a)({},O),{},{usuario:Object(c.a)(Object(c.a)({},O.usuario),{},{imagen:e.target.value})}))},children:It.map((function(e,t){return Object(r.jsxs)(Qe.a,{value:e,style:{margin:".5rem"},children:[Object(r.jsx)(Fe.a,{size:{xs:20,sm:28,md:36,lg:60,xl:76,xxl:90},src:Object(r.jsx)($e.a,{src:e})}),","]},t)}))})]}),Object(r.jsx)(B.a,{onClick:function(){return R.apply(this,arguments)},type:"primary",loading:l,children:"Guardar"})]})}),Object(r.jsxs)(nt,{children:[Object(r.jsxs)("div",{style:{margin:"1rem .5rem"},children:[Object(r.jsx)("h3",{children:"Cambiar Constrase\xf1a:"}),Object(r.jsxs)(We.b,{direction:"vertical",children:[Object(r.jsx)("span",{children:"Contrase\xf1a actual:"}),Object(r.jsx)(P.a.Password,{required:!0,style:{width:300},onChange:function(e){return _(e.currentTarget.value)},value:v}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{children:"Nueva contrase\xf1a:"}),Object(r.jsx)(P.a.Password,{required:!0,style:{width:300},onChange:function(e){return C(e.currentTarget.value)},value:S}),Object(r.jsx)("br",{}),Object(r.jsx)("span",{children:"Repetir contrase\xf1a:"}),Object(r.jsx)(P.a.Password,{required:!0,style:{width:300},onChange:function(e){return T(e.currentTarget.value)},value:k}),Object(r.jsx)("br",{})]})]}),Object(r.jsx)(B.a,{style:{marginBottom:"1rem"},type:"primary",onClick:function(){return M.apply(this,arguments)},loading:f,children:"Guardar"})]})]})}}],Et=n(299)(K.socket,{transports:["websocket"],secure:!0,reconnection:!0}),Rt=n(617),Dt=n(646),Nt=n(647),Mt={success:"#52c41a",error:"#EB2F2F",warning:"#F8C82E",Pendiente:"#EFFF12",Completado:"#9BB6C2",Iniciado:"#5DBE3F",Suspendido:"#ABFFBC",Cancelado:"#80FF80",NoRealizada:"#1414FF"},Lt=["Instalaci\xf3n Movistar uno Gpon","Instalaci\xf3n Gpon Movistar Tot","Instalaci\xf3n Migraci\xf3n Gpon","Instalaci\xf3n Migraci\xf3n Gpon MT","Instalaci\xf3n Gpon New","Instalaci\xf3n Migraci\xf3n HFC a Gpon","Instalaci\xf3n Migraci\xf3n HFC a Gpon CC","Instalacion B2B Tradicional GPON"],zt=["Instalaci\xf3n Migraci\xf3n","Instalaci\xf3n Migraci\xf3n Movistar Total","Instalaci\xf3n Movistar Total","Instalaci\xf3n Movistar uno","Instalaci\xf3n CATV","Instalacion B2B Tradicional HFC"],qt=["Reparaci\xf3n GPON","Reparaci\xf3n Gpon Movistar Uno","Reparacion Movistar Total Gpon","Reparacion B2B Tradicional GPON"],Ft=["Reparaci\xf3n Movistar Total","Reparaci\xf3n Movistar uno","Reparaci\xf3n CATV","Reparacion B2B Tradicional HFC"],Pt=["Instalaci\xf3n Rutina VA Gpon","Rutina MT GPON MT","Rutina MT GPON MT","Rutina VA GPON MT","Traslado GPON","Instalaci\xf3n rutina MT Gpon","Instalaci\xf3n rutina Bucle Gpon","Traslado GPON Movistar Total","Instalaci\xf3n rutina AT Gpon","Rutina AT GPON MT"],Bt=["Instalaci\xf3n Rutina Bucle","Instalaci\xf3n Rutina CATV_AT","Instalaci\xf3n Rutina CATV_VA","Instalaci\xf3n Rutina MT Movistar Total","Traslado HFC","Instalaci\xf3n Rutina VA Movistar Total","Traslado HFC Mov Total","Instalaci\xf3n Rutina AT Movistar Total","Instalaci\xf3n Rutina CATV_MT"],Yt="Cancelado",Gt="Completado",Ht="Iniciado",Ut="No Realizada",Vt="Pendiente",Kt="Suspendido",Zt=["Baja de Acometida"],Jt=["Instalacion B2B Tradicional GPON","Instalacion B2B Tradicional HFC","Reparacion B2B Tradicional GPON","Reparacion B2B Tradicional HFC"];var Wt=function(e){var t=e.titulo,n=e.ordenes,a=void 0===n?[]:n,i=e.columnas;return Object(r.jsxs)(q.a,{sm:i,style:{borderRadius:".3rem",padding:".5rem 1rem",backgroundColor:"#fff",WebkitBoxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)",MozBoxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)",boxShadow:"0px 0px 10px 0px rgba(0,0,0,0.03)"},children:[Object(r.jsx)("h4",{children:t}),Object(r.jsxs)(z.a,{children:[Object(r.jsx)(q.a,{sm:12,children:Object(r.jsx)(Rt.a,{title:"Liquidadas",value:a&&a.length>0?a.filter((function(e){return e&&e.estado_toa===Gt})).length:0,valueStyle:{color:Mt.success},prefix:Object(r.jsx)(Dt.a,{})})}),Object(r.jsx)(q.a,{sm:12,children:Object(r.jsx)(Rt.a,{title:"Pendientes",value:a&&a.length>0?a.filter((function(e){return e&&e.estado_toa===Vt})).length:0,valueStyle:{color:Mt.warning},prefix:Object(r.jsx)(Nt.a,{})})})]})]})},Xt="averiashfc",Qt="altashfc",$t="rutinas",en="bajas",tn="gpon",nn="hfc",rn=[{text:"Averias",value:"averias"},{text:"Altas",value:"altas"}],an=[{text:"GPON",value:tn},{text:"HFC",value:nn},{text:"COBRE",value:"cobre"},{text:"CRITICOS",value:"criticos"},{text:"EMPRESAS",value:"empresas"}],on=["MA","SM","SJ","PN","MR","SV","VN","B1","B3","B2","BE","GC","GM","GR","EH","PS","P2","GU","GX","GZ","TJ","TO","D4","D5","P0","PB","SU","W5","W6","BD","B0","B5","B4","PF","B7","BZ","E1","BO","BG","BW","BK","PD","BF","B9","B6","E3","E2","B8","B3","BX","P8","ANAI","ANBA","ANCA","ANCB","ANCC","ANCD","ANCH","ANCM","ANCO","ANCP","ANCQ","ANCR","ANEM","ANEP","ANHL","ANHM","ANHR","ANHU","ANMA","ANMC","ANMO","ANNE","ANPO","ANRE","ANSA","ANSI","ANSJ","ANSM","ANSN","ANTI","ANYC","ANYU","MA","MAU2","MAU3","PIEA","PILA","PILO","PIMA","PINE","PING","PIQU","PISJ","PISU","PITA","SJ","SJU1","SJU2","SJU3","TUCC","TUCO","TUPP","TUPS","TUTU","TUZA","TUZO"],cn=n(67),sn=n(100),ln=n(69);var dn=function(e){var t=e.data,n=void 0===t?[]:t,a=e.field,i=e.height,o=e.paddinLeft,c=void 0===o?150:o;return!n||n.length<1?Object(r.jsx)("div",{style:{width:"100%",height:i,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(r.jsx)(sn.a,{})}):Object(r.jsxs)(cn.Chart,{data:n,height:i,padding:[0,50,10,c],autoFit:!0,children:[Object(r.jsx)(cn.Coordinate,{transpose:!0}),Object(r.jsx)(cn.Axis,{name:"nombre"}),Object(r.jsx)(cn.Axis,{name:"cantidad",visible:!1}),Object(r.jsx)(ln.a,{}),Object(r.jsx)(cn.Interval,{shape:"rect",position:"nombre*cantidad*".concat(a),animate:{enter:{duration:500}},label:"cantidad",tooltip:["".concat(a,"*cantidad")]})]})};var un=function(e){var t=e.ordenes,n=void 0===t?[]:t,i=e.hora,o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1];return Object(a.useEffect)((function(){!function(){if(n&&n.length>0){var e=n.filter((function(e){return e&&e.gestor_liquidado_toa&&e.estado===Gt}));if(e.length>0){var t=[],r=[],a=[];e.forEach((function(e){e&&e.gestor_liquidado_toa&&!t.includes(e.gestor_liquidado_toa.nombre)&&(t.push(e.gestor_liquidado_toa.nombre),r.push("".concat(e.gestor_liquidado_toa.nombre," ").concat(e.gestor_liquidado_toa.apellidos)))})),t.forEach((function(t,n){a.push({nombre:t,gestor:r[n],cantidad:e.filter((function(e){return e&&e.gestor_liquidado_toa&&e.gestor_liquidado_toa.nombre===t})).length})})),l(a)}else l([])}}()}),[n]),Object(r.jsxs)("div",{children:[Object(r.jsxs)(z.a,{style:{margin:"0 24px 1rem",borderRadius:".3rem"},children:[Object(r.jsx)(Wt,{columnas:11,titulo:"Averias",ordenes:n.filter((function(e){return e&&e.tipo===Xt}))}),Object(r.jsx)(q.a,{sm:1}),Object(r.jsx)(Wt,{columnas:12,titulo:"Altas",ordenes:n.filter((function(e){return e&&e.tipo===Qt&&!Zt.includes(e.subtipo_actividad)}))})]}),Object(r.jsx)(nt,{children:Object(r.jsxs)("div",{style:{marginTop:".5rem"},children:[Object(r.jsxs)("h3",{children:["Indicadores de Liquidaci\xf3n (Gestor) - ",i]}),Object(r.jsx)("br",{}),Object(r.jsx)(dn,{data:s,field:"gestor",height:500})]})})]})},bn=n(615),fn=n(650),jn=n(651),hn=n(614),pn=n(648),On=n(649),gn=n(325),xn=n(150),mn=n.n(xn);function vn(e){return e.charAt(0).toUpperCase()+e.slice(1)}function _n(e){return[{title:vn(e),dataIndex:e,ellipsis:{showTitle:!1},width:200,align:"left",render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Completado",dataIndex:"completado",align:"center",sorter:function(e,t){return e.completado<t.completado?-1:e.completado>t.completado?1:0},render:function(e){return Object(r.jsx)(gn.a,{icon:Object(r.jsx)(Dt.a,{}),color:"#8994e9",children:e||0})}},{title:"Iniciado",dataIndex:"iniciado",align:"center",sorter:function(e,t){return e.iniciado<t.iniciado?-1:e.iniciado>t.iniciado?1:0},render:function(e){return Object(r.jsx)(gn.a,{icon:Object(r.jsx)(pn.a,{}),color:"#66CC33",children:e||0})}},{title:"No Realizada",dataIndex:"no_realizada",align:"center",sorter:function(e,t){return e.no_realizada<t.no_realizada?-1:e.no_realizada>t.no_realizada?1:0},render:function(e){return e||0}},{title:"Pendiente",dataIndex:"pendiente",align:"center",sorter:function(e,t){return e.pendiente<t.pendiente?-1:e.pendiente>t.pendiente?1:0},render:function(e){return e||0}},{title:"Suspendido",dataIndex:"suspendido",align:"center",sorter:function(e,t){return e.suspendido<t.suspendido?-1:e.suspendido>t.suspendido?1:0},render:function(e){return e||0}},{title:"Cancelado",dataIndex:"cancelado",align:"center",sorter:function(e,t){return e.cancelado<t.cancelado?-1:e.cancelado>t.cancelado?1:0},render:function(e){return e||0}},{title:"Total",dataIndex:"total",align:"center",sorter:function(e,t){return e.total<t.total?-1:e.total>t.total?1:0},render:function(e){return e?Object(r.jsx)(gn.a,{color:"#999999",children:Object(r.jsx)("strong",{children:e||0})}):0}}]}function wn(e){var t=0,n=0,a=0,i=0,o=0,c=0,s=0;return e.forEach((function(e){var r=e.completado,l=e.iniciado,d=e.no_realizada,u=e.pendiente,b=e.suspendido,f=e.cancelado,j=e.total;t+=r,n+=l,a+=d,i+=u,o+=b,c+=f,s+=j})),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(hn.a.Summary.Row,{style:{backgroundColor:"#F7F7F7"},children:[Object(r.jsx)(hn.a.Summary.Cell,{children:Object(r.jsx)("strong",{children:"Total"})}),Object(r.jsx)(hn.a.Summary.Cell,{align:"center",children:Object(r.jsx)(gn.a,{icon:Object(r.jsx)(Dt.a,{}),color:"#8994e9",children:Object(r.jsx)("strong",{children:t})})}),Object(r.jsx)(hn.a.Summary.Cell,{align:"center",children:Object(r.jsx)(gn.a,{icon:Object(r.jsx)(On.a,{}),color:"#66CC33",children:n})}),Object(r.jsx)(hn.a.Summary.Cell,{align:"center",children:Object(r.jsx)(mn.a,{children:a})}),Object(r.jsx)(hn.a.Summary.Cell,{align:"center",children:Object(r.jsx)(mn.a,{children:i})}),Object(r.jsx)(hn.a.Summary.Cell,{align:"center",children:Object(r.jsx)(mn.a,{children:o})}),Object(r.jsx)(hn.a.Summary.Cell,{align:"center",children:Object(r.jsx)(mn.a,{children:c})}),Object(r.jsx)(hn.a.Summary.Cell,{align:"center",children:Object(r.jsx)(gn.a,{color:"#999999",children:Object(r.jsx)("strong",{children:s})})})]})})}function yn(e){var t=e.data,n=void 0===t?[]:t,a=e.field;return!n||n.length<1?Object(r.jsx)("div",{style:{width:"100%",height:250,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(r.jsx)(ue.a,{spinning:!0,tip:"Cargando...",size:"large"})}):Object(r.jsxs)(cn.Chart,{height:250,padding:[30,20,90,40],data:n,autoFit:!0,filter:[["ordenes",function(e){return null!=e}]],children:[Object(r.jsx)(cn.Interval,{adjust:[{type:"dodge",marginRatio:0}],color:{fields:["estado"],callback:function(e){return"Pendiente"===(t=e)?Mt.Pendiente:"Completado"===t?Mt.Completado:"Iniciado"===t?Mt.Iniciado:"Suspendido"===t?Mt.Suspendido:"Cancelado"===t?Mt.Cancelado:"No Realizada"===t?Mt.NoRealizada:void 0;var t}},position:"".concat(a,"*ordenes"),label:{fields:["ordenes","estado"],callback:function(e,t){return"Completado"===t&&e>0?{content:e,style:{fill:"red",fontSize:15,fontWeight:"bold"}}:{content:e}}}}),Object(r.jsx)(cn.Tooltip,{shared:!0}),Object(r.jsx)(cn.Interaction,{type:"active-region"})]})}var Sn=function(e){var t=e.dataSource,n=void 0===t?[]:t,a=e.dataChart,i=void 0===a?[]:a,o=e.tipo;return n.length<=0||i<=0?Object(r.jsx)("div",{children:Object(r.jsx)(sn.a,{style:{margin:"5rem"}})}):Object(r.jsxs)(z.a,{style:{marginTop:"2rem",marginBottom:"1rem"},children:[Object(r.jsx)(q.a,{sm:24,children:Object(r.jsx)(yn,{data:i,field:o})}),Object(r.jsx)(q.a,{sm:24,children:Object(r.jsx)(z.a,{style:{margin:"1rem 0"},children:Object(r.jsx)(hn.a,{style:{background:"white !important"},rowKey:"key",columns:_n(o),dataSource:n,size:"small",pagination:!1,summary:wn})})})]})};function Cn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(e&&0!==e.length){var n=[],r=[];return e.forEach((function(e){return t.includes(e.bucket)?null:t.push(e.bucket)})),e.forEach((function(e){return n.includes(e.estado)?null:n.push(e.estado)})),t.forEach((function(t){n.forEach((function(n){var a=e.filter((function(e){return e.bucket===t&&e.estado===n})).length;r.push({bucket:String(t).substring(6),estado:n,ordenes:a})}))})),{ordenes:r,buckets:t,estados:n}}return{ordenes:[],buckets:t,estados:[]}}function An(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(e&&0!==e.length){var n=[],r=[];return e.forEach((function(e){e.contrata&&e.contrata.nombre&&(t.includes(e.contrata.nombre)||t.push(e.contrata.nombre))})),e.forEach((function(e){return n.includes(e.estado)?null:n.push(e.estado)})),t.forEach((function(t){n.forEach((function(n){var a=e.filter((function(e){return!(!e.contrata||!e.contrata.nombre)&&(e.contrata.nombre===t&&e.estado===n)})).length;r.push({contrata:t,estado:n,ordenes:a})}))})),{ordenes:r,contratas:t}}return{ordenes:[],contratas:t}}function In(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=[];if(e&&0!==e.length){var n=[],r=[];return e.forEach((function(e){e.gestor&&e.gestor.nombre&&(t.includes(e.gestor.nombre)||t.push(e.gestor.nombre))})),e.forEach((function(e){return n.includes(e.estado)?null:n.push(e.estado)})),t.forEach((function(t){n.forEach((function(n){var a=e.filter((function(e){return!(!e.gestor||!e.gestor.nombre)&&(e.gestor.nombre===t&&e.estado===n)})).length;r.push({gestor:t,estado:n,ordenes:a})}))})),{ordenes:r,gestores:t}}return{ordenes:[],gestores:t}}function kn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(e&&e.length>0){var n=[],r=[];return e.forEach((function(e){n.includes(e[t])||n.push(e[t])})),n.filter((function(e){return e})).forEach((function(n,a){var i,o;r.length<=0?r=[(i={key:a},Object(Ze.a)(i,t,n),Object(Ze.a)(i,"completado",e.filter((function(e){return e.estado===Gt&&n===e[t]})).length),Object(Ze.a)(i,"iniciado",e.filter((function(e){return e.estado===Ht&&n===e[t]})).length),Object(Ze.a)(i,"no_realizada",e.filter((function(e){return e.estado===Ut&&n===e[t]})).length),Object(Ze.a)(i,"pendiente",e.filter((function(e){return e.estado===Vt&&n===e[t]})).length),Object(Ze.a)(i,"suspendido",e.filter((function(e){return e.estado===Kt&&n===e[t]})).length),Object(Ze.a)(i,"cancelado",e.filter((function(e){return e.estado===Yt&&n===e[t]})).length),Object(Ze.a)(i,"total",e.filter((function(e){return n===e[t]})).length),i)]:r.push((o={key:a},Object(Ze.a)(o,t,n),Object(Ze.a)(o,"completado",e.filter((function(e){return e.estado===Gt&&n===e[t]})).length),Object(Ze.a)(o,"iniciado",e.filter((function(e){return e.estado===Ht&&n===e[t]})).length),Object(Ze.a)(o,"no_realizada",e.filter((function(e){return e.estado===Ut&&n===e[t]})).length),Object(Ze.a)(o,"pendiente",e.filter((function(e){return e.estado===Vt&&n===e[t]})).length),Object(Ze.a)(o,"suspendido",e.filter((function(e){return e.estado===Kt&&n===e[t]})).length),Object(Ze.a)(o,"cancelado",e.filter((function(e){return e.estado===Yt&&n===e[t]})).length),Object(Ze.a)(o,"total",e.filter((function(e){return n===e[t]})).length),o))})),r}return[]}function Tn(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(e&&e.length>0){var n=[],r=[];return e.forEach((function(e){n.includes(e[t].nombre)||n.push(e[t].nombre)})),n.filter((function(e){return e})).forEach((function(n,a){var i,o;r.length<=0?r=[(i={key:a},Object(Ze.a)(i,t,n),Object(Ze.a)(i,"completado",e.filter((function(e){return e.estado===Gt&&n===e[t].nombre})).length),Object(Ze.a)(i,"iniciado",e.filter((function(e){return e.estado===Ht&&n===e[t].nombre})).length),Object(Ze.a)(i,"no_realizada",e.filter((function(e){return e.estado===Ut&&n===e[t].nombre})).length),Object(Ze.a)(i,"pendiente",e.filter((function(e){return e.estado===Vt&&n===e[t].nombre})).length),Object(Ze.a)(i,"suspendido",e.filter((function(e){return e.estado===Kt&&n===e[t].nombre})).length),Object(Ze.a)(i,"cancelado",e.filter((function(e){return e.estado===Yt&&n===e[t].nombre})).length),Object(Ze.a)(i,"total",e.filter((function(e){return n===e[t].nombre})).length),i)]:r.push((o={key:a},Object(Ze.a)(o,t,n),Object(Ze.a)(o,"completado",e.filter((function(e){return e.estado===Gt&&n===e[t].nombre})).length),Object(Ze.a)(o,"iniciado",e.filter((function(e){return e.estado===Ht&&n===e[t].nombre})).length),Object(Ze.a)(o,"no_realizada",e.filter((function(e){return e.estado===Ut&&n===e[t].nombre})).length),Object(Ze.a)(o,"pendiente",e.filter((function(e){return e.estado===Vt&&n===e[t].nombre})).length),Object(Ze.a)(o,"suspendido",e.filter((function(e){return e.estado===Kt&&n===e[t].nombre})).length),Object(Ze.a)(o,"cancelado",e.filter((function(e){return e.estado===Yt&&n===e[t].nombre})).length),Object(Ze.a)(o,"total",e.filter((function(e){return n===e[t].nombre})).length),o))})),r}return[]}var En=Je.a.Option,Rn=Pe.a.Text,Dn=bn.a.TabPane;var Nn=function(e){var t=e.hora,n=e.ordenes,i=void 0===n?[]:n,o=Object(a.useState)(Xt),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)(nn),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)([]),h=Object(ae.a)(j,2),p=h[0],O=h[1];function g(){return(g=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(i&&i.length>0)){e.next=4;break}return e.abrupt("return",new Promise((function(e){return e(x(i))})).then((function(e){return m(e)})).then((function(e){return O(e)})).catch((function(e){return console.log(e)})));case 4:return O([]),e.abrupt("return");case 6:case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function x(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e&&e.length<1)return[];var t=[].concat(Object(Ke.a)(Ft),Object(Ke.a)(qt)),n=[].concat(Object(Ke.a)(zt),Object(Ke.a)(Lt)),r=[].concat(Object(Ke.a)(Bt),Object(Ke.a)(Pt));return s===Xt?e.filter((function(e){return e&&e.subtipo_actividad&&t.includes(e.subtipo_actividad)})):s===Qt?e.filter((function(e){return e&&e.subtipo_actividad&&n.includes(e.subtipo_actividad)})):s===$t?e.filter((function(e){return e&&e.subtipo_actividad&&r.includes(e.subtipo_actividad)})):s===en?e.filter((function(e){return e&&e.subtipo_actividad&&Zt.includes(e.subtipo_actividad)})):e}function m(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(!e&&e.length<1)return[];var t=[].concat(Object(Ke.a)(Ft),Object(Ke.a)(zt),Object(Ke.a)(Bt)),n=[].concat(Object(Ke.a)(qt),Object(Ke.a)(Lt),Object(Ke.a)(Pt));return b===nn?e.filter((function(e){return e&&e.subtipo_actividad&&t.includes(e.subtipo_actividad)})):b===tn?e.filter((function(e){return e&&e.subtipo_actividad&&n.includes(e.subtipo_actividad)})):e}return Object(a.useEffect)((function(){s===en&&"Todo"!==b&&f("Todo"),function(){g.apply(this,arguments)}()}),[i,s,b]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{style:{marginTop:".5rem"},children:[Object(r.jsxs)("h3",{children:["Indicadores de Actividad - ",t]}),Object(r.jsxs)(z.a,{children:[Object(r.jsxs)(q.a,{sm:7,children:[Object(r.jsx)("span",{children:"Negocio: "}),Object(r.jsxs)(Je.a,{size:"small",style:{width:"100px",marginLeft:".5rem"},value:s,onChange:function(e){return l(e)},children:[Object(r.jsx)(En,{value:Xt,children:"Averias"}),Object(r.jsx)(En,{value:Qt,children:"Altas"}),Object(r.jsx)(En,{value:$t,children:"Rutinas"}),Object(r.jsx)(En,{value:en,children:"Bajas"}),Object(r.jsx)(En,{value:"Todo",children:"Todo"})]})]}),Object(r.jsxs)(q.a,{sm:7,children:[Object(r.jsx)("span",{children:"Tecnolog\xeda:"}),Object(r.jsxs)(Je.a,{size:"small",disabled:s===en,style:{width:"100px",marginLeft:".5rem"},value:b,onChange:function(e){return f(e)},children:[Object(r.jsx)(En,{value:nn,children:"HFC"}),Object(r.jsx)(En,{value:tn,children:"GPON"}),Object(r.jsx)(En,{value:"Todo",children:"Todo"})]})]}),Object(r.jsxs)(q.a,{sm:7,children:[Object(r.jsx)("span",{children:"Zona: "}),Object(r.jsx)(Rn,{type:"secondary",children:"LIMA"})]})]})]}),Object(r.jsxs)(bn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)(Dn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(fn.a,{}),"Bucket"]}),children:Object(r.jsx)(Sn,{dataSource:kn(p,"bucket"),dataChart:Cn(p).ordenes,tipo:"bucket"})},"1"),Object(r.jsx)(Dn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(jn.a,{}),"Contrata"]}),children:Object(r.jsx)(Sn,{dataSource:Tn(p.filter((function(e){return e.tecnico&&e.contrata})),"contrata"),dataChart:An(p.filter((function(e){return e.tecnico&&e.contrata}))).ordenes,tipo:"contrata"})},"2"),Object(r.jsx)(Dn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Y.a,{}),"Gestor"]}),children:Object(r.jsx)(Sn,{dataSource:Tn(p.filter((function(e){return e.tecnico&&e.gestor})),"gestor"),dataChart:In(p.filter((function(e){return e.tecnico&&e.gestor}))).ordenes,tipo:"gestor"})},"3")]})]})},Mn=n(97),Ln=n(320);var zn=function(e){var t=e.hora,n=e.plazo,a=e.vencidas,i=e.porcentaje;return Object(r.jsxs)(q.a,{sm:12,style:{justifyContent:"center",textAlign:"center"},children:[Object(r.jsxs)("h4",{children:["Plazo ",t,"h"]}),Object(r.jsxs)(z.a,{gutter:16,style:{margin:"1rem 0"},children:[Object(r.jsx)(q.a,{sm:12,children:Object(r.jsx)(ln.a,{title:"".concat(n," En plazo / ").concat(a," Vencidas"),children:Object(r.jsx)(Ln.a,{format:function(e){return e+"%"},strokeColor:i<50?Mt.error:i>=50&&i<70?Mt.warning:Mt.success,percent:i,strokeWidth:10,width:160,gapDegree:80,trailColor:"#CCCCFF",type:"dashboard",showInfo:!0})})}),Object(r.jsxs)(q.a,{sm:12,children:[Object(r.jsx)(z.a,{style:{marginBottom:".5rem"},children:Object(r.jsx)(Rt.a,{title:"En plazo",value:n,valueStyle:{color:Mt.success},prefix:Object(r.jsx)(Dt.a,{})})}),Object(r.jsx)(z.a,{style:{marginBottom:".5rem"},children:Object(r.jsx)(Rt.a,{title:"Vencidas",value:a,valueStyle:{color:Mt.error},prefix:Object(r.jsx)(Nt.a,{})})})]})]})]})},qn=n(12),Fn=n(621),Pn=Pe.a.Text;var Bn=function(e){var t=e.ordenes,n=void 0===t?[]:t,a=e.visible,i=e.abrir,o=e.horas,c=[{title:"#",width:40,align:"center",render:function(e,t,n){return n+1}},{title:"Requerimiento",dataIndex:"requerimiento",width:115,align:"center",render:function(e){return Object(r.jsx)(Pn,{copyable:!0,children:e})}},{title:"Cliente",dataIndex:"codigo_cliente",width:100,align:"center",render:function(e){return Object(r.jsx)(Pn,{copyable:!0,children:e})}},{title:"Gestor",dataIndex:"gestor",width:180,ellipsis:!0,render:function(e){return e&&e.nombre?Object(r.jsx)(Pn,{children:"".concat(e.nombre," ").concat(e.apellidos)}):"-"}},{title:"Tecnico",dataIndex:"tecnico",width:180,ellipsis:!0,render:function(e){return e&&e.nombre?Object(r.jsx)(Pn,{children:"".concat(e.nombre," ").concat(e.apellidos)}):"-"}},{title:"Carnet",dataIndex:"carnet",width:80,align:"center"},{title:"Actividad",dataIndex:"subtipo_actividad",width:220},{title:"Tipo de Cita",dataIndex:"tipo_cita",width:150},{title:"Fecha Registro",dataIndex:"fecha_registro_legados",width:120,align:"center",render:function(e){return tt()(e).format("DD/MM/YY HH:mm")}},{title:"Fecha Liquidado",dataIndex:"fecha_pre_no_realizado",width:120,align:"center",render:function(e){return tt()(e).format("DD/MM/YY HH:mm")}},{title:"Horas",dataIndex:"fecha_registro_legados",width:60,align:"center",render:function(e,t){var n=tt()(t.fecha_pre_no_realizado).diff(e,"hour");return n<o?Object(r.jsx)(gn.a,{color:"success",children:n}):Object(r.jsx)(gn.a,{color:"error",children:n})}}];return Object(r.jsx)(Fn.a,{title:"Lista de Ordenes",visible:a,onOk:i,onCancel:i,footer:!1,width:"85vw",centered:!0,children:Object(r.jsx)(hn.a,{rowKey:"requerimiento",dataSource:n,columns:c,pagination:{pageSize:50},size:"small",bordered:!0,scroll:{y:"60vh",x:"80vw"}})})};function Yn(e){var t=e.data,n=void 0===t?[]:t,i=e.paddingLeft,o=e.height,c=Object(a.useState)(!1),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(ae.a)(u,2),f=b[0],j=b[1],h=Object(a.useState)([]),p=Object(ae.a)(h,2),O=p[0],g=p[1],x=Object(a.useState)(0),m=Object(ae.a)(x,2),v=m[0],_=m[1];Object(a.useEffect)((function(){d(!0),setTimeout((function(){d(!1)}),80)}),[n,f]);var w=function(){return j(!f)},y={"Averias 24h":{title:"Averias 24h",color:qn.green[4]},"Plazo 72h":{title:"Plazo 72h",color:qn.green[4]}},S={plazo:"Plazo",vencido:"Vencido"};return l||!n||n.length<1?Object(r.jsx)("div",{style:{width:"100%",height:o,display:"flex",alignItems:"center",justifyContent:"center"},children:Object(r.jsx)(ue.a,{spinning:!0,tip:"Cargando...",size:"large"})}):Object(r.jsxs)(cn.Chart,{autoFit:!0,data:n,height:o,padding:[20,20,20,i],appendPadding:[10],onClick:function(e){return function(e){e&&e.data&&("Plazo 72h"===e.data.indexCode?_(72):_(24),g(e.data.ordenes),w())}(e.data)},children:[Object(r.jsx)(cn.Legend,{visible:!0,itemName:{formatter:function(e,t){return S[e]}}}),Object(r.jsx)(cn.Tooltip,{showMarkers:!1}),Object(r.jsx)(cn.Facet,{fields:["indexCode"],type:"rect",columnTitle:{offsetY:-15,style:{fontSize:14,fontWeight:300,fill:"#505050"},formatter:function(e){return y[e].title}},eachView:function(e,t){e.coordinate().transpose(),0===t.columnIndex?(e.axis("nombre",{tickLine:null,line:null}),e.axis("value",!1)):e.axis(!1);var n=y[t.columnValue].color;e.interval().adjust("stack").position("nombre*value").color("type",[n,"#FFE2DC"]).size(20).label("value*type",(function(e,t){if("vencido"===t)return null;var n=e<30?10:-4;return{content:"".concat(e,"%"),offset:n}})).tooltip("nombre*value*indexCode*type*ordenes",(function(e,t,n,r,a){return{title:e,value:"".concat(r," : ").concat(a.length),name:n}})),e.interaction("element-active")}}),Object(r.jsx)(Bn,{ordenes:O,abrir:w,visible:f,horas:v})]})}var Gn=bn.a.TabPane;var Hn=function(e){var t=e.ordenes,n=void 0===t?[]:t,i=e.hora,o=Object(a.useState)({plazo:[],vencidas:[],porcentaje:0}),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)({plazo:[],vencidas:[],porcentaje:0}),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)(!1),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)([]),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)([]),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)([]),A=Object(ae.a)(C,2),I=A[0],k=A[1];function T(e,t){var n=e.filter((function(e){return tt()(e.fecha_pre_no_realizado).diff(e.fecha_registro_legados,"hour")<t})),r=e.filter((function(e){return tt()(e.fecha_pre_no_realizado).diff(e.fecha_registro_legados,"hour")>=t}));return{plazo:n,vencidas:r,porcentaje:Math.round(100*n.length/(n.length+r.length))}}function E(e,t,n,r,a){return[{indexCode:"Averias 24h",nombre:e,type:"plazo",ordenes:t,value:Math.round(100*t.length/(t.length+n.length))},{indexCode:"Averias 24h",nombre:e,type:"vencido",ordenes:n,value:Math.round(100*n.length/(t.length+n.length))},{indexCode:"Plazo 72h",nombre:e,type:"plazo",ordenes:r,value:Math.round(100*r.length/(r.length+a.length))},{indexCode:"Plazo 72h",nombre:e,type:"vencido",ordenes:a,value:Math.round(100*a.length/(r.length+a.length))}]}return Object(a.useEffect)((function(){n&&n.length>0?function(){var e=[].concat(Object(Ke.a)(Ft),Object(Ke.a)(qt)),t=[].concat(Object(Ke.a)(zt),Object(Ke.a)(Lt)),r=[].concat(Object(Ke.a)(e),Object(Ke.a)(t)),a=p?n.filter((function(e){return r.includes(e.subtipo_actividad)&&"telef\xf3nica"===String(e.tipo_cita).toLowerCase()})):n.filter((function(e){return r.includes(e.subtipo_actividad)})),i=T(a.filter((function(t){return e.includes(t.subtipo_actividad)})),24),o=T(a.filter((function(e){return t.includes(e.subtipo_actividad)})),72);try{!function(e,t,n){var r=[],a=[];e.forEach((function(e){r.includes(e.bucket)||r.push(e.bucket)})),r.filter((function(e){return e})).forEach((function(e){var r=t.plazo.filter((function(t){return t&&t.bucket===e})),i=t.vencidas.filter((function(t){return t&&t.bucket===e})),o=n.plazo.filter((function(t){return t&&t.bucket===e})),c=n.vencidas.filter((function(t){return t&&t.bucket===e}));a.push.apply(a,Object(Ke.a)(E(String(e).substring(6),r,i,o,c)))})),v(a)}(a,i,o),function(e,t,n){var r=[],a=[];e.forEach((function(e){e.contrata&&!r.includes(e.contrata.nombre)&&r.push(e.contrata.nombre)})),r.filter((function(e){return e})).forEach((function(e){var r=t.plazo.filter((function(t){return t&&t.contrata&&t.contrata.nombre===e})),i=t.vencidas.filter((function(t){return t&&t.contrata&&t.contrata.nombre===e})),o=n.plazo.filter((function(t){return t&&t.contrata&&t.contrata.nombre===e})),c=n.vencidas.filter((function(t){return t&&t.contrata&&t.contrata.nombre===e}));a.push.apply(a,Object(Ke.a)(E(e,r,i,o,c)))})),S(a)}(a,i,o),function(e,t,n){var r=[],a=[];e.forEach((function(e){e.gestor&&!r.includes(e.gestor.nombre)&&r.push(e.gestor.nombre)})),r.filter((function(e){return e})).forEach((function(e){var r=t.plazo.filter((function(t){return t&&t.gestor&&t.gestor.nombre===e})),i=t.vencidas.filter((function(t){return t&&t.gestor&&t.gestor.nombre===e})),o=n.plazo.filter((function(t){return t&&t.gestor&&t.gestor.nombre===e})),c=n.vencidas.filter((function(t){return t&&t.gestor&&t.gestor.nombre===e}));a.push.apply(a,Object(Ke.a)(E(e,r,i,o,c)))})),k(a)}(a,i,o)}catch(c){console.log(c)}f(i),l(o)}():(l({plazo:[],vencidas:[],porcentaje:0}),f({plazo:[],vencidas:[],porcentaje:0}))}),[n,p]),Object(r.jsxs)("div",{style:{marginTop:".5rem"},children:[Object(r.jsxs)("h3",{children:["Indicadores TCFL - ",i]}),Object(r.jsx)(Mn.a,{checked:p,onChange:function(e){return O(e.target.checked)}})," Excluir Agendas",Object(r.jsxs)(z.a,{style:{margin:"1rem 0"},children:[Object(r.jsx)(zn,{hora:24,plazo:b.plazo.length,vencidas:b.vencidas.length,porcentaje:b.porcentaje}),Object(r.jsx)(zn,{hora:72,plazo:s.plazo.length,vencidas:s.vencidas.length,porcentaje:s.porcentaje})]}),Object(r.jsxs)(bn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)(Gn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(fn.a,{}),"Bucket"]}),children:Object(r.jsx)(Yn,{data:m,paddingLeft:120,height:350})},"1"),Object(r.jsx)(Gn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(jn.a,{}),"Contrata"]}),children:Object(r.jsx)(Yn,{data:y,paddingLeft:190,height:350})},"2"),Object(r.jsx)(Gn,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Y.a,{}),"Gestor"]}),children:Object(r.jsx)(Yn,{data:I,paddingLeft:120,height:750})},"3")]})]})},Un=Je.a.Option,Vn="Todo";var Kn=function(e){var t=e.ordenes,n=void 0===t?[]:t,i=e.hora,o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)(Vn),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)([]),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)([]),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(500),w=Object(ae.a)(_,2),y=w[0],S=w[1];function C(){return(C=Object(N.a)(D.a.mark((function e(){var t;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&n.length>0&&(t=["Todo"],n.forEach((function(e){e.contrata&&e.contrata.nombre&&!t.includes(e.contrata.nombre)&&t.push(e.contrata.nombre)})),l(t.filter((function(e){return e}))));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return I.apply(this,arguments)}function I(){return(I=Object(N.a)(D.a.mark((function e(){var t,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n&&n.length>0?(t=n.filter((function(e){return e.tipo===Xt})),r=n.filter((function(e){return e.tipo===Qt})),O(k(t)),v(k(r))):(O([]),v([]));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function k(e){var t=[],n=[],r=[{nombre:!1,tecnico:!1,cantidad:!1}];return e.forEach((function(e){(b===Vn||e.contrata.nombre===b)&&!t.includes("".concat(e.tecnico.nombre," ").concat(e.tecnico.apellidos))&&(t.push("".concat(e.tecnico.nombre," ").concat(e.tecnico.apellidos)),n.push(e.tecnico.apellidos))})),n=n.filter((function(e){return e})),t.filter((function(e){return e})).forEach((function(t){var n=e.filter((function(e){var n=b===Vn||e.contrata.nombre===b;return e.tecnico.nombre+" "+e.tecnico.apellidos===t&&n})),a=String(n[0].tecnico.nombre).substring(0,1)+". "+n[0].tecnico.apellidos,i=String(a).length>20?String(a).substring(0,20)+"...":String(a);r.push({nombre:i.replace(/ {3}/g," "),tecnico:String(t).replace(/ {3}/g," "),cantidad:n.length})})),r=r.filter((function(e){return e.nombre}))}return Object(a.useEffect)((function(){!function(){C.apply(this,arguments)}(),A()}),[n]),Object(a.useEffect)((function(){A()}),[b]),Object(a.useEffect)((function(){if(p.length>0||m.length>0){var e=p.length>m.length?p.length:m.length;S(e>35?19*e:23*e)}else S(400)}),[p,m]),Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{style:{marginTop:".5rem"},children:[Object(r.jsxs)("h3",{children:["Indicadores de Producci\xf3n - ",i]}),Object(r.jsxs)(z.a,{style:{marginTop:"1rem"},children:[Object(r.jsx)("span",{children:"Contrata: "}),Object(r.jsx)(Je.a,{size:"small",style:{width:"260px",marginLeft:".5rem"},value:b,onChange:function(e){return f(e)},children:s.length>0?s.map((function(e,t){return Object(r.jsx)(Un,{value:e,children:e},t)})):Object(r.jsx)(Un,{value:0,children:"-"})})]})]}),Object(r.jsxs)(z.a,{style:{margin:"1rem 0"},children:[Object(r.jsxs)(q.a,{sm:12,style:{textAlign:"center",margin:0,padding:0},children:[Object(r.jsx)("h4",{children:"Averias"}),Object(r.jsx)(dn,{data:p,field:"tecnico",height:y,paddinLeft:180})]}),Object(r.jsxs)(q.a,{sm:12,style:{textAlign:"center",margin:0,padding:0},children:[Object(r.jsx)("h4",{children:"Altas"}),Object(r.jsx)(dn,{data:m,field:"tecnico",height:y,paddinLeft:180})]})]})]})};var Zn=[{path:j,exact:!0,component:function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(""),c=Object(ae.a)(o,2),s=c[0],l=c[1];return Object(a.useEffect)((function(){return Et.emit("obtenerOrdenes"),Et.on("ordenesGraficos",(function(e){var t=e.averias,n=e.altas,r=e.hora,a=new Array(JSON.parse(t)),o=new Array(JSON.parse(n));r&&tt()(new Date(r)).isValid()&&l(tt()(new Date(r)).format("HH:mm")),a&&a[0]&&a[0].length>0&&o&&o[0]&&o[0].length>0&&i([].concat(Object(Ke.a)(a[0]),Object(Ke.a)(o[0])))})),Et.on("error",(function(e){console.log(e),V.a.error("Error conectando al servidor.",{position:"top-left"})})),function(){Et.off("ordenesGraficos")}}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Resumen General",subtitulo:"Dashboard"}),Object(r.jsx)(un,{ordenes:n,hora:s}),Object(r.jsx)(nt,{children:Object(r.jsx)(Nn,{ordenes:n,hora:s})}),Object(r.jsx)(nt,{children:Object(r.jsx)(Hn,{ordenes:n.filter((function(e){return e.estado_toa===Gt})),hora:s})}),Object(r.jsx)(nt,{children:Object(r.jsx)(Kn,{ordenes:n.filter((function(e){return e.estado_toa===Gt&&e.contrata&&e.contrata.nombre})),hora:s})})]})}}],Jn=n(612),Wn=n(652),Xn=n(653),Qn=n(654),$n=n(655),er=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"areas",method:"GET"},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tr=P.a.TextArea;var nr=function(e){var t=e.obj,n=void 0===t?{}:t,i=e.visible,o=e.abrir,c=(e.guardar,Object(a.useState)(null)),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=Object(a.useState)(null),b=Object(ae.a)(u,2),f=b[0],j=b[1];return Object(a.useEffect)((function(){n&&n.nombre?(d(n.nombre),j(n.descripcion)):(d(null),j(null))}),[n]),Object(r.jsxs)(Fn.a,{visible:i,onOk:o,onCancel:o,width:350,centered:!0,destroyOnClose:!0,children:[Object(r.jsx)("h3",{children:"Nombre"}),Object(r.jsx)(P.a,{value:l,size:"small",onChange:function(e){return d(e.target.value)},placeholder:"Nombre"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("h3",{children:"Descripci\xf3n"}),Object(r.jsx)(tr,{value:f,rows:4,onChange:function(e){return j(e.target.value)},placeholder:"Descripci\xf3n"})]})};function rr(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)(!1),u=Object(ae.a)(d,2),b=u[0],f=(u[1],Object(a.useState)(!1)),j=Object(ae.a)(f,2),h=j[0],p=j[1],O=Object(a.useState)({}),g=Object(ae.a)(O,2),x=g[0],m=g[1];function v(){return(v=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,er(!0).then((function(e){var t=e.data;t&&t.length>0&&i(t)})).catch((function(e){return console.log(e)})).finally((function(){return l(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){v.apply(this,arguments)}()}),[]);var _=function(){return p(!h)},w=function(e){m({}),_()},y=[{title:"Id",dataIndex:"_id",width:130},{title:"Nombre",dataIndex:"nombre",width:100},{title:"Descripci\xf3n",dataIndex:"descripcion"},{title:"Actualizar",dataIndex:"_id",align:"center",width:100,render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Wn.a,{onClick:function(){return function(e){m(e),_()}(t)},style:{fontSize:"1.2rem",cursor:"pointer",marginRight:".5rem"},twoToneColor:Mt.warning}),Object(r.jsx)(Jn.a,{placement:"topRight",title:"Esta acci\xf3n ser\xe1 permanente. \xbfDeseas continuar?",okText:"Yes",cancelText:"No",children:Object(r.jsx)(Xn.a,{style:{fontSize:"1.2rem",cursor:"pointer"},twoToneColor:Mt.error})})]})}}];return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{style:{marginTop:".5em"},children:"Configuracion de Areas"}),Object(r.jsx)(hn.a,{rowKey:"_id",title:function(){return Object(r.jsx)("div",{children:Object(r.jsx)(B.a,{icon:b?Object(r.jsx)(Qn.a,{sping:!0}):Object(r.jsx)($n.a,{}),onClick:w,size:"small",type:"primary",children:"Agregar"})})},dataSource:n,columns:y,loading:s,size:"small",pagination:!1,style:{marginBottom:"1rem"}}),Object(r.jsx)(nr,{obj:x,abrir:_,visible:h})]})}var ar=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"cargos",method:"GET"},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ir=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"cargos",method:"POST",data:t},!0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),or=function(){var e=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"cargos/"+t,method:"PUT",data:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cr=n(628);var sr=function(e){var t=e.obj,n=void 0===t?{}:t,i=e.visible,o=e.abrir,c=e.guardar,s=Object(a.useState)(null),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)(null),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)(null),O=Object(ae.a)(p,2),g=O[0],x=O[1];function m(){return(m=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(d,j,g);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){u(null),h(null),x(null)}),[]),Object(a.useEffect)((function(){n&&n.nombre&&(u(n._id),h(n.nombre),x(n.nivel))}),[n]),Object(r.jsxs)(Fn.a,{visible:i,onOk:function(){return m.apply(this,arguments)},onCancel:o,width:350,centered:!0,destroyOnClose:!0,children:[Object(r.jsx)("h3",{children:"Nombre"}),Object(r.jsx)(P.a,{value:j,size:"small",onChange:function(e){return h(e.target.value)},placeholder:"Nombre"}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("h3",{children:"Nivel"}),Object(r.jsx)(cr.a,{value:g,size:"small",onChange:function(e){return x(e)},placeholder:"Nivel"})]})};function lr(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)(!1),u=Object(ae.a)(d,2),b=u[0],f=(u[1],Object(a.useState)(!1)),j=Object(ae.a)(f,2),h=j[0],p=j[1],O=Object(a.useState)(!1),g=Object(ae.a)(O,2),x=g[0],m=g[1],v=Object(a.useState)({}),_=Object(ae.a)(v,2),w=_[0],y=_[1];function S(){return C.apply(this,arguments)}function C(){return(C=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,ar(!0).then((function(e){var t=e.data;t&&t.length>0&&i(t)})).catch((function(e){return console.log(e)})).finally((function(){return l(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(N.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ir({metodo:At.CARGO_CREAR,data:{nombre:n,nivel:r}}).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return T(),e.next=3,S();case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(N.a)(D.a.mark((function e(t,n,r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,or(t,{metodo:At.CARGO_ACTUALIZAR,data:{nombre:n,nivel:r}}).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return k(),e.next=3,S();case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){S()}),[]);var k=function(){return p(!h)},T=function(){return m(!x)},E=function(){T()},R=[{title:"Id",dataIndex:"_id",width:130},{title:"Nombre",dataIndex:"nombre",width:200},{title:"Nivel",dataIndex:"nivel"},{title:"Actualizar",dataIndex:"_id",align:"center",width:100,render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(Wn.a,{onClick:function(){return function(e){y(e),k()}(t)},style:{fontSize:"1.2rem",cursor:"pointer",marginRight:".5rem"},twoToneColor:Mt.warning}),Object(r.jsx)(Jn.a,{placement:"topRight",title:"Esta acci\xf3n ser\xe1 permanente. \xbfDeseas continuar?",okText:"Yes",cancelText:"No",children:Object(r.jsx)(Xn.a,{style:{fontSize:"1.2rem",cursor:"pointer"},twoToneColor:Mt.error})})]})}}];return Object(r.jsxs)("div",{children:[Object(r.jsx)("h3",{style:{marginTop:".5em"},children:"Configuracion de Cargos"}),Object(r.jsx)(hn.a,{rowKey:"_id",title:function(){return Object(r.jsx)("div",{children:Object(r.jsx)(B.a,{icon:b?Object(r.jsx)(Qn.a,{sping:!0}):Object(r.jsx)($n.a,{}),onClick:E,size:"small",type:"primary",children:"Agregar"})})},dataSource:n,columns:R,loading:s,size:"small",pagination:!1,style:{marginBottom:"1rem"}}),Object(r.jsx)(sr,{obj:w,abrir:k,visible:h,guardar:function(e,t,n){return I.apply(this,arguments)}}),Object(r.jsx)(sr,{abrir:T,visible:x,guardar:function(e,t,n){return A.apply(this,arguments)}})]})}var dr=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"tipoempleados",method:"GET"},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ur=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"vistas",method:"GET"},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),br=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"vistas",method:"POST",data:t},!0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var fr=[{path:h,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Areas",subtitulo:"Configuracion de Empleados"}),Object(r.jsx)(nt,{children:Object(r.jsx)(rr,{})})]})}},{path:p,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Cargos",subtitulo:"Configuracion de Empleados"}),Object(r.jsx)(nt,{children:Object(r.jsx)(lr,{})})]})}},{path:O,exact:!0,component:function(){return Object(r.jsx)("div",{children:"Tipo Empleados"})}},{path:g,exact:!0,component:function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)([]),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)([]),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)(null),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(null),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)([]),A=Object(ae.a)(C,2),I=A[0],k=A[1],T=Object(a.useState)([]),E=Object(ae.a)(T,2),R=E[0],M=E[1],L=Object(a.useState)([]),z=Object(ae.a)(L,2),q=z[0],F=z[1],Y=Object(a.useState)(!1),G=Object(ae.a)(Y,2),H=G[0],U=G[1],V=Object(a.useState)(!1),K=Object(ae.a)(V,2),Z=K[0],J=K[1];function W(){return(W=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return J(!0),e.next=3,ur(!1).then((function(e){var t=e.data;t&&t.length>0?(console.log(t),i(t)):i([])})).catch((function(e){return console.log(e)})).finally((function(){return J(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(!1).then((function(e){var t=e.data;t&&t.length>0?l(t):l([])}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Q(){return(Q=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(!1).then((function(e){var t=e.data;t&&t.length>0?f(t):f([])}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $(){return($=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(!1).then((function(e){var t=e.data;t&&t.length>0?O(t):O([])}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(){return(ee=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return U(!0),e.next=3,br({metodo:At.VISTA_CREAR,data:{titulo:m,ruta:y,cargos:R,tipos_empleado:q,areas:I}}).catch((function(e){return console.log(e)})).finally((function(){return U(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){W.apply(this,arguments)}(),function(){X.apply(this,arguments)}(),function(){Q.apply(this,arguments)}(),function(){$.apply(this,arguments)}()}),[]);var te=[{title:"#",width:60,render:function(e,t,n){return n+1}},{title:"ID",dataIndex:"_id",width:150},{title:"Titulo",dataIndex:"titulo",widt:150},{title:"Ruta",dataIndex:"ruta"},{title:"Areas",dataIndex:"areas",width:150,render:function(e){if(e&&e.length>0)return Object(r.jsx)("div",{children:e.map((function(e,t){return Object(r.jsx)(gn.a,{color:"blue",children:e.nombre},t)}))})}},{title:"Cargos",dataIndex:"cargos",render:function(e){if(e&&e.length>0)return Object(r.jsx)("div",{children:e.map((function(e,t){return Object(r.jsx)(gn.a,{color:"purple",children:e.nombre},t)}))})}},{title:"Tipos",dataIndex:"tipos_empleado",render:function(e){if(e&&e.length>0)return Object(r.jsx)("div",{children:e.map((function(e,t){return Object(r.jsx)(gn.a,{color:"orange",children:e.nombre},t)}))})}}];return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Configurar Vista",subtitulo:"Configuracion de Empleados"}),Object(r.jsxs)(nt,{children:[Object(r.jsx)("h4",{children:"Titulo Ruta"}),Object(r.jsx)(P.a,{style:{marginBottom:"1rem",width:250},placeholder:"Titulo de la ruta",size:"small",onChange:function(e){return v(e.target.value)},value:m}),Object(r.jsx)("h4",{children:"Direcci\xf3n Ruta"}),Object(r.jsx)(P.a,{style:{marginBottom:"1rem",width:250},placeholder:"Direcci\xf3n de la ruta",size:"small",onChange:function(e){return S(e.target.value)},value:y}),Object(r.jsx)("h4",{children:"Lista Areas"}),Object(r.jsx)(Mn.a.Group,{style:{marginBottom:"1rem"},options:s.length>0?s.map((function(e,t){return{key:t,label:e.nombre,value:e._id}})):[],value:I,onChange:function(e){return k(e)}}),Object(r.jsx)("h4",{children:"Lista Cargos"}),Object(r.jsx)(Mn.a.Group,{style:{marginBottom:"1rem"},options:b.length>0?b.map((function(e,t){return{key:t,label:e.nombre,value:e._id}})):[],value:R,onChange:function(e){return M(e)}}),Object(r.jsx)("h4",{children:"Lista Tipos"}),Object(r.jsx)(Mn.a.Group,{style:{marginBottom:"1rem"},options:p.length>0?p.map((function(e,t){return{key:t,label:e.nombre,value:e._id}})):[],value:q,onChange:function(e){return F(e)}}),Object(r.jsx)("br",{}),Object(r.jsx)(B.a,{style:{margin:"1rem 0"},icon:H?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)($n.a,{}),type:"primary",size:"small",onClick:function(){return ee.apply(this,arguments)},children:"Guardar"})]}),Object(r.jsx)(nt,{children:Object(r.jsx)(hn.a,{rowKey:"_id",dataSource:n,columns:te,loading:Z,size:"small",pagination:!1,scroll:{x:"70vw"}})})]})}},{path:x,exact:!0,component:function(){return Object(r.jsx)("div",{children:"Zonas"})}}],jr=Object(Ke.a)(fr),hr=n(656),pr=P.a.Search;var Or=n(657),gr=n(658),xr=0,mr=1,vr=2,_r=3,wr=4,yr=5,Sr=6,Cr=7,Ar={ACTIVO:"Activo",SUSPENDIDO:"Suspendido",INACTIVO:"Inactivo"};function Ir(e){var t=e.nivel,n=e.cargo;switch(t){case xr:return Object(r.jsx)(gn.a,{color:"geekblue",children:vn(n)});case mr:return Object(r.jsx)(gn.a,{color:"blue",children:vn(n)});case vr:return Object(r.jsx)(gn.a,{color:"cyan",children:vn(n)});case _r:return Object(r.jsx)(gn.a,{color:"purple",children:vn(n)});case wr:return Object(r.jsx)(gn.a,{color:"green",children:vn(n)});case yr:return Object(r.jsx)(gn.a,{color:"orange",children:vn(n)});case Sr:return Object(r.jsx)(gn.a,{color:"magenta",children:vn(n)});case Cr:return Object(r.jsx)(gn.a,{children:vn(n)});default:return Object(r.jsx)(gn.a,{children:"Sin cargo"})}}function kr(e){var t=e.estado;switch(t){case Ar.ACTIVO:return Object(r.jsx)(gn.a,{icon:Object(r.jsx)(Dt.a,{}),color:Mt.success,children:t});case Ar.SUSPENDIDO:return Object(r.jsx)(gn.a,{icon:Object(r.jsx)(Or.a,{}),color:Mt.warning,children:t});case Ar.INACTIVO:return Object(r.jsx)(gn.a,{icon:Object(r.jsx)(gr.a,{}),color:Mt.error,children:t});default:return Object(r.jsx)(gn.a,{children:"Desconocido"})}}var Tr=n(626),Er=Je.a.Option;var Rr=function(e){var t=e.accion,n=e.visible,i=e.abrir,o=e.empleado,s=void 0===o?{}:o,l=e.cargos,d=void 0===l?[]:l,u=e.tipos,b=void 0===u?[]:u,f=e.areas,j=void 0===f?[]:f,h=e.zonas,p=void 0===h?[]:h,O=e.contratas,g=void 0===O?[]:O,x=e.guardar,m=Object(a.useState)({carnet:null,numero_documento:null}),v=Object(ae.a)(m,2),_=v[0],w=v[1];function y(){return(y=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("editar"!==t||_._id){e.next=2;break}return e.abrupt("return",V.a.warn("No se encuentra el ID del Usuario",{position:"top-right"}));case 2:if(_.usuario||_.usuario.email){e.next=4;break}return e.abrupt("return",V.a.warn("Falta el Email",{position:"top-right"}));case 4:if(_.nombre){e.next=6;break}return e.abrupt("return",V.a.warn("Falta el nombre",{position:"top-right"}));case 6:if(_.cargo){e.next=8;break}return e.abrupt("return",V.a.warn("Falta el Cargo",{position:"top-right"}));case 8:if(_.area){e.next=10;break}return e.abrupt("return",V.a.warn("Falta el Area",{position:"top-right"}));case 10:if(_.tipo_empleado){e.next=12;break}return e.abrupt("return",V.a.warn("Falta el Tipo de Empleado",{position:"top-right"}));case 12:if(_.numero_documento){e.next=14;break}return e.abrupt("return",V.a.warn("Falta el N\xfamero de Documento",{position:"top-right"}));case 14:return e.next=16,x({id:_._id,metodo:"crear"===t?At.EMPLEADOS_CREAR:At.EMPLEADOS_ACTUALIZAR,email:_.usuario.email,empleado:_});case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){s._id&&w(Object(c.a)(Object(c.a)({},s),{},{cargo:s.cargo?s.cargo._id:null,tipo_empleado:s.tipo_empleado?s.tipo_empleado._id:null,area:s.area?s.area._id:null,zonas:s.zonas?s.zonas.map((function(e){return e._id})):null,contrata:s.contrata?s.contrata._id:null}))}),[s]),Object(r.jsx)(Fn.a,{width:"75vw",okButtonProps:{size:"small"},cancelButtonProps:{size:"small"},cancelText:"Cancelar",okText:"Guardar",title:"crear"===t?"Crear Empleado":"Editar Empleado",visible:n,onOk:function(){return y.apply(this,arguments)},onCancel:i,destroyOnClose:!0,centered:!0,children:Object(r.jsxs)(Tr.a,{bordered:!0,size:"small",column:4,children:[Object(r.jsx)(Tr.a.Item,{label:"Nombre:",span:2,children:Object(r.jsx)(P.a,{placeholder:"Nombre",size:"small",value:_&&_.nombre?_.nombre:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{nombre:e.target.value}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Apellidos:",span:2,children:Object(r.jsx)(P.a,{placeholder:"Nombre",size:"small",value:_&&_.apellidos?_.apellidos:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{apellidos:e.target.value}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Email:",span:2,children:Object(r.jsx)(P.a,{placeholder:"Email",size:"small",type:"email",value:_&&_.usuario&&_.usuario.email?_.usuario.email:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{usuario:{email:e.target.value}}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Carnet:",span:1,children:Object(r.jsx)(P.a,{placeholder:"Carnet",size:"small",value:_&&_.carnet?_.carnet:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{carnet:e.target.value}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Cargo:",span:1,children:Object(r.jsx)(Je.a,{size:"small",style:{width:"100%"},placeholder:"Seleccionar Cargo",disabled:"editar"===t,value:_&&_.cargo?_.cargo:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{cargo:e}))},children:d&&d.length>0?d.map((function(e,t){return Object(r.jsx)(Er,{value:e._id,children:e.nombre},t)})):null})}),Object(r.jsx)(Tr.a.Item,{label:"Tipo:",span:2,children:Object(r.jsx)(Je.a,{size:"small",style:{width:"100%"},placeholder:"Seleccionar Tipo",value:_&&_.tipo_empleado?_.tipo_empleado:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{tipo_empleado:e}))},children:b&&b.length>0?b.map((function(e,t){return Object(r.jsx)(Er,{value:e._id,children:e.nombre},t)})):null})}),Object(r.jsx)(Tr.a.Item,{label:"Area:",span:1,children:Object(r.jsx)(Je.a,{size:"small",style:{width:"100%"},placeholder:"Seleccionar Area",value:_&&_.area?_.area:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{area:e}))},children:j&&j.length>0?j.map((function(e,t){return Object(r.jsx)(Er,{value:e._id,children:e.nombre},t)})):null})}),Object(r.jsx)(Tr.a.Item,{label:"Contrata:",span:1,children:Object(r.jsx)(Je.a,{size:"small",placeholder:"Seleccionar Contrata",style:{width:"100%"},value:_&&_.contrata?_.contrata:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{contrata:e}))},children:g&&g.length>0?g.map((function(e,t){return Object(r.jsx)(Er,{value:e._id,children:e.nombre},t)})):null})}),Object(r.jsx)(Tr.a.Item,{label:"Zonas:",span:2,children:Object(r.jsx)(Je.a,{size:"small",mode:"multiple",placeholder:"Seleccionar Zonas",style:{width:"100%"},value:_&&_.zonas?_.zonas:[],onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{zonas:e}))},children:p&&p.length>0?p.map((function(e){return Object(r.jsx)(Er,{children:e.nombre},e._id)})):null})}),Object(r.jsx)(Tr.a.Item,{label:"Fecha de Ingreso:",span:1,children:Object(r.jsx)(Xe.a,{size:"small",placeholder:"Fecha de Ingreso",value:_&&_.fecha_ingreso?tt()(_.fecha_ingreso):null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{fecha_ingreso:e.toDate()}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Fecha de Nacimiento:",span:1,children:Object(r.jsx)(Xe.a,{size:"small",placeholder:"Fecha de Nacimiento",value:_&&_.fecha_nacimiento?tt()(_.fecha_nacimiento):null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{fecha_nacimiento:e?e.toDate():e}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Numero de Documento:",span:2,children:Object(r.jsx)(P.a,{placeholder:"Documento de Identidad",size:"small",value:_&&_.numero_documento?_.numero_documento:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{numero_documento:e.target.value}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Tipo de Documento:",span:1,children:Object(r.jsxs)(Je.a,{size:"small",style:{width:"100%"},placeholder:"Tipo Documento",value:_&&_.tipo_documento?_.tipo_documento:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{tipo_documento:e}))},children:[Object(r.jsx)(Er,{value:"DNI",children:"DNI"}),Object(r.jsx)(Er,{value:"OTRO",children:"OTRO"})]})}),Object(r.jsx)(Tr.a.Item,{label:"Nacionalidad:",span:1,children:Object(r.jsx)(P.a,{placeholder:"Nacionalidad",size:"small",value:_&&_.nacionalidad?_.nacionalidad:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{nacionalidad:e.target.value}))}})}),Object(r.jsx)(Tr.a.Item,{label:"Observacion:",span:4,children:Object(r.jsx)(P.a,{placeholder:"Observacion",size:"small",value:_&&_.observacion?_.observacion:null,onChange:function(e){return w(Object(c.a)(Object(c.a)({},_),{},{observacion:e.target.value}))}})})]})})},Dr=function(){var e=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"contratas",method:"GET",params:{metodo:n}},t));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nr=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.contrata,e.abrupt("return",J({url:"contratas",method:"POST",data:{metodo:n,contrata:r}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Mr=function(){var e=Object(N.a)(D.a.mark((function e(t,n){var r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.metodo,a=n.contrata,e.abrupt("return",J({url:"contratas/"+t,method:"PUT",data:{metodo:r,contrata:a}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Lr=function(){var e=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"contratas/"+t,method:"PATCH",data:n},!0));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zr=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"zonas",method:"GET"},t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qr=Pe.a.Text;var Fr=function(e){var t=e.visible,n=e.abrirModal,a=e.empleado,i=void 0===a?{}:a;return Object(r.jsx)(Fn.a,{width:450,cancelText:"Cancelar",okText:"Aceptar",title:"Detalle del Usuario",visible:t,onOk:n,onCancel:n,destroyOnClose:!0,centered:!0,children:Object(r.jsxs)(Tr.a,{layout:"vertical",bordered:!0,size:"small",column:2,children:[i&&i.gestor&&Object(r.jsx)(Tr.a.Item,{label:"Gestor:",children:i&&i.gestor.nombre&&i&&i.gestor.nombre}),Object(r.jsx)(Tr.a.Item,{label:"Tipo de Doc.:",children:i&&i.tipo_documento}),Object(r.jsx)(Tr.a.Item,{label:"Numero de Doc.:",children:Object(r.jsx)(qr,{copyable:!0,children:i&&i.numero_documento})}),Object(r.jsx)(Tr.a.Item,{label:"Fecha de Nacimiento:",children:i&&i.fecha_nacimiento&&tt()(i&&i.fecha_nacimiento).format("DD-MM-YYYY")}),i&&i.fecha_ingreso&&Object(r.jsx)(Tr.a.Item,{label:"Fecha de Ingreso",children:tt()(i&&i.fecha_ingreso).format("DD-MM-YYYY")}),i&&i.fecha_baja&&Object(r.jsx)(Tr.a.Item,{label:"Fecha de Baja",children:tt()(i&&i.fecha_baja).format("DD-MM-YYYY")}),Object(r.jsx)(Tr.a.Item,{label:"Nacionalidad",children:i&&i.nacionalidad?i&&i.nacionalidad:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Observaci\xf3n",span:2,children:i&&i.observacion})]})})};function Pr(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(0===e.length)return[];var r=[],a=!1;try{return e.forEach((function(e){void 0!==e[t]&&null!==e[t]&&e[t]._id&&null!==e[t]._id?-1===r.findIndex((function(n){return n.value===e[t]._id}))&&r.push({text:n?e[t].nombre+" "+e[t].apellidos:e[t].nombre,value:e[t]._id}):a=!0})),a?[].concat(r,[{text:"-",value:"-"}]):r}catch(i){return console.log(i),[]}}function Br(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(0===e.length)return[];var n=[];try{return e.forEach((function(e){void 0!==e[t]&&null!==e[t]&&(-1===n.findIndex((function(n){return n.value===e[t]}))&&n.push({text:e[t],value:e[t]}))})),n}catch(r){return console.log(r),[]}}var Yr=n(660),Gr=n(659);var Hr=function(e){var t=e.visible,n=e.setVisible,i=(e.listarEmpleados,e.id),o=Object(a.useState)(4),c=Object(ae.a)(o,2),s=c[0],l=c[1];function d(){return(d=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot(!0,{id:i,metodo:At.EMPLEADOS_ACTUALIZAR_PERMISOS,cargo:s}).then((function(){return n(!t)})).catch((function(e){n(!1),console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)(Fn.a,{title:"Actualizar Cargo",visible:t,width:300,onOk:function(){return d.apply(this,arguments)},onCancel:function(){return n(!1)},centered:!0,children:[Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:"*Recuerda que no es posible otorgar un cargo superior al tuyo y que todo cambio quedar\xe1 registrado en el sistema."}),Object(r.jsx)("p",{children:"Seleccionar Cargo:"}),Object(r.jsx)(Je.a,{defaultValue:s,onChange:function(e){return l(e)},style:{width:180}})]})},Ur=Je.a.Option;var Vr=function(e){var t=e.visible,n=e.setVisible,i=e.listarEmpleados,o=e.id,c=Object(a.useState)(1),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=Object(a.useState)(""),b=Object(ae.a)(u,2),f=b[0],j=b[1];function h(){return(h=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot(!0,{id:o,metodo:At.EMPLEADOS_EDITAR_ESTADO_EMPRESA,fecha_baja:f,estado_empresa:l}).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(!1),e.next=3,i();case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)(Fn.a,{title:"Estado Empresa",visible:t,width:300,onOk:function(){return h.apply(this,arguments)},onCancel:function(){return n(!1)},centered:!0,children:[Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:'*Un usuario "Activo" tiene la cuenta habilitada y aparece en las listas del personal (ordenes, inventario, etc.)'}),Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:'*Un usuario "Suspendido" no podr\xe1 iniciar sesi\xf3n en el sistema, pero seguir\xe1 apareciendo en las listas del personal (ordenes, inventario, etc.)'}),Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:'*Un usuario "Inactivo" no podr\xe1 iniciar sesi\xf3n en el sistema y desaparecer\xe1 por completo de las listas del sistema (usuario de baja)'}),Object(r.jsxs)(We.b,{direction:"vertical",children:["Seleccionar:",Object(r.jsxs)(Je.a,{defaultValue:l,onChange:function(e){return d(e)},style:{width:150},children:[Object(r.jsx)(Ur,{value:1,children:"Activo"}),Object(r.jsx)(Ur,{value:2,children:"Suspendido"}),Object(r.jsx)(Ur,{value:3,children:"Inactivo"})]}),"Fecha de suspensi\xf3n / baja:",Object(r.jsx)(Xe.a,{onChange:function(e,t){return j(t)}})]})]})};var Kr=function(e){var t=e.visible,n=e.abrir,i=e.id,o=e.listarEmpleados,c=Object(a.useState)(!1),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(ae.a)(u,2),f=b[0],j=b[1];function h(e){return p.apply(this,arguments)}function p(){return(p=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot(!0,{id:i,metodo:t}).then((function(){o(),n()})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o();case 2:n();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(Fn.a,{title:"Configuraciones",visible:t,width:250,onOk:O,onCancel:n,centered:!0,children:[Object(r.jsx)(B.a,{block:!0,icon:Object(r.jsx)(G.a,{}),style:{marginBottom:".5rem"},onClick:function(){return h(At.EMPLEADOS_RESET_PASS)},children:"Reiniciar Contrase\xf1a"}),Object(r.jsx)(B.a,{block:!0,icon:Object(r.jsx)(gr.a,{}),style:{marginBottom:".5rem"},onClick:function(){return h(At.EMPLEADOS_CERRAR_SESION)},children:"Cerrar Sessi\xf3n"}),Object(r.jsx)(B.a,{block:!0,icon:Object(r.jsx)(Gr.a,{}),style:{marginBottom:".5rem"},onClick:function(){return d(!l)},children:"Permisos"}),Object(r.jsx)(B.a,{block:!0,icon:Object(r.jsx)(Y.a,{}),style:{marginBottom:".5rem"},onClick:function(){return h(At.EMPLEADOS_ACTIVAR_CUENTA)},children:"Activar Cuenta"}),Object(r.jsx)(B.a,{block:!0,danger:!0,icon:Object(r.jsx)(Or.a,{}),style:{marginBottom:".5rem"},onClick:function(){return j(!f)},children:"Cambiar Estado"}),Object(r.jsx)(Hr,{visible:l,setVisible:d,listarEmpleados:o,id:i}),Object(r.jsx)(Vr,{visible:f,setVisible:j,listarEmpleados:o,id:i})]})},Zr=Pe.a.Text;function Jr(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)({}),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)(null),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)(!1),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(!1),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)(!1),A=Object(ae.a)(C,2),I=A[0],k=A[1],T=Object(a.useState)(!1),E=Object(ae.a)(T,2),R=E[0],M=E[1],L=Object(a.useState)([]),z=Object(ae.a)(L,2),q=z[0],F=z[1],P=Object(a.useState)([]),Y=Object(ae.a)(P,2),G=Y[0],H=Y[1],U=Object(a.useState)([]),V=Object(ae.a)(U,2),K=V[0],Z=V[1],J=Object(a.useState)([]),W=Object(ae.a)(J,2),X=W[0],Q=W[1],$=Object(a.useState)([]),ee=Object(ae.a)($,2),te=ee[0],ne=ee[1],re=Object(a.useState)(!1),ie=Object(ae.a)(re,2),oe=ie[0],ce=ie[1],se=Object(a.useState)([]),le=Object(ae.a)(se,2),de=le[0],ue=le[1],be=Object(a.useState)([]),fe=Object(ae.a)(be,2),je=fe[0],he=fe[1],pe=Object(a.useState)([]),Oe=Object(ae.a)(pe,2),ge=Oe[0],xe=Oe[1],me=Object(a.useState)([]),ve=Object(ae.a)(me,2),_e=ve[0],we=ve[1];function ye(){return Se.apply(this,arguments)}function Se(){return(Se=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ce(!0),e.next=3,it(!0,{metodo:At.EMPLEADOS_LISTAR_TODO}).then((function(e){var t=e.data;t&&t.length>0?(i(t),l(t),ue(Pr(t,"cargo",!1)),he(Pr(t,"tipo_empleado",!1)),xe(Pr(t,"area",!1)),we(Pr(t,"contrata",!1))):l([])})).catch((function(e){return console.log(e)})).finally((function(){return ce(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(){return(Ce=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(!1,At.CONTRATA_LISTAR_NOMBRES).then((function(e){var t=e.data;return F(t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(){return(Ae=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,er(!1).then((function(e){var t=e.data;return H(t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ie(){return(Ie=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ar(!1).then((function(e){var t=e.data;return Z(t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ke(){return(ke=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dr(!1).then((function(e){var t=e.data;return Q(t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(){return(Te=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr(!1).then((function(e){var t=e.data;return ne(t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return(Ee=Object(N.a)(D.a.mark((function e(t){var n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.id,n=t.metodo,r=t.email,a=t.empleado,e.next=3,ct({metodo:n,email:r,empleado:a}).then((function(){return De()})).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(){return(Re=Object(N.a)(D.a.mark((function e(t){var n,r,a,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.id,r=t.metodo,a=t.email,i=t.empleado,e.next=3,st(n,{metodo:r,email:a,empleado:i}).then((function(){return Ne()})).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){ye(),function(){Ce.apply(this,arguments)}(),function(){Ae.apply(this,arguments)}(),function(){Ie.apply(this,arguments)}(),function(){ke.apply(this,arguments)}(),function(){Te.apply(this,arguments)}()}),[]);var De=function(){return v(!m)},Ne=function(){return S(!y)},Me=function(){return M(!R)},Le=function(){return k(!I)},ze=[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Nombre",dataIndex:"nombre",width:150},{title:"Apellidos",dataIndex:"apellidos",width:150,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Email",dataIndex:"usuario",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e&&e.email,children:e&&e.email})}},{title:"Cargo",dataIndex:"cargo",width:150,filters:de,onFilter:function(e,t){return"-"===e?!t.cargo:void 0!==t.cargo&&0===t.cargo._id.indexOf(e)},render:function(e){return Object(r.jsx)(Ir,{nivel:e.nivel,cargo:e.nombre})}},{title:"Area",dataIndex:"area",width:150,align:"center",filters:ge,onFilter:function(e,t){return"-"===e?!t.area:void 0!==t.area&&0===t.area._id.indexOf(e)},render:function(e){return Object(r.jsx)(gn.a,{color:"#2db7f5",children:e.nombre})}},{title:"Tipo",dataIndex:"tipo_empleado",width:150,align:"center",filters:je,onFilter:function(e,t){return"-"===e?!t.tipo_empleado:void 0!==t.tipo_empleado&&0===t.tipo_empleado._id.indexOf(e)},render:function(e){return Object(r.jsx)(gn.a,{color:"#A442FE",children:e.nombre})}},{title:"Zonas",dataIndex:"zonas",width:150,render:function(e){return e&&e.length>0?Object(r.jsx)("div",{children:e.map((function(e,t){return Object(r.jsx)(gn.a,{children:e.nombre},t)}))}):"-"}},{title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filters:_e,onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e&&e.nombre,children:e&&e.nombre})}},{title:"Carnet",dataIndex:"carnet",width:150,render:function(e){return e?Object(r.jsx)(Zr,{copyable:!0,children:e}):"-"}},{title:"Estado",dataIndex:"estado_empresa",width:150,render:function(e){return Object(r.jsx)(kr,{estado:e})}},{title:"Acciones",dataIndex:"_id",align:"center",fixed:"right",width:100,render:function(e,t){return Object(r.jsxs)("span",{children:[Object(r.jsx)(Wn.a,{title:"Editar",twoToneColor:Mt.warning,style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){return f(t),void Ne()}}),Object(r.jsx)(Yr.a,{title:"Configuraciones",style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){return function(e){O(e),Le()}(e)}})]})}}];return Object(r.jsxs)(nt,{children:[Object(r.jsx)(hn.a,{rowKey:"_id",onRow:function(e){return{onDoubleClick:function(){Me()}}},className:"tabla-personal",title:function(){return function(e,t,n){var i=Object(a.useState)("nombre"),o=Object(ae.a)(i,2),c=o[0],s=o[1];function l(){return(l=Object(N.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!r||!r.target.value){e.next=4;break}n(t.filter((function(e){return 0===String(e[c]).toUpperCase().indexOf(String(r.target.value).toUpperCase())}))),e.next=6;break;case 4:return e.next=6,n(t);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{className:"header-tabla",children:[Object(r.jsxs)("div",{className:"busqueda",children:[Object(r.jsxs)(Qe.a.Group,{onChange:function(e){return s(e.target.value)},value:c,style:{paddingTop:".22rem"},children:[Object(r.jsx)(Qe.a,{value:"nombre",children:"Nombre"}),Object(r.jsx)(Qe.a,{value:"numero_documento",children:"Documento"}),Object(r.jsx)(Qe.a,{value:"carnet",children:"Carnet"})]}),Object(r.jsx)(pr,{placeholder:"Buscar personal",allowClear:!0,enterButton:!1,size:"small",onChange:function(e){return l.apply(this,arguments)},style:{width:200,margin:0}})]}),Object(r.jsx)(B.a,{size:"small",type:"primary",icon:Object(r.jsx)(hr.a,{}),onClick:e,children:"Agregar"})]})}(De,n,l)},columns:ze,dataSource:s,loading:oe,size:"small",scroll:{x:"1250px",y:"65vh"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]}}),Object(r.jsx)(Rr,{accion:"crear",cargos:K,tipos:X,areas:G,zonas:te,contratas:q,visible:m,abrir:De,guardar:function(e){return Ee.apply(this,arguments)}}),Object(r.jsx)(Rr,{accion:"editar",cargos:K,tipos:X,areas:G,zonas:te,contratas:q,visible:y,abrir:Ne,empleado:b,guardar:function(e){return Re.apply(this,arguments)}}),Object(r.jsx)(Fr,{visible:R,abrirModal:Me,empleado:p}),Object(r.jsx)(Kr,{visible:I,abrir:Le,listarEmpleados:ye,id:p})]})}var Wr=Je.a.Option;var Xr=function(e){var t=e.visible,n=e.setVisible,i=e.accion,o=e.guardar,c=e.dataZonas,s=void 0===c?[]:c,l=e.contrata,d=void 0===l?{}:l,u=Object(a.useState)(null),b=Object(ae.a)(u,2),f=b[0],j=b[1],h=Object(a.useState)([]),p=Object(ae.a)(h,2),O=p[0],g=p[1],x=Object(a.useState)(null),m=Object(ae.a)(x,2),v=m[0],_=m[1],w=Object(a.useState)(null),y=Object(ae.a)(w,2),S=y[0],C=y[1],A=Object(a.useState)(null),I=Object(ae.a)(A,2),k=I[0],T=I[1];Object(a.useEffect)((function(){d.nombre&&(j(d.nombre),g(d.zonas),_(d.ruc),C(d.fecha_incorporacion),T(d.observacion))}),[d]);var E=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:j(null),g([]),_(null),C(null),T(null),n(!1);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),R=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,o({nombre:f,zonas:O,ruc:v,fecha_incorporacion:S&&S,observacion:k&&k},d.id);case 2:E();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(Fn.a,{width:270,cancelText:"Cancelar",okText:"Guardar",title:"crear"===i?"Crear Contrata":"Editar Contrata",visible:t,onOk:R,onCancel:E,destroyOnClose:!0,centered:!0,children:[Object(r.jsx)("p",{children:"Nombre de Contrata:"}),Object(r.jsx)(P.a,{size:"small",placeholder:"Nombre de Contrata",defaultValue:f,onChange:function(e){return j(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Zonas:"}),Object(r.jsx)(Je.a,{size:"small",mode:"multiple",placeholder:"Seleccionar Zonas",style:{width:"100%"},value:O,onChange:function(e){return g(e)},children:s&&s.length>0?s.map((function(e){return Object(r.jsx)(Wr,{children:e.nombre},e._id)})):null}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"RUC:"}),Object(r.jsx)(P.a,{size:"small",placeholder:"RUC",defaultValue:v,onChange:function(e){return _(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Fecha de Incorporaci\xf3n:"}),Object(r.jsx)(Xe.a,{size:"small",defaultValue:S&&tt.a.utc(S),onChange:function(e,t){return C(t)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Observacion:"}),Object(r.jsx)(P.a,{size:"small",placeholder:"Observacion",defaultValue:k,onChange:function(e){return T(e.target.value)}}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{})]})};var Qr=function(e){var t=e.visible,n=e.setVisible,i=e.guardar,o=e.contrata,c=void 0===o?{}:o,s=Object(a.useState)(!0),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)(null),f=Object(ae.a)(b,2),j=f[0],h=f[1];function p(){return(p=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c._id){e.next=6;break}return e.next=3,i(c._id,{activo:d,fecha_baja:j});case 3:O(),e.next=7;break;case 6:console.log("objeto contrata vacio.");case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var O=function(){u(!0),h(null),n(!1)};return Object(r.jsx)(Fn.a,{width:250,cancelText:"Cancelar",okText:"Guardar",title:"Desactivar Contrata",visible:t,onOk:function(){return p.apply(this,arguments)},onCancel:O,destroyOnClose:!0,centered:!0,children:Object(r.jsxs)(We.b,{direction:"vertical",children:[Object(r.jsx)("p",{style:{fontSize:"13px",color:"rgba(0,0,0,.55)"},children:"*La contrata no se eliminar\xe1 de la base de datos, pero si dejar\xe1 de aparecer en las listas del sistema."}),"Seleccionar estado:",Object(r.jsxs)(Qe.a.Group,{onChange:function(e){return u(e.target.value)},value:d,children:[Object(r.jsx)(Qe.a,{value:!0,children:"Activo"}),Object(r.jsx)(Qe.a,{value:!1,children:"Inactivo"})]}),"Seleccionar fecha de baja:",Object(r.jsx)(Xe.a,{onChange:function(e,t){return h(t)}})]})})};function $r(){var e=Object(a.useState)(!1),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)([]),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)(!1),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)(!1),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(!1),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)({}),A=Object(ae.a)(C,2),I=A[0],k=A[1];function T(){return E.apply(this,arguments)}function E(){return(E=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(!0),e.next=3,Dr(!0,At.CONTRATA_LISTAR_TODO).then((function(e){var t=e.data;return l(t&&t)})).catch((function(e){return console.log(e)})).finally((function(){return i(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zr().then((function(e){var t=e.data;return f(t&&t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function M(){return(M=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Nr({metodo:At.CONTRATA_CREAR,contrata:t}).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),q()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function L(){return(L=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!I._id){e.next=3;break}return e.next=3,Mr(I._id,{metodo:At.CONTRATA_EDITAR,contrata:t}).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),F()}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function z(){return(z=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Lr(t,n).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,T();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){console.log(e),P()}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){T(),function(){R.apply(this,arguments)}()}),[]);var q=function(){return O(!p)},F=function(){return v(!m)},P=function(){return S(!y)},Y=[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Nombre",dataIndex:"nombre",width:250},{title:"Estado",dataIndex:"activo",width:150,render:function(e){return e?Object(r.jsx)(gn.a,{color:"success",children:"Activo"}):Object(r.jsx)(gn.a,{color:"error",children:"Inactivo"})}},{title:"Zonas",dataIndex:"zonas",width:150,render:function(e){return e&&e.length>0?Object(r.jsx)("div",{children:e.map((function(e,t){return Object(r.jsx)(gn.a,{children:e.nombre},t)}))}):"-"}},{title:"Fecha Inicio",dataIndex:"fecha_incorporacion",width:150,render:function(e){return e?tt()(e).format("DD-MM-YYYY"):"-"}},{title:"Fecha Baja",dataIndex:"fecha_baja",width:150,render:function(e){return e?tt()(e).format("DD-MM-YYYY"):"-"}},{title:"Observaci\xf3n",dataIndex:"observacion"},{title:"Acciones",dataIndex:"_id",align:"center",width:100,fixed:"right",render:function(e,t){return Object(r.jsxs)("span",{children:[Object(r.jsx)(Wn.a,{title:"Editar",twoToneColor:Mt.warning,style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){F(),k(t)}}),Object(r.jsx)(Xn.a,{title:"Configuraciones",twoToneColor:Mt.error,style:{paddingRight:"8px",fontSize:"1.5rem"},onClick:function(){P(),k(t)}})]})}}];return Object(r.jsxs)(nt,{children:[Object(r.jsx)(hn.a,{rowKey:"_id",style:{marginBottom:"1rem"},title:function(){return Object(r.jsx)(B.a,{icon:Object(r.jsx)(hr.a,{}),onClick:q,children:"Agregar"})},columns:Y,dataSource:s,loading:n,size:"small",scroll:{y:"65vh"},pagination:!1}),Object(r.jsx)(Xr,{visible:p,setVisible:O,guardar:function(e){return M.apply(this,arguments)},dataZonas:b,accion:"crear"}),Object(r.jsx)(Xr,{visible:m,setVisible:v,guardar:function(e){return L.apply(this,arguments)},dataZonas:b,contrata:I,accion:"editar"}),Object(r.jsx)(Qr,{visible:y,setVisible:S,guardar:function(e,t){return z.apply(this,arguments)},contrata:I})]})}var ea=[{path:m,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Lista de Personal",subtitulo:"Usuarios y Personal"}),Object(r.jsx)(Jr,{})]})}},{path:v,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Lista de Contratas",subtitulo:"Usuarios y Personal"}),Object(r.jsx)($r,{})]})}}],ta=n(661),na=n(309),ra=Je.a.Option,aa=P.a.Search,ia=Pe.a.Text,oa={contrata:"Contrata",carnet:"Carnet",tecnico:"Tecnico",gestor:"Gestor",auditor:"auditor",supervisor:"supervisor",tipo_negocio:"Negocio",sub_tipo_negocio:"Sub Negocio"};var ca=function(e){var t=e.gestores,n=void 0===t?[]:t,i=e.loadingGestores,o=e.auditores,s=void 0===o?[]:o,l=e.loadingAuditores,d=e.supervisores,u=void 0===d?[]:d,b=e.loadingSupervisores,f=Object(a.useState)([]),j=Object(ae.a)(f,2),h=j[0],p=j[1],O=Object(a.useState)([]),g=Object(ae.a)(O,2),x=g[0],m=g[1],v=Object(a.useState)(!1),_=Object(ae.a)(v,2),w=_[0],y=_[1],S=Object(a.useState)({gestor:!1,supervisor:!1,auditor:!1,negocio:!1,subNegocio:!1}),C=Object(ae.a)(S,2),A=C[0],I=C[1],k=Object(a.useState)([]),T=Object(ae.a)(k,2),E=T[0],R=T[1],M=Object(a.useState)({gestor:null,supervisor:null,auditor:null,negocio:null,subNegocio:null}),L=Object(ae.a)(M,2),F=L[0],P=L[1],Y=Object(a.useState)([]),G=Object(ae.a)(Y,2),H=G[0],U=G[1],K=Object(a.useState)([]),Z=Object(ae.a)(K,2),J=Z[0],W=Z[1],X=Object(a.useState)([]),Q=Object(ae.a)(X,2),$=Q[0],ee=Q[1],te=Object(a.useState)([]),ne=Object(ae.a)(te,2),re=ne[0],ie=ne[1],oe=Object(a.useState)("nombre"),ce=Object(ae.a)(oe,2),se=ce[0],le=ce[1],de=Object(a.useState)(null),ue=Object(ae.a)(de,2),be=ue[0],fe=ue[1],je=Object(na.useJsonToCsv)().saveAsCsv;function he(){return pe.apply(this,arguments)}function pe(){return(pe=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,it(!0,{metodo:At.EMPLEADOS_LISTAR_TECNICOS}).then(function(){var e=Object(N.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:(n=t.data)?(m(n),p(n)):(m([]),p([]));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)})).finally((function(){return y(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(N.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(E.length<1)){e.next=2;break}return e.abrupt("return",V.a.warn("No hay tecnicos seleccionados",{position:"top-right"}));case 2:if(n={metodo:At.EMPLEADOS_ACTUALIZAR_RUTA},Object(Ze.a)(n,t,F[t]),Object(Ze.a)(n,"tecnicos",E),r=n,"gestor"!==t||F[t]){e.next=5;break}return e.abrupt("return",V.a.warn("Debes seleccionar un ".concat(t),{position:"top-right"}));case 5:if("auditor"!==t||F[t]){e.next=7;break}return e.abrupt("return",V.a.warn("Debes seleccionar un ".concat(t),{position:"top-right"}));case 7:if("supervisor"!==t||F[t]){e.next=9;break}return e.abrupt("return",V.a.warn("Debes seleccionar un ".concat(t),{position:"top-right"}));case 9:if("negocio"!==t||F[t]){e.next=11;break}return e.abrupt("return",V.a.warn("Debes seleccionar un ".concat(t),{position:"top-right"}));case 11:if("subNegocio"!==t||F[t]){e.next=13;break}return e.abrupt("return",V.a.warn("Debes seleccionar un ".concat(t),{position:"top-right"}));case 13:return I(Object(c.a)(Object(c.a)({},A),{},Object(Ze.a)({},t,!0))),e.next=16,ot(!0,r).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,he();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return I(Object(c.a)(Object(c.a)({},A),{},Object(Ze.a)({},t,!1)))}));case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){he()}),[]),Object(a.useEffect)((function(){x&&x.length>0&&ve(x)}),[x]);var xe=function(){if(x&&x.length>0)return je({data:x.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{tecnico:e.nombre&&e.apellidos?e.nombre+" "+e.apellidos:"-",gestor:e.gestor?e.gestor.nombre+" "+e.gestor.apellidos:"-",auditor:e.auditor&&e.auditor.nombre?e.auditor.nombre+" "+e.auditor.apellidos:"-",contrata:e.contrata?e.contrata.nombre:"-"})})),fields:oa,filename:"data_personal_".concat(tt()().format("DD_MM_YY_HH_mm"))})},me=function(e){var t=e.target.value;String(t).length>0&&se&&h.length>0?m(h.filter((function(e){return 0===String(e[se]).toLowerCase().indexOf(String(t).toLowerCase())}))):m(h)},ve=function(e){U(Pr(e,"contrata")),W(Pr(e,"gestor",!0)),ee(Pr(e,"auditor",!0)),ie(Pr(e,"supervisor",!0))},_e=[{title:"#",width:50,align:"center",render:function(e,t,n){return n+1}},{title:"Nombre",width:150,ellipsis:{title:!0},dataIndex:"nombre",render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Apellidos",width:150,ellipsis:{title:!0},dataIndex:"apellidos",render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Carnet",width:100,dataIndex:"carnet",render:function(e){return Object(r.jsx)(ia,{copyable:!0,children:e})}},{title:"Contrata",width:160,ellipsis:{title:!0},dataIndex:"contrata",filteredValue:be&&be.contrata?be.contrata:null,filters:H,onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e.nombre?e.nombre:"-",children:e?e.nombre:"-"})}},{title:"Gestor",width:150,ellipsis:{title:!0},dataIndex:"gestor",filteredValue:be&&be.gestor?be.gestor:null,filters:J,onFilter:function(e,t){return"-"===e?!t.gestor:void 0!==t.gestor&&null!==t.gestor&&0===t.gestor._id.indexOf(e)},render:function(e){if(e&&e.nombre&&e.apellidos){var t=e.nombre+" "+e.apellidos;return Object(r.jsx)(ln.a,{placement:"topLeft",title:t,children:t})}return"-"}},{title:"Auditor",width:150,ellipsis:{title:!0},dataIndex:"auditor",filteredValue:be&&be.auditor?be.auditor:null,filters:$,onFilter:function(e,t){return"-"===e?!t.auditor:void 0!==t.auditor&&0===t.auditor._id.indexOf(e)},render:function(e){if(e&&e.nombre&&e.apellidos){var t=e.nombre+" "+e.apellidos;return Object(r.jsx)(ln.a,{placement:"topLeft",title:t,children:t})}return"-"}},{title:"Supervisor",width:150,ellipsis:{title:!0},dataIndex:"supervisor",filteredValue:be&&be.supervisor?be.supervisor:null,filters:re,onFilter:function(e,t){return"-"===e?!t.supervisor:void 0!==t.supervisor&&0===t.supervisor._id.indexOf(e)},render:function(e){if(e&&e.nombre&&e.apellidos){var t=e.nombre+" "+e.apellidos;return Object(r.jsx)(ln.a,{placement:"topLeft",title:t,children:t})}return"-"}},{title:"Negocio",width:100,align:"center",dataIndex:"tipo_negocio",filteredValue:be&&be.tipo_negocio?be.tipo_negocio:null,filters:rn,onFilter:function(e,t){return"-"===e?!t.tipo_negocio:void 0!==t.tipo_negocio&&0===t.tipo_negocio.indexOf(e)},render:function(e){return String(e).toUpperCase()}},{title:"Sub Negocio",width:130,align:"center",dataIndex:"sub_tipo_negocio",filteredValue:be&&be.sub_tipo_negocio?be.sub_tipo_negocio:null,filters:an,onFilter:function(e,t){return"-"===e?!t.sub_tipo_negocio:void 0!==t.sub_tipo_negocio&&0===t.sub_tipo_negocio.indexOf(e)},render:function(e){return String(e).toUpperCase()}}];return Object(r.jsxs)("div",{children:[Object(r.jsxs)(z.a,{style:{marginBottom:".5rem",marginTop:".5rem"},children:[Object(r.jsxs)(q.a,{sm:12,children:[Object(r.jsx)("p",{children:"Asignar Gestor:"}),Object(r.jsx)(Je.a,{showSearch:!0,placeholder:"Buscar por nombre",size:"small",loading:i,defaultValue:F.gestor,onChange:function(e){return P(Object(c.a)(Object(c.a)({},F),{},{gestor:e}))},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:n.length>0?n.map((function(e,t){return Object(r.jsx)(ra,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},t)})):Object(r.jsx)(ra,{children:"Sin data"})}),Object(r.jsx)(B.a,{size:"small",type:"primary",style:{marginBottom:".5rem"},disabled:A.gestor,icon:A.gestor?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Dt.a,{}),onClick:function(){return Oe("gestor")},children:"Asignar"}),Object(r.jsx)("p",{children:"Asignar Auditor:"}),Object(r.jsx)(Je.a,{showSearch:!0,size:"small",placeholder:"Buscar por nombre",loading:l,defaultValue:F.auditor,onChange:function(e){return P(Object(c.a)(Object(c.a)({},F),{},{auditor:e}))},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:s.length>0?s.map((function(e,t){return Object(r.jsx)(ra,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},t)})):Object(r.jsx)(ra,{children:"Sin data"})}),Object(r.jsx)(B.a,{size:"small",type:"primary",disabled:A.auditor,style:{marginBottom:".5rem"},icon:A.auditor?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Dt.a,{}),onClick:function(){return Oe("auditor")},children:"Asignar"}),Object(r.jsx)("p",{children:"Asignar Supervisor:"}),Object(r.jsx)(Je.a,{showSearch:!0,size:"small",placeholder:"Buscar por nombre",loading:b,defaultValue:F.supervisor,onChange:function(e){return P(Object(c.a)(Object(c.a)({},F),{},{supervisor:e}))},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:u.length>0?u.map((function(e,t){return Object(r.jsx)(ra,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},t)})):Object(r.jsx)(ra,{children:"Sin data"})}),Object(r.jsx)(B.a,{size:"small",type:"primary",style:{marginBottom:".5rem"},disabled:A.supervisor,icon:A.supervisor?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Dt.a,{}),onClick:function(){return Oe("supervisor")},children:"Asignar"})]}),Object(r.jsxs)(q.a,{sm:12,children:[Object(r.jsx)("p",{children:"Asignar Tipo de Negocio:"}),Object(r.jsx)(Je.a,{size:"small",placeholder:"Buscar Tipo de Negocio",defaultValue:F.negocio,onChange:function(e){return P(Object(c.a)(Object(c.a)({},F),{},{negocio:e}))},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},children:rn.map((function(e){return Object(r.jsx)(ra,{value:e.value,children:e.text},e.value)}))}),Object(r.jsx)(B.a,{size:"small",type:"primary",style:{marginBottom:".5rem"},disabled:A.negocio,icon:A.negocio?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Dt.a,{}),onClick:function(){return Oe("negocio")},children:"Asignar"}),Object(r.jsx)("p",{children:"Asignar Subtipo de Negocio:"}),Object(r.jsx)(Je.a,{size:"small",placeholder:"Buscar Subtipo de Negocio",defaultValue:F.subNegocio,onChange:function(e){return P(Object(c.a)(Object(c.a)({},F),{},{subNegocio:e}))},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},children:an.map((function(e){return Object(r.jsx)(ra,{value:e.value,children:e.text},e.value)}))}),Object(r.jsx)(B.a,{size:"small",type:"primary",style:{marginBottom:".5rem"},disabled:A.subNegocio,icon:A.subNegocio?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Dt.a,{}),onClick:function(){return Oe("subNegocio")},children:"Asignar"})]})]}),Object(r.jsx)(hn.a,{title:function(){return Object(r.jsxs)("div",{children:[Object(r.jsxs)(Qe.a.Group,{size:"small",value:se,onChange:function(e){return le(e.target.value)},children:[Object(r.jsx)(Qe.a,{value:"nombre",children:"Nombre"}),Object(r.jsx)(Qe.a,{value:"apellidos",children:"Apellidos"}),Object(r.jsx)(Qe.a,{value:"carnet",children:"Carnet"})]}),Object(r.jsx)(aa,{onChange:me,placeholder:"Buscar ".concat(vn(se)),allowClear:!0,size:"small",style:{width:200}})]})},rowKey:"_id",size:"small",dataSource:x,loading:w,columns:_e,onChange:function(e,t,n,r){ve(r.currentDataSource),R([]),fe(t)},rowSelection:{columnWidth:30,selectedRowKeys:E,onChange:function(e){return R(e)}},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]},scroll:{y:"70vh"},footer:function(){return Object(r.jsx)(B.a,{type:"primary",size:"small",icon:Object(r.jsx)(ta.a,{}),onClick:xe,children:"Exportar"})}})]})},sa=n(663),la=n(664),da=n(662),ua=Je.a.Option;var ba=function(e){var t=e.tecnicos,n=void 0===t?[]:t,i=e.abrir,o=e.visible,c=e.guardar,s=Object(a.useState)(null),l=Object(ae.a)(s,2),d=l[0],u=l[1];function b(){return(b=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,c(d);case 2:i();case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsx)(Fn.a,{title:"Asignar T\xe9cnico",width:450,visible:o,onOk:function(){return b.apply(this,arguments)},onCancel:i,afterClose:function(){return u(null)},centered:!0,children:Object(r.jsx)(Je.a,{placeholder:"Seleccionar T\xe9cnico",filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},style:{width:400},value:d,onChange:function(e){return u(e)},showSearch:!0,children:n&&n.length>0?n.map((function(e,t){return Object(r.jsx)(ua,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},t)})):null})})},fa=Pe.a.Text;function ja(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)(!1),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)([]),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)([]),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(!1),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)(null),A=Object(ae.a)(C,2),I=A[0],k=A[1];function T(){return(T=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!1,{metodo:At.EMPLEADOS_LISTAR_TECNICOS}).then((function(e){var t=e.data;return l(t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function E(){return(E=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f(!0),e.next=3,it(!0,{metodo:At.EMPLEADOS_LISTAR_APOYO}).then((function(e){var t=e.data;t&&t.length>0?(i(t),O(Pr(t,"cargo",!1)),v(Pr(t,"tecnico",!0))):i([])})).catch((function(e){return console.log(e)})).finally((function(){return f(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(){return(R=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ot(!0,{metodo:At.EMPLEADOS_ACTUALIZAR_RUTA,tecnicos:[I],tecnico:t}).then((function(){return n()})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){!function(){E.apply(this,arguments)}(),function(){T.apply(this,arguments)}()}),[]);var M=function(){return S(!y)},L=[{title:"#",width:60,render:function(e,t,n){return n+1}},{title:"Nombre",dataIndex:"nombre",width:150,ellipsis:{title:!0},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Apellidos",dataIndex:"apellidos",width:150,ellipsis:{title:!0},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Cargo",dataIndex:"cargo",width:100,filters:p,onFilter:function(e,t){return 0===t.cargo._id.indexOf(e)},render:function(e){return Object(r.jsx)(gn.a,{children:e.nombre})}},{title:"Tecnico",dataIndex:"tecnico",width:150,filters:m,onFilter:function(e,t){return"-"===e?!t.tecnico:!!(t&&t.tecnico&&t.tecnico._id)&&0===t.tecnico._id.indexOf(e)},ellipsis:{title:!0},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e&&e.apellidos,children:e&&e.apellidos})}},{title:"Tecnico Carnet",dataIndex:"tecnico",width:150,align:"center",render:function(e){return Object(r.jsx)(fa,{children:e&&e.carnet})}},{title:"Asignar",dataIndex:"_id",width:70,align:"center",fixed:"right",render:function(e){return Object(r.jsx)(da.a,{onClick:function(){return function(e){k(e),M()}(e)},style:{cursor:"pointer",fontSize:"1.5rem"}})}}];return Object(r.jsxs)("div",{children:[Object(r.jsx)(hn.a,{rowKey:"_id",size:"small",columns:L,dataSource:n,loading:b,pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]},scroll:{x:"75vw",y:"75vh"}}),Object(r.jsx)(ba,{tecnicos:s,abrir:M,visible:y,guardar:function(e){return R.apply(this,arguments)}})]})}var ha=bn.a.TabPane;var pa=n(667),Oa=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r,a;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.cargo,r=t.fechaInicio,a=t.fechaFin,e.abrupt("return",J({url:"asistencias",method:"GET",params:{cargo:n,fechaInicio:r,fechaFin:a}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ga=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.asistencia,e.abrupt("return",J({url:"asistencias",method:"POST",data:{metodo:n,asistencia:r}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xa=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.asistencia,e.abrupt("return",J({url:"asistencias",method:"PATCH",data:{metodo:n,asistencia:r}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ma=function(e,t){return e===Sr?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{var t=[];return 0===e.length||e.forEach((function(e){if(t.length>0){var n=t.findIndex((function(t){return t.empleado.nombre===e.empleado.nombre&&t.empleado.apellidos===e.empleado.apellidos}));if(-1!==n&&e.fecha_asistencia){var r=t[n],a=tt()(e.fecha_asistencia).format("DD-MM");t[n]=Object(c.a)(Object(c.a)({},r),{},Object(Ze.a)({},a,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro}))}else{var i=tt()(e.fecha_asistencia).format("DD-MM"),o=Object(Ze.a)({_id:e._id,estado_empresa:e.empleado.estado_empresa,tipo_negocio:e.empleado.tipo_negocio,sub_tipo_negocio:e.empleado.sub_tipo_negocio,empleado:e.empleado,carnet:e.empleado.carnet,dni:e.empleado.numero_documento,idEmpleado:e.empleado._id,gestor:{nombre:e.empleado.gestor?e.empleado.gestor.nombre:"-",apellidos:e.empleado.gestor?e.empleado.gestor.apellidos:"-",_id:e.empleado.gestor?e.empleado.gestor._id:"-"},auditor:{nombre:e.empleado.auditor?e.empleado.auditor.nombre:"-",apellidos:e.empleado.auditor?e.empleado.auditor.apellidos:"-",_id:e.empleado.auditor?e.empleado.auditor._id:"-"},contrata:{nombre:e.empleado.contrata?e.empleado.contrata.nombre:"-",_id:e.empleado.contrata?e.empleado.contrata._id:"-"}},i,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro});t.push(o)}}else{var s=tt()(e.fecha_asistencia).format("DD-MM");t=[Object(Ze.a)({_id:e._id,estado_empresa:e.empleado.estado_empresa,tipo_negocio:e.empleado.tipo_negocio,sub_tipo_negocio:e.empleado.sub_tipo_negocio,empleado:e.empleado,carnet:e.empleado.carnet,dni:e.empleado.numero_documento,idEmpleado:e.empleado._id,gestor:{nombre:e.empleado.gestor?e.empleado.gestor.nombre:"-",apellidos:e.empleado.gestor?e.empleado.gestor.apellidos:"-",_id:e.empleado.gestor?e.empleado.gestor._id:"-"},auditor:{nombre:e.empleado.auditor?e.empleado.auditor.nombre:"-",apellidos:e.empleado.auditor?e.empleado.auditor.apellidos:"-",_id:e.empleado.auditor?e.empleado.auditor._id:"-"},contrata:{nombre:e.empleado.contrata?e.empleado.contrata.nombre:"-",_id:e.empleado.contrata?e.empleado.contrata._id:"-"}},s,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro})]}})),t}catch(n){return console.error(n),[]}}(t):e===Cr?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{var t=[];return 0===e.length||e.forEach((function(e){if(t.length>0){var n=t.findIndex((function(t){return t.empleado&&t.empleado.nombre===e.empleado.nombre&&t.empleado.apellidos===e.empleado.apellidos}));if(-1!==n&&e.fecha_asistencia){var r=t[n],a=tt()(e.fecha_asistencia).format("DD-MM");t[n]=Object(c.a)(Object(c.a)({},r),{},Object(Ze.a)({},a,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro}))}else{var i=tt()(e.fecha_asistencia).format("DD-MM"),o=Object(Ze.a)({_id:e._id,estado_empresa:e.empleado.estado_empresa,empleado:e.empleado,tecnico:e.empleado?e.empleado.tecnico:null,cargo:e.cargo,idEmpleado:e.empleado._id},i,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro});t.push(o)}}else{var s=tt()(e.fecha_asistencia).format("DD-MM");t=[Object(Ze.a)({_id:e._id,estado_empresa:e.empleado.estado_empresa,empleado:e.empleado,tecnico:e.empleado?e.empleado.tecnico:null,cargo:e.cargo,idEmpleado:e.empleado._id},s,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro})]}})),t}catch(n){return console.error(n),[]}}(t):function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];try{var t=[];return 0===e.length||e.forEach((function(e){if(t.length>0){var n=t.findIndex((function(t){return t.empleado&&t.empleado.nombre===e.empleado.nombre&&t.empleado.apellidos===e.empleado.apellidos}));if(-1!==n&&e.fecha_asistencia){var r=t[n],a=tt()(e.fecha_asistencia).format("DD-MM");t[n]=Object(c.a)(Object(c.a)({},r),{},Object(Ze.a)({},a,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro}))}else{var i=tt()(e.fecha_asistencia).format("DD-MM"),o=Object(Ze.a)({_id:e._id,estado_empresa:e.empleado.estado_empresa,empleado:e.empleado,cargo:e.cargo,idEmpleado:e.empleado._id},i,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro});t.push(o)}}else{var s=tt()(e.fecha_asistencia).format("DD-MM");t=[Object(Ze.a)({_id:e._id,estado_empresa:e.empleado.estado_empresa,empleado:e.empleado,cargo:e.cargo,idEmpleado:e.empleado._id},s,{_id:e._id,estado:e.estado,iniciado:e.iniciado,fecha_iniciado:e.fecha_iniciado,historial_registro:e.historial_registro})]}})),t}catch(n){return console.error(n),[]}}(t)};var va=n(665),_a=n(666),wa=n(131),ya={FALTA:"F",ASISTIO:"A",TARDANZA:"T",DESCANSO:"D",PERMISO:"P",SUSPENDIDO:"S",DESCANSO_MEDICO:"DM",EXAMEN_MEDICO:"EM",VACACIONES:"V",BAJA:"BAJA",GUARDIA:"GUARDIA"},Sa=Je.a.Option,Ca=P.a.TextArea,Aa=Pe.a.Text;var Ia=function(e){var t=e.actualizar,n=e.row,i=e.fecha,o=e.visible,c=e.abrir,s=Object(a.useState)(!1),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)(null),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)(null),O=Object(ae.a)(p,2),g=O[0],x=O[1];function m(){return(m=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(tt()(i).isValid()&&n.idEmpleado&&j)){e.next=7;break}return u(!0),e.next=4,ga({metodo:At.ASISTENCIA_CREAR,asistencia:{empleado:n.idEmpleado,estado:j,fecha:i,observacion:g}}).catch((function(e){return console.log(e)})).finally((function(){u(!1),c(),t()}));case 4:return e.abrupt("return",e.sent);case 7:V.a.warn("No hay una fecha valida o no se encontr\xf3 el id",{position:"top-right"}),console.log(i,n);case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){h(null),x(null)}),[]),Object(r.jsxs)(Fn.a,{title:"Actualizar el estado de la asistencia",onCancel:c,visible:o,afterClose:function(){return x(null)},width:350,centered:!0,destroyOnClose:!0,footer:[Object(r.jsx)(B.a,{onClick:c,children:"Cancelar"},"back"),Object(r.jsx)(B.a,{icon:d?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)($n.a,{}),disabled:d,type:"primary",onClick:function(){return m.apply(this,arguments)},children:"Aceptar"},"submit")],children:[tt()(i).isValid()?Object(r.jsxs)(Aa,{type:"secondary",children:["Fecha: ",tt()(i).format("DD-MM-YY")]}):Object(r.jsx)(Aa,{type:"danger",children:"Fecha Invalida."}),Object(r.jsx)("br",{}),Object(r.jsx)("br",{}),Object(r.jsx)("p",{children:"Seleccionar Estado:"}),Object(r.jsxs)(Je.a,{placeholder:"Estado",defaultValue:j,onChange:function(e){return h(e)},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},children:[Object(r.jsx)(Sa,{value:ya.ASISTIO,children:"Asisti\xf3"}),Object(r.jsx)(Sa,{value:ya.FALTA,children:"Falta"}),Object(r.jsx)(Sa,{value:ya.TARDANZA,children:"Tardanza"}),Object(r.jsx)(Sa,{value:ya.DESCANSO,children:"Descanso"}),Object(r.jsx)(Sa,{value:ya.GUARDIA,children:"Guardia"}),Object(r.jsx)(Sa,{value:ya.PERMISO,children:"Permiso"}),Object(r.jsx)(Sa,{value:ya.DESCANSO_MEDICO,children:"Descanso M\xe9dico"}),Object(r.jsx)(Sa,{value:ya.EXAMEN_MEDICO,children:"Examen M\xe9dico"}),Object(r.jsx)(Sa,{value:ya.SUSPENDIDO,children:"Suspendido"}),Object(r.jsx)(Sa,{value:ya.VACACIONES,children:"Vacaciones"}),Object(r.jsx)(Sa,{value:ya.BAJA,children:"Baja"})]}),Object(r.jsx)("p",{children:"Observaci\xf3n:"}),Object(r.jsx)(Ca,{placeholder:"Observaci\xf3n...",rows:4,value:g,onChange:function(e){return x(e.target.value)}})]})};var ka=function(e){var t=e.actualizar,n=e.row,i=e.fecha,o=e.estado,c=Object(a.useState)(!1),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=function(){return d(!l)};switch(o){case ya.FALTA:return Object(r.jsx)(gn.a,{color:"error",children:o});case ya.ASISTIO:return Object(r.jsx)(gn.a,{color:"success",children:o});case ya.TARDANZA:return Object(r.jsx)(gn.a,{color:"lime",children:o});case ya.DESCANSO:return Object(r.jsx)(gn.a,{color:"gold",children:o});case ya.GUARDIA:return Object(r.jsx)(gn.a,{color:"cyan",children:o});case ya.PERMISO:return Object(r.jsx)(gn.a,{color:"blue",children:o});case ya.SUSPENDIDO:return Object(r.jsx)(gn.a,{color:"warning",children:o});case ya.DESCANSO_MEDICO:return Object(r.jsx)(gn.a,{color:"geekblue",children:o});case ya.EXAMEN_MEDICO:return Object(r.jsx)(gn.a,{color:"purple",children:o});case ya.VACACIONES:return Object(r.jsx)(gn.a,{color:"pink",children:o});case ya.BAJA:return Object(r.jsx)(gn.a,{color:"volcano",children:o});default:return Object(r.jsxs)(r.Fragment,{children:[Object(r.jsx)(gn.a,{onClick:function(){return u()},style:{cursor:"pointer"},children:"-"}),Object(r.jsx)(Ia,{actualizar:t,row:n,fecha:tt()("".concat(i,"-2021"),"DD-MM-YYYY").toDate(),visible:l,abrir:u})]})}},Ta=function(e){var t=e.nivel,n=e.dias,a=e.gestor,i=e.editar,o=e.registro,c=e.listar,s=e.filtros;return t===Sr?function(e,t,n,a,i,o){var c=o.filtroGestores,s=void 0===c?[]:c,l=o.filtroAuditores,d=void 0===l?[]:l,u=o.filtroContratas,b=void 0===u?[]:u,f=tt()().format("DD-MM"),j=[{title:"#",width:50,align:"center",render:function(e,t,n){return n+1}},{title:"Tecnico",width:200,ellipsis:{title:!0},dataIndex:"empleado",render:function(e){var t=e&&e.nombre?e.nombre+" "+e.apellidos:"-";return Object(r.jsx)(ln.a,{title:t,children:t})}},{title:"En Ruta",dataIndex:f,width:100,align:"center",filters:[{text:"Ok",value:!0},{text:"No",value:!1}],onFilter:function(e,t){return!!t[f]&&(!t[f].iniciado&&!e||t[f].iniciado===e)},render:function(e){return e?e.iniciado?Object(r.jsx)(Re.a,{content:e.fecha_iniciado?tt()(e.fecha_iniciado).format("HH:mm"):"-",title:"Fecha Iniciado",trigger:"click",children:Object(r.jsx)("button",{className:"boton-none",children:Object(r.jsx)(gn.a,{color:Mt.success,children:Object(r.jsx)(Dt.a,{})})})}):Object(r.jsx)(gn.a,{color:Mt.error,children:Object(r.jsx)(gr.a,{})}):Object(r.jsx)(gn.a,{color:"error",children:"BAJA"})}}],h=[{title:"Gestor",dataIndex:"gestor",filters:s,onFilter:function(e,t){return!(!t.gestor||!e)&&0===t.gestor._id.indexOf(e)},ellipsis:!0,width:200,render:function(e){var t=e&&e.nombre?e.nombre+" "+e.apellidos:"-";return Object(r.jsx)(ln.a,{title:t,children:t})}},{title:"Auditor",dataIndex:"auditor",filters:d,onFilter:function(e,t){return!(!t.auditor||!e)&&0===t.auditor._id.indexOf(e)},ellipsis:!0,width:200,render:function(e){var t=e&&e.nombre?e.nombre+" "+e.apellidos:"-";return Object(r.jsx)(ln.a,{title:t,children:t})}},{title:"Contrata",dataIndex:"contrata",filters:b,onFilter:function(e,t){return!!(t&&t.contrata&&e)&&0===t.contrata._id.indexOf(e)},ellipsis:!0,width:200,render:function(e){var t=e&&e.nombre?e.nombre:"-";return Object(r.jsx)(ln.a,{title:t,children:t})}}];t||j.splice.apply(j,[2,0].concat(h));return e&&e.length>0?(j.push.apply(j,Object(Ke.a)(e.map((function(e){return{title:e,dataIndex:e,width:60,align:"center",render:function(t,o){return t&&t.estado?Object(r.jsx)(wa.a,{overlay:Object(r.jsxs)(me.a,{children:[Object(r.jsx)(me.a.Item,{icon:Object(r.jsx)(va.a,{}),onClick:function(){return n(o[e]._id)},children:Object(r.jsx)("span",{children:"Editar"})},"0"),Object(r.jsx)(me.a.Item,{icon:Object(r.jsx)(_a.a,{}),onClick:function(){return a(t.historial_registro,e)},children:Object(r.jsx)("span",{children:"Registro"})},"1")]}),trigger:["click"],children:Object(r.jsx)("button",{className:"boton-none",children:Object(r.jsx)(ka,{actualizar:i,row:o,fecha:e,estado:t.estado})})}):Object(r.jsx)(ka,{actualizar:i,row:o,fecha:e,estado:t&&t.estado_empresa?t.estado_empresa:o.estado_empresa===Ar.INACTIVO?"BAJA":"-"})}}})))),j):j}(n,a,i,o,c,s):t===Cr?function(e,t,n,a){var i=[{title:"#",width:50,align:"center",render:function(e,t,n){return n+1}},{title:"Nombre",width:200,ellipsis:{title:!0},dataIndex:"empleado",render:function(e){var t=e&&e.nombre?e.nombre+" "+e.apellidos:"-";return Object(r.jsx)(ln.a,{title:t,children:t})}},{title:"Cargo",width:120,align:"center",dataIndex:"cargo",render:function(e){var t=e?e.nivel:"-",n=e?e.nombre:"-";return Object(r.jsx)(Ir,{nivel:t,cargo:n})}},{title:"Tecnico",width:200,ellipsis:{title:!0},dataIndex:"tecnico",render:function(e){var t=e&&e.nombre?e.nombre+" "+e.apellidos:"-";return Object(r.jsx)(ln.a,{title:t,children:t})}}];return e&&e.length>0?(i.push.apply(i,Object(Ke.a)(e.map((function(e){return{title:e,dataIndex:e,width:60,align:"center",render:function(i,o){return i&&i.estado?Object(r.jsx)(wa.a,{overlay:Object(r.jsxs)(me.a,{children:[Object(r.jsx)(me.a.Item,{icon:Object(r.jsx)(va.a,{}),onClick:function(){return t(o[e]._id)},children:Object(r.jsx)("span",{children:"Editar"})},"0"),Object(r.jsx)(me.a.Item,{icon:Object(r.jsx)(_a.a,{}),onClick:function(){return n(i.historial_registro,e)},children:Object(r.jsx)("span",{children:"Registro"})},"1")]}),trigger:["click"],children:Object(r.jsx)("button",{className:"boton-none",children:Object(r.jsx)(ka,{actualizar:a,row:o,fecha:e,estado:i.estado})})}):Object(r.jsx)(ka,{actualizar:a,row:o,fecha:e,estado:i&&i.estado_empresa?i.estado_empresa:o.estado_empresa===Ar.INACTIVO?"BAJA":"-"})}}})))),i):(console.log(i),i)}(n,i,o,c):function(e,t,n,a){var i=[{title:"#",width:50,align:"center",render:function(e,t,n){return n+1}},{title:"Nombre",width:200,ellipsis:{title:!0},dataIndex:"empleado",render:function(e){var t=e&&e.nombre?e.nombre+" "+e.apellidos:"-";return Object(r.jsx)(ln.a,{title:t,children:t})}},{title:"Cargo",width:120,align:"center",dataIndex:"cargo",render:function(e){var t=e?e.nivel:"-",n=e?e.nombre:"-";return Object(r.jsx)(Ir,{nivel:t,cargo:n})}}];return e&&e.length>0?(i.push.apply(i,Object(Ke.a)(e.map((function(e){return{title:e,dataIndex:e,width:60,align:"center",render:function(i,o){return i&&i.estado?Object(r.jsx)(wa.a,{overlay:Object(r.jsxs)(me.a,{children:[Object(r.jsx)(me.a.Item,{icon:Object(r.jsx)(va.a,{}),onClick:function(){return t(o[e]._id)},children:Object(r.jsx)("span",{children:"Editar"})},"0"),Object(r.jsx)(me.a.Item,{icon:Object(r.jsx)(_a.a,{}),onClick:function(){return n(i.historial_registro,e)},children:Object(r.jsx)("span",{children:"Registro"})},"1")]}),trigger:["click"],children:Object(r.jsx)("button",{className:"boton-none",children:Object(r.jsx)(ka,{actualizar:a,row:o,fecha:e,estado:i.estado})})}):Object(r.jsx)(ka,{actualizar:a,row:o,fecha:e,estado:i&&i.estado_empresa?i.estado_empresa:o.estado_empresa===Ar.INACTIVO?"BAJA":"-"})}}})))),i):(console.log(i),i)}(n,i,o,c)};var Ea=Je.a.Option,Ra=P.a.TextArea;var Da=function(e){var t=e.visible,n=e.abrir,i=e.loadingActualizar,o=e.actualizar,c=Object(a.useState)(null),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=Object(a.useState)(null),b=Object(ae.a)(u,2),f=b[0],j=b[1];function h(){return(h=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===l){e.next=5;break}return e.next=3,o(l,f);case 3:e.next=6;break;case 5:V.a.warn("No hay usuario seleccionado.",{position:"top-right"});case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){d(null),j(null)}),[]),Object(r.jsxs)(Fn.a,{title:"Actualizar el estado de la asistencia",visible:t,afterClose:function(){return j(null)},width:350,centered:!0,destroyOnClose:!0,onCancel:n,footer:[Object(r.jsx)(B.a,{onClick:n,children:"Cancelar"},"back"),Object(r.jsx)(B.a,{icon:i?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)($n.a,{}),type:"primary",onClick:function(){return h.apply(this,arguments)},children:"Aceptar"},"submit")],children:[Object(r.jsx)("p",{children:"Seleccionar Estado:"}),Object(r.jsxs)(Je.a,{placeholder:"Estado",defaultValue:l,onChange:function(e){return d(e)},style:{width:300,marginBottom:".5rem",marginRight:".5rem"},children:[Object(r.jsx)(Ea,{value:ya.ASISTIO,children:"Asisti\xf3"}),Object(r.jsx)(Ea,{value:ya.TARDANZA,children:"Tardanza"}),Object(r.jsx)(Ea,{value:ya.FALTA,children:"Falta"}),Object(r.jsx)(Ea,{value:ya.DESCANSO,children:"Descanso"}),Object(r.jsx)(Ea,{value:ya.GUARDIA,children:"Guardia"}),Object(r.jsx)(Ea,{value:ya.PERMISO,children:"Permiso"}),Object(r.jsx)(Ea,{value:ya.DESCANSO_MEDICO,children:"Descanso M\xe9dico"}),Object(r.jsx)(Ea,{value:ya.EXAMEN_MEDICO,children:"Examen M\xe9dico"}),Object(r.jsx)(Ea,{value:ya.SUSPENDIDO,children:"Suspendido"}),Object(r.jsx)(Ea,{value:ya.VACACIONES,children:"Vacaciones"}),Object(r.jsx)(Ea,{value:ya.BAJA,children:"Baja"})]}),Object(r.jsx)("p",{children:"Observaci\xf3n:"}),Object(r.jsx)(Ra,{placeholder:"Observaci\xf3n...",rows:4,value:f,onChange:function(e){return j(e.target.value)}})]})};var Na=function(e){var t=e.fecha,n=e.registro,a=void 0===n?[]:n,i=e.visible,o=e.abrir,c=[{title:"#",width:60,render:function(e,t,n){return n+1}},{title:"Fecha",width:100,align:"center",dataIndex:"fecha_registro",render:function(e){return Object(r.jsx)(gn.a,{children:tt()(e).format("DD-MM-YYYY")})}},{title:"Usuario",dataIndex:"usuario",width:150,ellipsis:!0,render:function(e){var t=e&&e.nombre?e.nombre+" "+e.apellidos:"Sistema";return Object(r.jsx)(ln.a,{title:t,children:t})}},{title:"Observacion",width:300,dataIndex:"observacion"}];return Object(r.jsx)(Fn.a,{title:"Historial de Cambios - ".concat(t),width:700,visible:i,onOk:o,onCancel:o,centered:!0,children:Object(r.jsx)(hn.a,{rowKey:"fecha_registro",size:"small",columns:c,dataSource:a,pagination:!1,scroll:{x:650}})})},Ma=n(15);var La=function(e){var t=e.data,n=void 0===t?[]:t,i=e.dias,o=void 0===i?[]:i,s=e.nombre,l=Object(a.useRef)(null),d=function(e){switch(e){case ya.FALTA:case"Inactivo":return{background:qn.red[1],color:qn.red.primary};case ya.ASISTIO:return{background:qn.green[1],color:qn.green.primary};case ya.TARDANZA:return{background:qn.lime[1],color:qn.lime.primary};case ya.DESCANSO:return{background:qn.gold[1],color:qn.gold.primary};case ya.PERMISO:return{background:qn.blue[1],color:qn.blue.primary};case ya.GUARDIA:return{background:qn.cyan[1],color:qn.cyan.primary};case ya.SUSPENDIDO:return{background:qn.yellow[1],color:qn.yellow.primary};case ya.DESCANSO_MEDICO:return{background:qn.geekblue[1],color:qn.geekblue.primary};case ya.EXAMEN_MEDICO:return{background:qn.purple[1],color:qn.purple.primary};case ya.VACACIONES:return{background:qn.orange[1],color:qn.orange.primary};case ya.BAJA:return{background:qn.volcano[1],color:qn.volcano.primary};default:return{background:"",color:""}}},u={background:"#5DADE2",bold:!0,fontSize:17,wrap:!0,autoWidth:!0};return Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{size:"small",icon:Object(r.jsx)(ta.a,{}),type:"primary",onClick:function(){!function(e){try{var t=e.workbookOptions(),n=t.sheets[0].rows,r=-1,a=[];n.forEach((function(e){"header"===e.type&&(r=e.cells.findIndex((function(e){return"Estado"===e.value})),e.cells.forEach((function(e,t){var n=tt()("".concat(e.value,"-2021"),"DD-MM-YYYY");tt()().isValid()&&(tt()().diff(n,"days")>=0&&a.push(t))}))),"data"===e.type&&(r>-1&&"INACTIVO"===String(e.cells[r].value).toUpperCase()&&a.length>0&&a.forEach((function(t){e.cells[t].value||(e.cells[t].value="BAJA")})),e.cells.forEach((function(e){e.value=e.value?String(e.value).toUpperCase():e.value,e.background=d(e.value).background,e.color=d(e.value).color,e.borderBottom={size:1},e.borderLeft={size:1},e.borderRight={size:1},e.borderTop={size:1}})))})),e.save(t)}catch(i){console.log(i)}}(l.current)},children:"Exportar"}),Object(r.jsxs)(Ma.a,{data:n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{cargo:s})})),fileName:"asistencia_".concat(s.toLowerCase().replace(/ /g,"_"),"_").concat(tt()().format("DD_MM_YYYY"),".xlsx"),ref:l,children:[Object(r.jsx)(Ma.b,{field:"empleado.nombre",title:"Nombre",locked:!0,width:170,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"empleado.apellidos",title:"Apellidos",locked:!0,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"estado_empresa",title:"Estado",width:90,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"cargo",title:"Cargo",width:90,headerCellOptions:u}),o&&o.length>0?o.map((function(e,t){return Object(r.jsx)(Ma.b,{field:"".concat(e,".estado"),title:"".concat(e),width:60,headerCellOptions:u,cellOptions:{textAlign:"center"}},t)})):null]})]})};var za=function(e){var t=e.data,n=void 0===t?[]:t,i=e.dias,o=void 0===i?[]:i,s=e.nombre,l=Object(a.useRef)(null),d=function(e){switch(e){case ya.FALTA:case"Inactivo":return{background:qn.red[1],color:qn.red.primary};case ya.ASISTIO:return{background:qn.green[1],color:qn.green.primary};case ya.TARDANZA:return{background:qn.lime[1],color:qn.lime.primary};case ya.DESCANSO:return{background:qn.gold[1],color:qn.gold.primary};case ya.PERMISO:return{background:qn.blue[1],color:qn.blue.primary};case ya.GUARDIA:return{background:qn.cyan[1],color:qn.cyan.primary};case ya.SUSPENDIDO:return{background:qn.yellow[1],color:qn.yellow.primary};case ya.DESCANSO_MEDICO:return{background:qn.geekblue[1],color:qn.geekblue.primary};case ya.EXAMEN_MEDICO:return{background:qn.purple[1],color:qn.purple.primary};case ya.VACACIONES:return{background:qn.orange[1],color:qn.orange.primary};case ya.BAJA:return{background:qn.volcano[1],color:qn.volcano.primary};default:return{background:"",color:""}}},u={background:"#5DADE2",bold:!0,fontSize:17,wrap:!1,autoWidth:!0};return Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{size:"small",icon:Object(r.jsx)(ta.a,{}),type:"primary",onClick:function(){!function(e){try{var t=e.workbookOptions(),n=t.sheets[0].rows,r=-1,a=[];n.forEach((function(e){"header"===e.type&&(r=e.cells.findIndex((function(e){return"Estado"===e.value})),e.cells.forEach((function(e,t){var n=tt()("".concat(e.value,"-2021"),"DD-MM-YYYY");tt()().isValid()&&(tt()().diff(n,"days")>=0&&a.push(t))}))),"data"===e.type&&(r>-1&&"INACTIVO"===String(e.cells[r].value).toUpperCase()&&a.length>0&&a.forEach((function(t){e.cells[t].value||(e.cells[t].value="BAJA")})),e.cells.forEach((function(e){e.value=e.value?String(e.value).toUpperCase():e.value,e.background=d(e.value).background,e.color=d(e.value).color,e.borderBottom={size:1},e.borderLeft={size:1},e.borderRight={size:1},e.borderTop={size:1}})))})),e.save(t)}catch(i){console.log(i)}}(l.current)},children:"Exportar"}),Object(r.jsxs)(Ma.a,{data:n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{cargo:vn(s)})})),fileName:"asistencia_".concat(s,"_").concat(tt()().format("DD_MM_YYYY"),".xlsx"),ref:l,children:[Object(r.jsx)(Ma.b,{field:"empleado.nombre",title:"Nombre",locked:!0,width:170,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"empleado.apellidos",title:"Apellidos",locked:!0,width:150,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"carnet",title:"Carnet",locked:!0,width:150,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"dni",title:"DNI",width:150,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"estado_empresa",title:"Estado",width:90,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"cargo",title:"Cargo",width:90,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"contrata.nombre",title:"Contrata",width:170,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"auditor.apellidos",title:"Auditor",width:170,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"gestor.apellidos",title:"Gestor",width:170,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"tipo_negocio",title:"Negocio",width:90,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"sub_tipo_negocio",title:"Sub Negocio",width:90,headerCellOptions:u}),o&&o.length>0?o.map((function(e,t){return Object(r.jsx)(Ma.b,{field:"".concat(e,".estado"),title:"".concat(e),width:60,headerCellOptions:u,cellOptions:{textAlign:"center"}},t)})):null]})]})};var qa=function(e){var t=e.data,n=void 0===t?[]:t,i=e.dias,o=void 0===i?[]:i,s=e.nombre,l=Object(a.useRef)(null),d=function(e){switch(e){case ya.FALTA:case"Inactivo":return{background:qn.red[1],color:qn.red.primary};case ya.ASISTIO:return{background:qn.green[1],color:qn.green.primary};case ya.TARDANZA:return{background:qn.lime[1],color:qn.lime.primary};case ya.DESCANSO:return{background:qn.gold[1],color:qn.gold.primary};case ya.PERMISO:return{background:qn.blue[1],color:qn.blue.primary};case ya.GUARDIA:return{background:qn.cyan[1],color:qn.cyan.primary};case ya.SUSPENDIDO:return{background:qn.yellow[1],color:qn.yellow.primary};case ya.DESCANSO_MEDICO:return{background:qn.geekblue[1],color:qn.geekblue.primary};case ya.EXAMEN_MEDICO:return{background:qn.purple[1],color:qn.purple.primary};case ya.VACACIONES:return{background:qn.orange[1],color:qn.orange.primary};case ya.BAJA:return{background:qn.volcano[1],color:qn.volcano.primary};default:return{background:"",color:""}}},u={background:"#5DADE2",bold:!0,fontSize:17,wrap:!0,autoWidth:!0};return Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{size:"small",icon:Object(r.jsx)(ta.a,{}),type:"primary",onClick:function(){!function(e){try{var t=e.workbookOptions(),n=t.sheets[0].rows,r=-1,a=[];n.forEach((function(e){"header"===e.type&&(r=e.cells.findIndex((function(e){return"Estado"===e.value})),e.cells.forEach((function(e,t){var n=tt()("".concat(e.value,"-2021"),"DD-MM-YYYY");tt()().isValid()&&(tt()().diff(n,"days")>=0&&a.push(t))}))),"data"===e.type&&(r>-1&&"INACTIVO"===String(e.cells[r].value).toUpperCase()&&a.length>0&&a.forEach((function(t){e.cells[t].value||(e.cells[t].value="BAJA")})),e.cells.forEach((function(e){e.value=e.value?String(e.value).toUpperCase():e.value,e.background=d(e.value).background,e.color=d(e.value).color,e.borderBottom={size:1},e.borderLeft={size:1},e.borderRight={size:1},e.borderTop={size:1}})))})),e.save(t)}catch(i){console.log(i)}}(l.current)},children:"Exportar"}),Object(r.jsxs)(Ma.a,{data:n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{cargo:s})})),fileName:"asistencia_".concat(s.toLowerCase().replace(/ /g,"_"),"_").concat(tt()().format("DD_MM_YYYY"),".xlsx"),ref:l,children:[Object(r.jsx)(Ma.b,{field:"empleado.nombre",title:"Nombre",locked:!0,width:170,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"empleado.apellidos",title:"Apellidos",locked:!0,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"estado_empresa",title:"Estado",width:90,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"cargo",title:"Cargo",width:90,headerCellOptions:u}),Object(r.jsx)(Ma.b,{field:"tecnico.nombre",title:"Tecnico",width:90,headerCellOptions:u}),o&&o.length>0?o.map((function(e,t){return Object(r.jsx)(Ma.b,{field:"".concat(e,".estado"),title:"".concat(e),width:60,headerCellOptions:u,cellOptions:{textAlign:"center"}},t)})):null]})]})};var Fa=function(e){var t=e.nivel,n=e.data,a=void 0===n?[]:n,i=e.dias,o=void 0===i?[]:i,c=e.cargo;return t&&t<=yr?Object(r.jsx)(La,{data:a,dias:o,nombre:c}):t&&t===Sr?Object(r.jsx)(za,{data:a,dias:o,nombre:"tecnico"}):t&&t===Cr?Object(r.jsx)(qa,{data:a,dias:o,nombre:c}):null},Pa=Je.a.Option,Ba=Xe.a.RangePicker;var Ya=function(e){var t=e.gestor,n=void 0!==t&&t,i=Object(a.useState)([]),o=Object(ae.a)(i,2),c=o[0],s=o[1],l=Object(a.useState)([]),d=Object(ae.a)(l,2),u=d[0],b=d[1],f=Object(a.useState)(!1),j=Object(ae.a)(f,2),h=j[0],p=j[1],O=Object(a.useState)(!1),g=Object(ae.a)(O,2),x=g[0],m=g[1],v=Object(a.useState)(!1),_=Object(ae.a)(v,2),w=_[0],y=_[1],S=Object(a.useState)(null),C=Object(ae.a)(S,2),A=C[0],I=C[1],k=Object(a.useState)(tt()().startOf("week")),T=Object(ae.a)(k,2),E=T[0],R=T[1],M=Object(a.useState)(tt()().endOf("week")),L=Object(ae.a)(M,2),F=L[0],P=L[1],Y=Object(a.useState)([]),G=Object(ae.a)(Y,2),H=G[0],U=G[1],K=Object(a.useState)(null),Z=Object(ae.a)(K,2),J=Z[0],W=Z[1],X=Object(a.useState)(!1),Q=Object(ae.a)(X,2),$=Q[0],ee=Q[1],te=Object(a.useState)(!1),ne=Object(ae.a)(te,2),re=ne[0],ie=ne[1],oe=Object(a.useState)(null),ce=Object(ae.a)(oe,2),se=ce[0],le=ce[1],de=Object(a.useState)([]),ue=Object(ae.a)(de,2),be=ue[0],fe=ue[1],je=Object(a.useState)(null),he=Object(ae.a)(je,2),pe=he[0],Oe=he[1],ge=Object(a.useState)([]),xe=Object(ae.a)(ge,2),me=xe[0],ve=xe[1],_e=Object(a.useState)([]),we=Object(ae.a)(_e,2),ye=we[0],Se=we[1],Ce=Object(a.useState)([]),Ae=Object(ae.a)(Ce,2),Ie=Ae[0],ke=Ae[1];function Te(){return(Te=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return m(!0),e.next=3,ar(!0).then((function(e){var t=e.data;return b(t)})).catch((function(e){return console.log(e)})).finally((function(){return m(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ee(){return Re.apply(this,arguments)}function Re(){return(Re=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(E&&F&&u.length>0)){e.next=6;break}return p(!0),e.next=4,Oa({cargo:n?null:u[A]._id,fechaInicio:E.toDate(),fechaFin:F.toDate()}).then(function(){var e=Object(N.a)(D.a.mark((function e(t){var r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=t.data,e.abrupt("return",ma(n?Sr:u[A].nivel,r));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(e){e&&e.length>0?(s(e),ve(Pr(e,"gestor",!0)),Se(Pr(e,"auditor",!0)),ke(Pr(e,"contrata",!0))):(s([]),V.a.warn("No se encontraron registros.",{position:"top-right"}))})).catch((function(e){return console.log(e)})).finally((function(){return p(!1)}));case 4:e.next=7;break;case 6:V.a.warn("Debes seleccionar un rango de fechas primero.",{position:"top-right"});case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(){return(De=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),e.next=3,xa({metodo:At.ASISTENCIA_ACTUALIZAR,asistencia:{_id:se,estado:t,observacion:n}}).catch((function(e){return console.log(e)})).finally((function(){y(!1),ee(!1),Ee()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e,t){e&&e.length>0?(fe(e),Oe(t),ze()):V.a.warn("No se encontraron registros en la fecha seleccionada.",{position:"top-right"})}Object(a.useEffect)((function(){n&&Ee(),qe([tt()().startOf("week"),tt()().endOf("week")]),function(){Te.apply(this,arguments)}()}),[]),Object(a.useEffect)((function(){A&&u.length>0&&W(Ta({nivel:u[A].nivel,dias:H,editar:Me,registro:Ne,listar:Ee,filtros:{filtroGestores:me,filtroAuditores:ye,filtroContratas:Ie}}))}),[H,A]),Object(a.useEffect)((function(){n&&W(Ta({nivel:Sr,dias:H,gestor:n,editar:Me,registro:Ne,listar:Ee,filtros:{filtroGestores:me,filtroAuditores:ye,filtroContratas:Ie}}))}),[c]);var Me=function(e){Le(),le(e)},Le=function(){return ee(!$)},ze=function(){return ie(!re)},qe=function(e){if(e&&e.length>1){var t=tt()(e[1].toDate()).diff(e[0].toDate(),"days");R(e[0]),P(e[1]);for(var n=[],r=0;r<=t;r++)n.push(tt()(e[0].toDate()).add(r,"days").format("DD-MM"));U(n)}else R(tt()().startOf("week")),P(tt()().endOf("week"))};return Object(r.jsxs)("div",{children:[Object(r.jsxs)(z.a,{style:{margin:".8rem 0"},children:[n?null:Object(r.jsxs)(q.a,{sm:12,style:{paddingRight:"1.5rem"},children:[Object(r.jsx)("h4",{children:"Seleccionar Cargo:"}),Object(r.jsx)(Je.a,{size:"small",placeholder:"Seleccionar Cargo",loading:x,style:{width:"100%"},value:A,onChange:function(e){return I(e)},defaultActiveFirstOption:!0,children:u&&u.length>0?u.map((function(e,t){return Object(r.jsx)(Pa,{value:t,children:e.nombre},t)})):null})]}),Object(r.jsxs)(q.a,{sm:12,children:[Object(r.jsx)("h4",{children:"Seleccionar rango de Fechas:"}),Object(r.jsx)(Ba,{size:"small",style:{marginRight:".5rem"},onChange:qe,value:[tt()(E),tt()(F)]})]})]}),Object(r.jsx)(B.a,{type:"primary",size:"small",disabled:h,icon:h?Object(r.jsx)(Qn.a,{}):Object(r.jsx)(pa.a,{}),style:{marginBottom:"1rem"},onClick:Ee,children:"Buscar"}),Object(r.jsx)(hn.a,{rowKey:"_id",size:"small",loading:h,columns:J,dataSource:c,scroll:{y:"75vh",x:"75vw"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]},footer:function(){return Object(r.jsx)(Fa,{nivel:A&&u.length>0?u[A].nivel:Sr,data:c,dias:H,cargo:A&&u.length>0?u[A].nombre:null})}}),Object(r.jsx)(Da,{visible:$,abrir:Le,loadingActualizar:w,actualizar:function(e,t){return De.apply(this,arguments)}}),Object(r.jsx)(Na,{fecha:pe,registro:be,visible:re,abrir:ze})]})};var Ga=[{path:_,exact:!0,component:function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)(!1),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)([]),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)(!1),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)([]),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(!1),w=Object(ae.a)(_,2),y=w[0],S=w[1];function C(){return(C=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,it(!1,{metodo:At.EMPLEADOS_LISTAR_GESTORES}).then((function(e){var t=e.data;t&&i([].concat(Object(Ke.a)(t),[{_id:"-",nombre:"-",apellidos:""}]))})).catch((function(e){return console.log(e)})).finally((function(){return l(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function A(){return(A=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return O(!0),e.next=3,it(!1,{metodo:At.EMPLEADOS_LISTAR_AUDITORES}).then((function(e){var t=e.data;t&&f(t)})).catch((function(e){return console.log(e)})).finally((function(){return O(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function I(){return(I=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return S(!0),e.next=3,it(!1,{metodo:At.EMPLEADOS_LISTAR_SUPERVISORES}).then((function(e){var t=e.data;t&&v(t)})).catch((function(e){return console.log(e)})).finally((function(){return S(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){C.apply(this,arguments)}(),function(){A.apply(this,arguments)}(),function(){I.apply(this,arguments)}()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Asignar Rutas",subtitulo:"Lista Rutas"}),Object(r.jsx)(nt,{children:Object(r.jsxs)(bn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)(ha,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(sa.a,{}),"Rutas Operativas"]}),children:Object(r.jsx)(ca,{gestores:n,loadingGestores:s,auditores:b,loadingAuditores:p,supervisores:m,loadingSupervisores:y})},"1"),Object(r.jsx)(ha,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(la.a,{}),"Rutas de Apoyo"]}),children:Object(r.jsx)(ja,{})},"2")]})})]})}},{path:w,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Lista de Rutas",subtitulo:"Operativa"}),Object(r.jsx)(nt,{children:Object(r.jsx)(Ya,{gestor:!1})})]})}}];var Ha=n(674),Ua=n(675),Va=n(671),Ka=n(672),Za=n(673),Ja=[{cabecera:"desdtt",propiedad:"distrito"},{cabecera:"codreq",cabecera_2:"codreqatn",propiedad:"codigo_requerimiento"},{cabecera:"codordtrab",propiedad:"codigo_trabajo"},{cabecera:"cod_peticion",cabecera_2:"codpeticion",propiedad:"codigo_peticion"},{cabecera:"codofcadm",propiedad:"codigo_zonal"},{cabecera:"codcli",propiedad:"codigo_cliente"},{cabecera:"nomcli",propiedad:"nombre_cliente"},{cabecera:"codctr",propiedad:"codigo_ctr"},{cabecera:"desnomctr",propiedad:"descripcion_ctr"},{cabecera:"codnod",propiedad:"codigo_nodo"},{cabecera:"nroplano",propiedad:"codigo_troba"},{cabecera:"fec_regist",cabecera_2:"fechorreg",fecha:!0,propiedad:"fecha_registro"},{cabecera:"codmotv",propiedad:"codigo_motivo"},{cabecera:"desmotv",propiedad:"detalle_motivo"},{cabecera:"tipreqfin",propiedad:"tipo_requerimiento"},{cabecera:"desobsordtrab",propiedad:"detalle_trabajo"},{cabecera:"telefono",cabecera_2:"tel_cont_cc",propiedad:"telefono_contacto"},{cabecera:"tel_cont_ref_cc",propiedad:"telefono_referencia"},{cabecera:"numaverei",cabecera_2:"numaveind",propiedad:"numero_reiterada"},{cabecera:"tiptecnologia",propiedad:"tipo_tecnologia"}],Wa=[{cabecera:"destipvia",espacio:" "},{cabecera:"desnomvia",espacio:" "},{cabecera:"numvia",espacio:" "},{cabecera:"despis",espacio:" "},{cabecera:"desint",espacio:" Int. "},{cabecera:"desmzn",espacio:" Mz. "},{cabecera:"deslot",espacio:" Lt. "},{cabecera:"destipurb",espacio:" "},{cabecera:"desurb",espacio:" "}],Xa=[{cabecera:"desdtt",cabecera_2:"distrito",propiedad:"distrito"},{cabecera:"codreq",cabecera_2:"numreq",cabecera_3:"requerimiento",propiedad:"codigo_requerimiento"},{cabecera:"codofcadm",propiedad:"codigo_zonal"},{cabecera:"codcli",propiedad:"codigo_cliente"},{cabecera:"codordtrab",cabecera_2:"ordtrab",propiedad:"codigo_trabajo"},{cabecera:"cod_peticion",cabecera_2:"codpeticion",propiedad:"codigo_peticion"},{cabecera:"codinc",propiedad:"codigo_incidencia"},{cabecera:"codctr",cabecera_2:"codres",propiedad:"codigo_ctr"},{cabecera:"desnomctr",propiedad:"descripcion_ctr"},{cabecera:"codsegmento",propiedad:"codigo_segmento"},{cabecera:"tipreq",propiedad:"tipo_requerimiento"},{cabecera:"codmotv",propiedad:"codigo_motivo"},{cabecera:"desmotv",propiedad:"detalle_motivo"},{cabecera:"desobsordtrab",propiedad:"detalle_trabajo"},{cabecera:"fecest",fecha:!0,propiedad:"fecha_asignado"},{cabecera:"fechorasig",cabecera_2:"fecasig",hora:"horasig",fecha:!0,propiedad:"fecha_registro"},{cabecera:"codnod",propiedad:"codigo_nodo"},{cabecera:"nroplano",propiedad:"codigo_troba"},{cabecera:"indpai",cabecera_2:"estado pai",propiedad:"indicador_pai"},{cabecera:"telefono_voip",propiedad:"telefono_contacto"},{cabecera:"tiptecnologia",propiedad:"tipo_tecnologia"},{cabecera:"movistar_total",propiedad:"movistar_total"}],Qa=[{cabecera:"codreq",cabecera_2:"codreqatn",cabecera_3:"numreq",propiedad:"codigo_requerimiento"},{cabecera:"codctr",cabecera_2:"codres",propiedad:"codigo_ctr"},{cabecera:"codnod",propiedad:"codigo_nodo"},{cabecera:"desnomctr",propiedad:"descripcion_ctr"},{cabecera:"fec_liquid",cabecera_2:"fechorliq",fecha:!0,propiedad:"fecha_liquidado"},{cabecera:"tipave",propiedad:"tipo_averia"},{cabecera:"codtecliq",propiedad:"carnet_liquidado"},{cabecera:"nomtec",propiedad:"nombre_liquidado"},{cabecera:"codusr",propiedad:"usuario_liquidado"},{cabecera:"desobsordtrab",propiedad:"observacion_liquidado"},{cabecera:"des_cod_liq",propiedad:"descripcion_codigo_liquidado"}],$a=[{text:"MA MAGDALENA 01",value:"BK_SV_MA_MAGDALENA_01"},{text:"SM MAGDALENA 02",value:"BK_MA_SM_MAGDALENA_02"},{text:"SJ MARANGA",value:"BK_MR_SM_PN_SJ_MARANGA"},{text:"SJ SAN JOSE",value:"BK_SJ_SAN_JOSE"},{text:"MA VENEZUELA",value:"BK_VN_MA_VENEZUELA"}],ei="pendiente",ti="agendado",ni="asignado",ri="iniciado",ai="liquidado",ii="suspendido",oi="cancelado",ci="no_realizado",si="masivo",li="pext",di="remedy",ui=["02","2","03","3","06","6","07","7","10","1C","1D","1H","1I","1N","1P","1Q","1S","1O","1T","1U","1L","G1","G3","G4","G5","2A","2B","2C","2D","2E","2F","2G","2H","HC","H0","H1","H2","H3","H4","H5","H6","H8","H9","HA","HB","HC","HD"],bi=["1V","1W","71","77","78","79","7B","7C","7D","7E","7F","21","93","R1","R2","H7","D1","D2","D3","D4","D5","S1","S2","S3","S4","S5","S6","Z1"],fi=["21","22","23","24","25","26","28","31","32","33","34","35","41","42","43","47","48","49","51","53","81","82","83","84","91","92","B8"],ji=n(668);var hi=function(e){var t=e.estado;switch(String(t).toLowerCase()){case"cancelado":return Object(r.jsx)(gn.a,{children:vn(t)});case"completado":case ai:return Object(r.jsx)(gn.a,{color:"success",children:vn(t)});case ti:return Object(r.jsx)(gn.a,{color:"blue",children:vn(t)});case ni:return Object(r.jsx)(gn.a,{color:"cyan",children:vn(t)});case"iniciado":return Object(r.jsx)(gn.a,{color:"geekblue",children:vn(t)});case"no realizada":return Object(r.jsx)(gn.a,{color:"magenta",children:vn(t)});case ei:return Object(r.jsx)(gn.a,{color:"orange",children:vn(t)});case ii:case di:return Object(r.jsx)(gn.a,{color:"red",children:vn(t)});case li:case si:return Object(r.jsx)(gn.a,{color:"purple",children:String(t).toUpperCase()});case"efectiva":return Object(r.jsx)(gn.a,{color:"green",children:vn(t)});case"inefectiva":case"anulado":return Object(r.jsx)(gn.a,{color:"red",children:vn(t)});default:return Object(r.jsx)(gn.a,{children:"-"})}},pi=function(){var e=Object(N.a)(D.a.mark((function e(t,n){var r,a,i,o,c,s,l,d;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.metodo,a=n.tipo,i=n.codigo_cliente,o=n.id,c=n.todo,s=n.id_ordenes,l=n.fechaInicio,d=n.fechaFin,e.abrupt("return",J({url:"ordenes",method:"GET",params:{metodo:r,tipo:a,todo:c,codigo_cliente:i,id:o,id_ordenes:s,fechaInicio:l,fechaFin:d},headers:{"Content-Type":"application/json"}},t));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oi=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r,a,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.ordenes,a=t.ordenesExternas,i=t.orden,e.abrupt("return",J({url:"ordenes",method:"POST",data:{ordenes:r,ordenesExternas:a,metodo:n,orden:i}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gi=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.ordenes,e.abrupt("return",J({url:"ordenes",method:"PUT",data:{ordenes:r,metodo:n}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xi=function(){var e=Object(N.a)(D.a.mark((function e(t){var n,r,a,i,o,c,s,l,d,u,b;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.metodo,r=t.id,a=t.ordenes,i=t.bucket,o=t.tecnico,c=t.auditor,s=t.gestor,l=t.contrata,d=t.fecha_cita,u=t.estado,b=t.observacion,e.abrupt("return",J({url:"ordenes",method:"PATCH",data:{metodo:n,id:r,ordenes:a,bucket:i,tecnico:o,auditor:c,gestor:s,contrata:l,fecha_cita:d,estado:u,observacion:b}},!0));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mi=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",J({url:"ordenes",method:"PATCH",data:t,headers:{"Content-Type":"multipart/form-data"}},!0));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();var vi=function(e){var t=e.row,n=e.listarOrdenes,i=Object(a.useState)(null),o=Object(ae.a)(i,2),c=o[0],s=o[1],l=Object(a.useState)(!1),d=Object(ae.a)(l,2),u=d[0],b=d[1];function f(){return(f=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!c){e.next=5;break}return e.next=3,xi({metodo:Ct,id:t._id,observacion:c}).then((function(){j(),n()})).catch((function(e){return console.log(e)}));case 3:e.next=6;break;case 5:b(!1);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var j=function(){s(null),b(!1)};return Object(r.jsx)(Jn.a,{visible:u,placement:"leftTop",title:function(){return Object(r.jsxs)("div",{children:[Object(r.jsxs)("p",{children:["Observacion - ",Object(r.jsx)("strong",{children:t.codigo_requerimiento})]}),Object(r.jsx)(P.a,{value:c,onChange:function(e){return s(e.target.value)},placeholder:"Observacion",size:"small",style:{width:250}})]})},icon:Object(r.jsx)(Wn.a,{twoToneColor:"#EB984E"}),onConfirm:function(){return f.apply(this,arguments)},onCancel:j,children:Object(r.jsx)(Wn.a,{style:{fontSize:"1.5rem"},twoToneColor:"#EB984E",onClick:function(){return b(!u)}})})};var _i=function(e){var t=e.fecha,n=e.tipo,a=e.tipoAgenda,i=tt()().diff(t,"hours");return a&&t?Object(r.jsx)(gn.a,{color:"blue",children:i}):!a&&t?n===Qt?Object(r.jsx)(gn.a,{color:i>=72?"error":i<72&&i>=24?"warning":i<24?"success":"",children:i}):n===Xt?Object(r.jsx)(gn.a,{color:i>=24?"error":i<24&&i>=12?"warning":i<12?"success":"",children:i}):Object(r.jsx)(gn.a,{children:"-"}):Object(r.jsx)(gn.a,{color:"blue",children:"-"})},wi=Pe.a.Text;function yi(e){var t=e.filtroTipo,n=void 0===t?[]:t,a=e.filtroTimeSlot,i=void 0===a?[]:a,o=e.abrirRegistro,c=e.listarOrdenes;return[{title:"#",width:50,fixed:"left",render:function(e,t,n){return n+1}},{title:"Tipo",dataIndex:"tipo",width:100,fixed:"left",filters:n||[],onFilter:function(e,t){return 0===t.tipo.indexOf(e)},render:function(e){return e?vn(e):"-"}},{title:"Requerimiento",dataIndex:"codigo_requerimiento",width:140,fixed:"left",render:function(e,t){return t.subtipo_actividad&&Jt.includes(t.subtipo_actividad)?Object(r.jsx)(wi,{copyable:!0,strong:!0,style:{color:"#003055"},children:Object(r.jsx)(gn.a,{color:"#108ee9",style:{fontSize:"1rem"},children:e})}):Object(r.jsx)(wi,{copyable:!0,strong:!0,children:e})}},{title:"Codigo Cliente",dataIndex:"codigo_cliente",width:120,fixed:"left",render:function(e){return Object(r.jsx)(wi,{copyable:!0,children:e})}},{averias:!0,altas:!0,title:"Time Slot",dataIndex:"tipo_agenda",width:100,align:"center",fixed:"right",filters:i?i.filter((function(e){return e.text})):[],onFilter:function(e,t){return!(!t.tipo_agenda||!e)&&0===t.tipo_agenda.indexOf(e)},render:function(e){return e?Object(r.jsx)(gn.a,{color:"#f50",children:e}):void 0}},{title:"Horas",dataIndex:"fecha_registro",width:80,align:"center",fixed:"right",sorter:function(e,t){return tt()().diff(e.fecha_registro,"hours")<tt()().diff(t.fecha_registro,"hours")?-1:tt()().diff(e.fecha_registro,"hours")>tt()().diff(t.fecha_registro,"hours")?1:0},render:function(e,t){return Object(r.jsx)(_i,{fecha:e,tipo:t.tipo,tipoAgenda:t.tipo_agenda})}},{title:"Acciones",dataIndex:"_id",width:80,align:"center",fixed:"right",render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(ji.a,{style:{fontSize:"1.5rem",marginRight:".5rem"},onClick:function(){return o(e)}}),Object(r.jsx)(vi,{row:t,listarOrdenes:c})]})}}]}function Si(e){var t=e.filtroDistrito,n=void 0===t?[]:t,a=e.filtroBucket,i=void 0===a?[]:a,o=e.filtroEstadoToa,c=void 0===o?[]:o,s=e.filtroEstadoGestor,l=void 0===s?[]:s,d=e.filtroContrata,u=void 0===d?[]:d,b=e.filtroTecnico,f=void 0===b?[]:b,j=e.filtroTecnicoAsignado,h=void 0===j?[]:j,p=e.filtroTipoRequerimiento,O=void 0===p?[]:p,g=e.filtroTipoTecnologia,x=void 0===g?[]:g,m=e.filtroCtr,v=void 0===m?[]:m,_=e.filtroNodo,w=void 0===_?[]:_,y=e.filtroTroba,S=void 0===y?[]:y,C=e.abrirReiterada,A=e.abrirInfancia;return[{key:"tipo_requerimiento",title:"Tipo Req.",dataIndex:"tipo_requerimiento",width:120,align:"center",filters:O||[],onFilter:function(e,t){return 0===t.tipo_requerimiento.indexOf(e)}},{key:"tipo_tecnologia",title:"Tecnologia",dataIndex:"tipo_tecnologia",width:120,filters:x||[],onFilter:function(e,t){return 0===t.tipo_tecnologia.indexOf(e)}},{key:"codigo_trabajo",title:"Orden Trabajo",dataIndex:"codigo_trabajo",width:120,render:function(e){return Object(r.jsx)(wi,{copyable:!0,children:e})}},{key:"codigo_peticion",title:"Peticion",dataIndex:"codigo_peticion",width:120,render:function(e){return Object(r.jsx)(wi,{copyable:!0,children:e})}},{key:"codigo_ctr",title:"CTR",dataIndex:"codigo_ctr",width:60,filters:v||[],onFilter:function(e,t){return 0===String(t.codigo_ctr).indexOf(String(e))}},{key:"codigo_nodo",title:"Nodo",dataIndex:"codigo_nodo",width:75,filters:w||[],onFilter:function(e,t){return 0===String(t.codigo_nodo).indexOf(String(e))}},{key:"codigo_troba",title:"Troba",dataIndex:"codigo_troba",width:90,filters:S||[],onFilter:function(e,t){return 0===String(t.codigo_troba).indexOf(String(e))},sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0}},{key:"numero_reiterada",title:"Reiterada",dataIndex:"numero_reiterada",width:100,align:"center",sorter:function(e,t){return e.numero_reiterada-t.numero_reiterada},render:function(e,t){return e&&"0"!==e&&"-"!==e?Object(r.jsx)(gn.a,{color:"#E5302F",onClick:function(){return C(t.codigo_cliente)},style:{cursor:"pointer"},children:e}):"-"}},{key:"infancia",title:"Infancia",dataIndex:"infancia",width:100,align:"center",filters:[{text:"Si",value:!0},{text:"No",value:!1}],onFilter:function(e,t){return e?t.infancia:!t.infancia},render:function(e){return e&&e.codigo_requerimiento?Object(r.jsx)(gn.a,{color:"blue",onClick:function(){return A(e)},style:{cursor:"pointer"},children:"Si"}):"-"}},{key:"distrito",title:"Distrito",dataIndex:"distrito",width:160,filters:n||[],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{key:"direccion",title:"Direcci\xf3n",dataIndex:"direccion",width:250,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{key:"bucket",title:"Bucket",dataIndex:"bucket",width:200,ellipsis:{showTitle:!1},filters:i||[],onFilter:function(e,t){return 0===t.bucket.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{key:"estado_toa",title:"Estado Toa",dataIndex:"estado_toa",width:150,align:"center",filters:c||[],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{key:"estado_gestor",title:"Estado Gestor",dataIndex:"estado_gestor",width:150,align:"center",filters:l||[],onFilter:function(e,t){return 0===t.estado_gestor.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{key:"contrata",title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filters:u||[],onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre:"-",children:e?e.nombre:"-"})}},{key:"tecnico",title:"Tecnico TOA",dataIndex:"tecnico",width:200,ellipsis:{showTitle:!1},filters:f||[],onFilter:function(e,t){return"-"===e?!t.tecnico:void 0!==t.tecnico&&0===t.tecnico._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{key:"tecnico_liteyca",title:"Tecnico Asignado",dataIndex:"tecnico_liteyca",width:200,ellipsis:{showTitle:!1},filters:h||[],onFilter:function(e,t){return"-"===e?!t.tecnico_liteyca:void 0!==t.tecnico_liteyca&&0===t.tecnico_liteyca._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{key:"observacion_gestor",title:"Observacion Gestor",dataIndex:"observacion_gestor",width:250,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsxs)(ln.a,{placement:"topLeft",title:e,children:[e," "]})}},{key:"tipo_agenda",title:"Time Slot",dataIndex:"tipo_agenda",width:100},{key:"fecha_cita",title:"Fecha Cita",dataIndex:"fecha_cita",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY"):"-"}},{key:"fecha_asignado",title:"Fecha Asignado",dataIndex:"fecha_asignado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{key:"fecha_registro",title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}}]}var Ci=Pe.a.Text;var Ai=function(e){var t=e.visible,n=e.abrir,i=e.orden,o=e.tipo,c=Object(a.useState)({}),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=Object(a.useState)(!1),b=Object(ae.a)(u,2),f=b[0],j=b[1];function h(){return(h=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return j(!0),e.next=3,pi(!1,{metodo:vt,id:i}).then((function(e){var t=e.data;d(t||{})})).catch((function(e){return console.log(e)})).finally((function(){return j(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){String(i).length>4&&function(){h.apply(this,arguments)}()}),[i]),o===Xt?Object(r.jsx)(Fn.a,{title:"Detalle Orden",visible:t,onCancel:n,onOk:n,width:"70vw",destroyOnClose:!0,centered:!0,children:f?Object(r.jsx)(ue.a,{spinning:!0}):Object(r.jsxs)(Tr.a,{bordered:!0,size:"small",children:[Object(r.jsx)(Tr.a.Item,{label:"Requerimiento",children:l&&l.codigo_requerimiento?l.codigo_requerimiento:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Codigo Cliente",children:l&&l.codigo_cliente?l.codigo_cliente:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Nodo",children:l&&l.codigo_nodo?l.codigo_nodo:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Distrito",children:l&&l.distrito?l.distrito:""}),Object(r.jsx)(Tr.a.Item,{label:"Telefono",children:l&&l.telefono_contacto?l.telefono_contacto:""}),Object(r.jsx)(Tr.a.Item,{label:"Referencia",children:l&&l.telefono_referencia?l.telefono_referencia:""}),Object(r.jsx)(Tr.a.Item,{label:"Tecnolog\xeda",children:l&&l.tipo_tecnologia?l.tipo_tecnologia:""}),Object(r.jsx)(Tr.a.Item,{label:"Fecha Cita",children:l&&l.fecha_cita?tt()(l.fecha_cita).format("DD/MM/YY"):"-"}),Object(r.jsx)(Tr.a.Item,{label:"Fecha Registro",children:l&&l.fecha_registro?tt()(l.fecha_registro).format("DD/MM/YY HH:mm"):"-"}),Object(r.jsx)(Tr.a.Item,{label:"Horas",children:l&&l.fecha_registro?Object(r.jsx)(_i,{fecha:l.fecha_registro,tipo:l.tipo,tipoAgenda:l.tipo_agenda}):"-"}),Object(r.jsx)(Tr.a.Item,{label:"Cliente",span:2,children:l&&l.nombre_cliente?l.nombre_cliente:""}),Object(r.jsx)(Tr.a.Item,{label:"Direcci\xf3n",span:3,children:l&&l.direccion?l.direccion:""}),Object(r.jsx)(Tr.a.Item,{label:"Detalle Trabajo",span:3,children:l&&l.detalle_trabajo?l.detalle_trabajo:""}),Object(r.jsx)(Tr.a.Item,{label:"Observacion Gestor",span:3,children:l&&l.observacion_gestor?l.observacion_gestor:""}),Object(r.jsx)(Tr.a.Item,{label:"Observacion Toa",span:3,children:l&&l.observacion_toa?l.observacion_toa:""})]})}):Object(r.jsx)(Fn.a,{title:"Detalle Orden",visible:t,onCancel:n,onOk:n,width:"70vw",destroyOnClose:!0,centered:!0,children:f?Object(r.jsx)(ue.a,{spinning:!0}):Object(r.jsxs)(Tr.a,{bordered:!0,size:"small",children:[Object(r.jsx)(Tr.a.Item,{label:"Requerimiento",children:l&&l.codigo_requerimiento?l.codigo_requerimiento:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Codigo Cliente",children:l&&l.codigo_cliente?l.codigo_cliente:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Codigo Peticion",children:l&&l.codigo_peticion?l.codigo_peticion:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Orden Trabajo",children:l&&l.codigo_trabajo?l.codigo_trabajo:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Tipo de Actividad",children:l&&l.subtipo_actividad?l.subtipo_actividad:"-"}),Object(r.jsx)(Tr.a.Item,{label:"Tecnolog\xeda",children:l&&l.tipo_tecnologia?l.tipo_tecnologia:""}),Object(r.jsx)(Tr.a.Item,{label:"Fecha Cita",children:l&&l.fecha_cita?tt()(l.fecha_cita).format("DD/MM/YY"):"-"}),Object(r.jsx)(Tr.a.Item,{label:"Cliente",span:2,children:l&&l.nombre_cliente?l.nombre_cliente:""}),Object(r.jsx)(Tr.a.Item,{label:"Detalle Trabajo",span:3,children:l&&l.detalle_trabajo?l.detalle_trabajo:""}),Object(r.jsx)(Tr.a.Item,{label:"Observacion Gestor",span:3,children:l&&l.observacion_gestor?l.observacion_gestor:""}),Object(r.jsx)(Tr.a.Item,{label:"Observacion Toa",span:3,children:l&&l.observacion_toa?l.observacion_toa:""})]})})},Ii=n(622);var ki=function(e){var t=e.visible,n=e.abrir,i=e.columnasBase,o=e.columnasUsuario,c=void 0===o?[]:o,s=e.guardar,l=Object(a.useState)([]),d=Object(ae.a)(l,2),u=d[0],b=d[1];Object(a.useEffect)((function(){c&&c.length>0&&b(c)}),[c]);var f=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s(u);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(Fn.a,{title:"Configurar Columnas",visible:t,width:550,onCancel:n,onOk:f,centered:!0,children:[Object(r.jsx)("p",{children:"Seleccionar columnas"}),Object(r.jsx)(Ii.a,{dataSource:i,targetKeys:u,titles:["Disponibles","Usuario"],listStyle:{width:300,height:600},onChange:function(e){return b(e)},render:function(e){return e.title}})]})};var Ti=function(e){var t=e.asignadas,n=void 0!==t&&t,i=e.data,o=e.loading,c=e.ordenesSeleccionadas,s=e.setOrdenesSeleccionadas,l=e.abrirReiterada,d=e.abrirInfancia,u=e.abrirRegistro,b=e.listarOrdenes,f=Object(a.useState)([]),j=Object(ae.a)(f,2),h=j[0],p=j[1],O=Object(a.useState)([]),g=Object(ae.a)(O,2),x=g[0],m=g[1],v=Object(a.useState)([]),_=Object(ae.a)(v,2),w=_[0],y=_[1],S=Object(a.useState)([]),C=Object(ae.a)(S,2),A=C[0],I=C[1],k=Object(a.useState)([]),T=Object(ae.a)(k,2),E=T[0],R=T[1],M=Object(a.useState)([]),L=Object(ae.a)(M,2),z=L[0],q=L[1],F=Object(a.useState)([]),P=Object(ae.a)(F,2),Y=P[0],G=P[1],H=Object(a.useState)([]),U=Object(ae.a)(H,2),V=U[0],K=U[1],Z=Object(a.useState)([]),J=Object(ae.a)(Z,2),W=J[0],X=J[1],Q=Object(a.useState)([]),$=Object(ae.a)(Q,2),ee=$[0],te=$[1],ne=Object(a.useState)([]),re=Object(ae.a)(ne,2),ie=re[0],oe=re[1],ce=Object(a.useState)([]),se=Object(ae.a)(ce,2),le=se[0],de=se[1],ue=Object(a.useState)([]),be=Object(ae.a)(ue,2),fe=be[0],je=be[1],he=Object(a.useState)([]),pe=Object(ae.a)(he,2),Oe=pe[0],ge=pe[1],xe=Object(a.useState)([]),me=Object(ae.a)(xe,2),ve=me[0],_e=me[1],we=Object(a.useState)(null),ye=Object(ae.a)(we,2),Se=ye[0],Ce=ye[1],Ae=Object(a.useState)(!1),Ie=Object(ae.a)(Ae,2),ke=Ie[0],Te=Ie[1],Ee=Object(a.useState)(!1),Re=Object(ae.a)(Ee,2),De=Re[0],Ne=Re[1],Me=Object(a.useState)(null),Le=Object(ae.a)(Me,2),ze=Le[0],qe=Le[1];function Fe(){return Pe.apply(this,arguments)}function Pe(){return(Pe=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!0,At.EMPLEADOS_LISTAR_COLUMNAS).then((function(e){var t=e.data;t&&t.columnas&&p(t.columnas)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ne(!1),e.next=3,ot(!0,{columnas:t,metodo:At.EMPLEADOS_ACTUALIZAR_COLUMNAS}).then((function(){return Fe()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){Fe()}),[]),Object(a.useEffect)((function(){h&&h.length>0&&Ve()}),[h]),Object(a.useEffect)((function(){Ue(i)}),[i]);var Ge=function(){return Te(!ke)},He=function(){return Ne(!De)},Ue=function(e){e&&e.length>0&&(m(Br(e,"distrito")),y(Br(e,"bucket")),I(Br(e,"estado_toa")),R(Br(e,"estado_gestor")),te(Br(e,"tipo_requerimiento")),oe(Br(e,"tipo_tecnologia")),de(Br(e,"codigo_ctr")),je(Br(e,"codigo_nodo")),ge(Br(e,"codigo_troba")),_e(Br(e,"tipo_agenda")),q(Pr(e,"contrata")),G(Pr(e,"tecnico")),K(Pr(e,"tecnico_liteyca")),X(Br(e,"tipo",!0)))},Ve=function(){return n?function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0,n=t.filtroTipo,r=void 0===n?[]:n,a=t.filtroDistrito,i=void 0===a?[]:a,o=t.filtroBucket,c=void 0===o?[]:o,s=t.filtroEstadoToa,l=void 0===s?[]:s,d=t.filtroEstadoGestor,u=void 0===d?[]:d,b=t.filtroContrata,f=void 0===b?[]:b,j=t.filtroTecnico,h=void 0===j?[]:j,p=t.filtroTecnicoAsignado,O=void 0===p?[]:p,g=t.filtroTipoRequerimiento,x=void 0===g?[]:g,m=t.filtroTipoTecnologia,v=void 0===m?[]:m,_=t.filtroCtr,w=void 0===_?[]:_,y=t.filtroNodo,S=void 0===y?[]:y,C=t.filtroTroba,A=void 0===C?[]:C,I=t.filtroTimeSlot,k=void 0===I?[]:I,T=t.abrirReiterada,E=t.abrirInfancia,R=t.abrirRegistro,D=t.listarOrdenes;if(e&&e.length>0){var N=[];e.forEach((function(e){var t=Si({filtroDistrito:i,filtroBucket:c,filtroEstadoToa:l,filtroEstadoGestor:u,filtroContrata:f,filtroTecnico:h,filtroTecnicoAsignado:O,filtroTipoRequerimiento:x,filtroTipoTecnologia:v,filtroCtr:w,filtroNodo:S,filtroTroba:A,abrirReiterada:T,abrirInfancia:E}).findIndex((function(t){return t.dataIndex===e}));t>-1&&N.push(Si({filtroDistrito:i,filtroBucket:c,filtroEstadoToa:l,filtroEstadoGestor:u,filtroContrata:f,filtroTecnico:h,filtroTecnicoAsignado:O,filtroTipoRequerimiento:x,filtroTipoTecnologia:v,filtroCtr:w,filtroNodo:S,filtroTroba:A,abrirReiterada:T,abrirInfancia:E})[t])}));var M=N.filter((function(e){return e})),L=yi({filtroTipo:r,filtroTimeSlot:k,abrirRegistro:R,listarOrdenes:D});return L.splice.apply(L,[4,0].concat(Object(Ke.a)(M))),L}var z=yi({filtroTipo:r,filtroTimeSlot:k,abrirRegistro:R,listarOrdenes:D});return z.splice.apply(z,[4,0].concat(Object(Ke.a)(Si({filtroDistrito:i,filtroBucket:c,filtroEstadoToa:l,filtroEstadoGestor:u,filtroContrata:f,filtroTecnico:h,filtroTecnicoAsignado:O,filtroTipoRequerimiento:x,filtroTipoTecnologia:v,filtroCtr:w,filtroNodo:S,filtroTroba:A,abrirReiterada:T,abrirInfancia:E})))),z}(h,{filtroDistrito:x,filtroTipo:W,filtroBucket:w,filtroEstadoToa:A,filtroEstadoGestor:E,filtroContrata:z,filtroTecnico:Y,filtroTecnicoAsignado:V,filtroTipoRequerimiento:ee,filtroTipoTecnologia:ie,filtroCtr:le,filtroNodo:fe,filtroTimeSlot:ve,filtroTroba:Oe,abrirReiterada:l,abrirInfancia:d,abrirRegistro:u,listarOrdenes:b}):function(){var e=arguments.length>13&&void 0!==arguments[13]?arguments[13]:[],t=arguments.length>14?arguments[14]:void 0,n=arguments.length>15?arguments[15]:void 0,a=arguments.length>16?arguments[16]:void 0,i=arguments.length>17?arguments[17]:void 0;return[{title:"#",width:50,fixed:"left",render:function(e,t,n){return n+1}},{title:"Tipo",dataIndex:"tipo",width:100,fixed:"left",filters:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[],onFilter:function(e,t){return 0===t.tipo.indexOf(e)},render:function(e){return e?vn(e):"-"}},{title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,fixed:"left",render:function(e,t){return t.subtipo_actividad&&Jt.includes(t.subtipo_actividad)?{props:{style:{background:"#CCE9FF"}},children:Object(r.jsx)(Ci,{copyable:!0,strong:!0,style:{color:"#003055"},children:e})}:Object(r.jsx)(Ci,{copyable:!0,strong:!0,children:e})}},{title:"Codigo Cliente",dataIndex:"codigo_cliente",width:120,fixed:"left",render:function(e){return Object(r.jsx)(Ci,{copyable:!0,children:e})}},{title:"Tipo Req.",dataIndex:"tipo_requerimiento",width:120,align:"center",filters:(arguments.length>8&&void 0!==arguments[8]?arguments[8]:[])||[],onFilter:function(e,t){return 0===t.tipo_requerimiento.indexOf(e)}},{title:"Tecnologia",dataIndex:"tipo_tecnologia",width:120,filters:(arguments.length>9&&void 0!==arguments[9]?arguments[9]:[])||[],onFilter:function(e,t){return 0===t.tipo_tecnologia.indexOf(e)}},{title:"Orden Trabajo",dataIndex:"codigo_trabajo",width:120,render:function(e){return Object(r.jsx)(Ci,{copyable:!0,children:e})}},{title:"Peticion",dataIndex:"codigo_peticion",width:120,render:function(e){return Object(r.jsx)(Ci,{copyable:!0,children:e})}},{title:"CTR",dataIndex:"codigo_ctr",width:60,filters:(arguments.length>10&&void 0!==arguments[10]?arguments[10]:[])||[],onFilter:function(e,t){return 0===String(t.codigo_ctr).indexOf(String(e))}},{title:"Nodo",dataIndex:"codigo_nodo",width:75,filters:(arguments.length>11&&void 0!==arguments[11]?arguments[11]:[])||[],onFilter:function(e,t){return 0===String(t.codigo_nodo).indexOf(String(e))}},{title:"Troba",dataIndex:"codigo_troba",width:90,filters:(arguments.length>12&&void 0!==arguments[12]?arguments[12]:[])||[],onFilter:function(e,t){return 0===String(t.codigo_troba).indexOf(String(e))},sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0}},{title:"Reiterada",dataIndex:"numero_reiterada",width:100,align:"center",sorter:function(e,t){return e.numero_reiterada-t.numero_reiterada},render:function(e,n){return e&&"0"!==e&&"-"!==e?Object(r.jsx)(gn.a,{color:"#E5302F",onClick:function(){return t(n.codigo_cliente)},style:{cursor:"pointer"},children:e}):"-"}},{title:"Infancia",dataIndex:"infancia",width:100,align:"center",filters:[{text:"Si",value:!0},{text:"No",value:!1}],onFilter:function(e,t){return e?t.infancia:!t.infancia},render:function(e){return e&&e.codigo_requerimiento?Object(r.jsx)(gn.a,{color:"blue",onClick:function(){return n(e)},style:{cursor:"pointer"},children:"Si"}):"-"}},{title:"Distrito",dataIndex:"distrito",width:160,filters:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])||[],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{title:"Bucket",dataIndex:"bucket",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])||[],onFilter:function(e,t){return 0===t.bucket.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Estado Toa",dataIndex:"estado_toa",width:150,align:"center",filters:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])||[],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Estado Gestor",dataIndex:"estado_gestor",width:150,align:"center",filters:(arguments.length>4&&void 0!==arguments[4]?arguments[4]:[])||[],onFilter:function(e,t){return 0===t.estado_gestor.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>5&&void 0!==arguments[5]?arguments[5]:[])||[],onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre:"-",children:e?e.nombre:"-"})}},{title:"Tecnico TOA",dataIndex:"tecnico",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>6&&void 0!==arguments[6]?arguments[6]:[])||[],onFilter:function(e,t){return"-"===e?!t.tecnico:void 0!==t.tecnico&&0===t.tecnico._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{title:"Tecnico Asignado",dataIndex:"tecnico_liteyca",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>7&&void 0!==arguments[7]?arguments[7]:[])||[],onFilter:function(e,t){return"-"===e?!t.tecnico_liteyca:void 0!==t.tecnico_liteyca&&0===t.tecnico_liteyca._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{title:"Observacion Gestor",dataIndex:"observacion_gestor",width:250,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsxs)(ln.a,{placement:"topLeft",title:e,children:[e," "]})}},{title:"Fecha Cita",dataIndex:"fecha_cita",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY"):"-"}},{title:"Fecha Asignado",dataIndex:"fecha_asignado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Time Slot",dataIndex:"tipo_agenda",width:100,align:"center",fixed:"right",filters:e?e.filter((function(e){return e.text})):[],onFilter:function(e,t){return!(!t.tipo_agenda||!e)&&0===t.tipo_agenda.indexOf(e)},render:function(e){return e?Object(r.jsx)(gn.a,{color:"#f50",children:e}):void 0}},{title:"Horas",dataIndex:"fecha_registro",width:80,align:"center",fixed:"right",sorter:function(e,t){return tt()().diff(e.fecha_registro,"hours")<tt()().diff(t.fecha_registro,"hours")?-1:tt()().diff(e.fecha_registro,"hours")>tt()().diff(t.fecha_registro,"hours")?1:0},render:function(e,t){return Object(r.jsx)(_i,{fecha:e,tipo:t.tipo,tipoAgenda:t.tipo_agenda})}},{title:"Acciones",dataIndex:"_id",width:80,align:"center",fixed:"right",render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(ji.a,{style:{fontSize:"1.5rem",marginRight:".5rem"},onClick:function(){return a(e)}}),Object(r.jsx)(vi,{row:t,listarOrdenes:i})]})}}]}(x,W,w,A,E,z,Y,V,ee,ie,le,fe,Oe,ve,l,d,u,b)};return Object(r.jsxs)("div",{children:[Object(r.jsx)(hn.a,{rowKey:"_id",onRow:function(e){return{onDoubleClick:function(){return function(e,t){Ce(e),qe(t),Ge()}(e._id,e.tipo)}}},rowSelection:{columnWidth:50,selectedRowKeys:c,onChange:function(e){return s(e)}},columns:Ve(),dataSource:i,loading:o,size:"small",scroll:{y:"65vh"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]},footer:function(){return n?Object(r.jsx)(B.a,{icon:Object(r.jsx)(Be.a,{}),onClick:He,type:"primary",children:"Preferencias"}):null}}),Object(r.jsx)(Ai,{visible:ke,abrir:Ge,orden:Se,tipo:ze}),Object(r.jsx)(ki,{visible:De,abrir:He,columnasBase:Si({filtroContrata:z,filtroEstadoGestor:E,filtroEstadoToa:A,filtroBucket:w,filtroDistrito:x,filtroCtr:le,filtroNodo:fe,filtroTroba:Oe,filtroTecnico:Y,filtroTecnicoAsignado:V,filtroTipoRequerimiento:ee,filtroTipoTecnologia:ie}),columnasUsuario:h,guardar:function(e){return Ye.apply(this,arguments)}})]})},Ei=n(669);var Ri=function(e){var t=e.visible,n=e.abrir,i=e.loading,o=e.registros,c=Object(a.useState)(!1),s=Object(ae.a)(c,2),l=s[0],d=s[1],u=Object(a.useState)(""),b=Object(ae.a)(u,2),f=b[0],j=b[1],h=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t&&(d(!0),j(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),p=[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Usuario",dataIndex:"usuario_entrada",width:180,render:function(e){return e?e.nombre+" "+e.apellidos:"-"}},{title:"Estado Orden",dataIndex:"estado_orden",width:120,render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Empleado Modificado",dataIndex:"empleado_modificado",width:200,render:function(e){return e?e.nombre+" "+e.apellidos:"-"}},{title:"Empleado Tipo",dataIndex:"empleado_modificado",width:150,render:function(e){return e&&e.usuario&&e.usuario.cargo?Object(r.jsx)(Ir,{cargo:e.usuario.cargo}):"-"}},{title:"Contrata Modificado",dataIndex:"contrata_modificado",width:150,render:function(e){return e?e.nombre:"-"}},{title:"Observacion",dataIndex:"observacion",width:300},{title:"Fecha Entrada",dataIndex:"fecha_entrada",width:150,render:function(e){return e?tt()(e).format("DD-MM-YYYY HH:mm"):"-"}},{title:"Imagenes",dataIndex:"imagenes",width:100,render:function(e){if(e&&e.length>0)return e.map((function(e,t){return Object(r.jsx)(Ei.a,{onClick:function(){return h(e.url)},style:{marginRight:".5rem",marginBottom:".5rem",fontSize:"1.2rem"}},t)}))}}];return Object(r.jsxs)(Fn.a,{title:"Historial de Notas",visible:t,onCancel:n,onOk:n,width:"90vw",destroyOnClose:!0,centered:!0,children:[Object(r.jsx)(hn.a,{rowKey:"_id",columns:p,dataSource:o,loading:i,size:"small",pagination:!1,scroll:{x:"80vw"}}),Object(r.jsx)(Fn.a,{visible:l,footer:null,onCancel:function(){return d(!l)},children:Object(r.jsx)("img",{alt:"example",style:{width:"100%"},src:f})})]})},Di=Pe.a.Text;var Ni=function(e){var t=e.visible,n=e.abrir,a=e.loading,i=e.orden,o=[{title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,render:function(e){return e?Object(r.jsx)(Di,{copyable:!0,children:e}):"-"}},{title:"CTR",dataIndex:"codigo_ctr",width:80},{title:"Tecnico",dataIndex:"tecnico_liquidado",width:180,render:function(e,t){return e?e.nombre+" "+e.apellidos:t.carnet_liquidado?t.carnet_liquidado:"-"}},{title:"Carnet",dataIndex:"tecnico_liquidado",width:180,render:function(e){return e?Object(r.jsx)(Di,{copyable:!0,children:e.carnet}):"-"}},{title:"Gestor",dataIndex:"tecnico_liquidado",width:180,render:function(e){return e&&e.gestor&&e.gestor.nombre?e.gestor.nombre+" "+e.gestor.apellidos:"-"}},{title:"Estado Gestor",dataIndex:"estado_gestor",width:120,render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD-MM-YYYY HH:mm"):"-"}},{title:"Fecha Liquidado",dataIndex:"fecha_liquidado",width:150,render:function(e){return e?tt()(e).format("DD-MM-YYYY HH:mm"):"-"}}];return Object(r.jsx)(Fn.a,{title:"Orden de Infancia",visible:t,onCancel:n,onOk:n,width:"90vw",destroyOnClose:!0,centered:!0,children:Object(r.jsx)(hn.a,{rowKey:"_id",columns:o,dataSource:i,loading:a,size:"small",pagination:!1,scroll:{x:"80vw"}})})},Mi=Pe.a.Text;var Li=function(e){var t=e.abrir,n=e.visible,i=e.codigo_cliente,o=Object(a.useState)(!1),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)([]),u=Object(ae.a)(d,2),b=u[0],f=u[1];function j(){return(j=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return l(!0),e.next=3,pi(!0,{metodo:gt,codigo_cliente:i}).then((function(e){var t=e.data;t&&f(t)})).catch((function(e){return console.log(e)})).finally((function(){return l(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){i&&function(){j.apply(this,arguments)}()}),[i]);var h=[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,render:function(e){return Object(r.jsx)(Mi,{copyable:!0,children:e})}},{title:"CTR",dataIndex:"codigo_ctr",width:70},{title:"Descripcion CTR",dataIndex:"descripcion_ctr",width:180,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Cliente",dataIndex:"nombre_cliente",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{title:"Contrata",dataIndex:"tecnico_liquidado",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e&&e.contrata?e.contrata.nombre:"-",children:e&&e.contrata?e.contrata.nombre:"-"})}},{title:"Gestor",dataIndex:"tecnico_liquidado",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e&&e.gestor?e.gestor.nombre+" "+e.gestor.apellidos:"-",children:e?e.gestor.nombre+" "+e.gestor.apellidos:"-"})}},{title:"Tecnico",dataIndex:"tecnico_liquidado",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Fecha Liquidacion",dataIndex:"fecha_liquidado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Estado Liquidado",dataIndex:"estado_liquidado",width:150,render:function(e){return Object(r.jsx)(hi,{estado:e})}}];return Object(r.jsx)(Fn.a,{title:"Lista de Reiteradas",visible:n,onCancel:t,onOk:t,width:"90vw",centered:!0,children:Object(r.jsx)(hn.a,{rowKey:"_id",dataSource:b,columns:h,loading:s,size:"small",scroll:{y:"65vh"},pagination:{defaultPageSize:50}})})},zi=n(618),qi=n(670);function Fi(e){return new Promise((function(t,n){var r=new FileReader;r.readAsDataURL(e),r.onload=function(){return t(r.result)},r.onerror=function(e){return n(e)}}))}var Pi=Je.a.Option,Bi=P.a.TextArea;var Yi=function(e){var t=e.visible,n=e.abrir,i=e.actualizarEstado,o=Object(a.useState)(null),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)(null),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)([]),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)(!1),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(""),w=Object(ae.a)(_,2),y=w[0],S=w[1];function C(){return(C=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i(s,b,p);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){l(null),f(null),O([])}),[]);var A=function(){var e=Object(N.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Fi(t.originFileObj);case 3:n=e.sent,v(!0),S(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0);case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)(Fn.a,{title:"Editar estado de la orden",visible:t,onOk:function(){return C.apply(this,arguments)},onCancel:n,width:300,destroyOnClose:!0,centered:!0,children:[Object(r.jsxs)(Je.a,{placeholder:"Seleccionar estado",defaultValue:s,onChange:function(e){return l(e)},style:{width:250,marginBottom:".5rem"},children:[Object(r.jsx)(Pi,{value:ei,children:vn(ei)}),Object(r.jsx)(Pi,{value:ni,children:vn(ni)}),Object(r.jsx)(Pi,{value:ti,children:vn(ti)}),Object(r.jsx)(Pi,{value:ri,children:vn(ri)}),Object(r.jsx)(Pi,{value:ai,children:vn(ai)}),Object(r.jsx)(Pi,{value:ii,children:vn(ii)}),Object(r.jsx)(Pi,{value:oi,children:vn(oi)}),Object(r.jsx)(Pi,{value:ci,children:vn(ci)}),Object(r.jsx)(Pi,{value:li,children:vn(li)}),Object(r.jsx)(Pi,{value:di,children:vn(di)})]}),Object(r.jsx)(Bi,{placeholder:"Observacion",defaultValue:b,rows:4,onChange:function(e){return f(e.target.value)},style:{marginBottom:".5rem"}}),Object(r.jsx)("div",{style:{marginBottom:".5rem"},children:"Adjuntar im\xe1genes:"}),Object(r.jsxs)(zi.a,{accept:".jpg,.png,.jpeg",listType:"picture-card",beforeUpload:function(e){var t=p;return e.status="done",t.push(e),O(t),!1},onRemove:function(e){var t=p.filter((function(t){return t.uid!==e.uid}));O(t)},onPreview:A,multiple:!0,children:[Object(r.jsx)(qi.a,{})," ","Imagen"]}),Object(r.jsx)(Fn.a,{visible:m,footer:null,onCancel:function(){return v(!m)},children:Object(r.jsx)("img",{alt:"example",style:{width:"100%"},src:y})})]})},Gi=Je.a.Option,Hi=P.a.TextArea;var Ui=function(e){var t=e.visible,n=e.abrir,i=e.buckets,o=void 0===i?[]:i,c=e.tecnicos,s=void 0===c?[]:c,l=e.agendar,d=Object(a.useState)(null),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)(null),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)(null),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(null),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)(null),A=Object(ae.a)(C,2),I=A[0],k=A[1],T=Object(a.useState)(!1),E=Object(ae.a)(T,2),R=E[0],M=E[1];Object(a.useEffect)((function(){f(null),O(null),v(null),S(null),k(null)}),[]);var L=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return M(!0),e.next=3,l(b,p,m,y,I);case 3:M(!1),n();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(Fn.a,{title:"Agendar Orden",width:400,visible:t,onCancel:n,onOk:L,confirmLoading:!0,destroyOnClose:!0,centered:!0,footer:[Object(r.jsx)(B.a,{onClick:n,children:"Cancelar"},"back"),Object(r.jsx)(B.a,{type:"primary",loading:R,onClick:L,children:"Aceptar"},"submit")],children:[Object(r.jsx)(Je.a,{placeholder:"Seleccionar Bucket",style:{width:300,marginBottom:".5rem"},onChange:function(e){return f(e)},defaultValue:b,children:o&&o.length>0?o.map((function(e,t){return Object(r.jsx)(Gi,{value:e.value,children:e.text},t)})):Object(r.jsx)(Gi,{children:"Sin data"})}),Object(r.jsx)(Je.a,{showSearch:!0,placeholder:"Seleccionar Tecnico",style:{width:300,marginBottom:".5rem"},onChange:function(e){return O(s[t=e].contrata._id),void v(s[t]._id);var t},defaultValue:m,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:s&&s.length>0?s.map((function(e,t){return Object(r.jsx)(Gi,{value:t,children:e&&e.nombre+" "+e.apellidos},t)})):Object(r.jsx)(Gi,{children:"Sin data"})}),Object(r.jsx)(Xe.a,{placeholder:"Seleccionar fecha de cita",style:{width:300,marginBottom:".5rem"},onChange:function(e){return S(e.utc().format("YYYY-MM-DD HH:mm"))}}),Object(r.jsx)(Hi,{rows:4,style:{width:300},defaultValue:I,placeholder:"Observacion",onChange:function(e){return k(e.target.value)}})]})},Vi=n(623),Ki=Je.a.Option,Zi=P.a.TextArea;var Ji=function(e){var t=e.tipo,n=void 0!==t&&t,i=e.visible,o=e.abrir,c=e.contratas,s=void 0===c?[]:c,l=e.gestores,d=void 0===l?[]:l,u=e.tecnicos,b=void 0===u?[]:u,f=e.asignar,j=Object(a.useState)(null),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)(null),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(null),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)([]),A=Object(ae.a)(C,2),I=A[0],k=A[1],T=Object(a.useState)(null),E=Object(ae.a)(T,2),R=E[0],M=E[1],L=Object(a.useState)(1),z=Object(ae.a)(L,2),q=z[0],F=z[1];Object(a.useEffect)((function(){B()}),[b]),Object(a.useEffect)((function(){v(null),S(null)}),[]),Object(a.useEffect)((function(){v(null),S(null)}),[q]);var P=function(){var e=Object(N.a)(D.a.mark((function e(){var t,r,a,i;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!n){e.next=16;break}if(1!==q||!m){e.next=6;break}return e.next=4,f({gestor:m,observacion:R});case 4:e.next=14;break;case 6:if(!(2===q&&null!==y&&void 0!==y&&b.length>0&&y>=0)){e.next=13;break}return r={tecnico:b[t=y]?b[t]._id:null,auditor:b[t]&&b[t].auditor?b[t].auditor._id:null,gestor:b[t]&&b[t].gestor?b[t].gestor._id:null,contrata:b[t]&&b[t].contrata?b[t].contrata._id:null,observacion:R},e.next=11,f(r);case 11:e.next=14;break;case 13:V.a.warn("Error asignando (cliente/gestor).",{position:"top-right"});case 14:e.next=34;break;case 16:if(1!==q||!p){e.next=21;break}return e.next=19,f({contrata:p,observacion:R});case 19:e.next=34;break;case 21:if(2!==q||!m){e.next=26;break}return e.next=24,f({gestor:m,observacion:R});case 24:e.next=34;break;case 26:if(!(2===q&&y&&b.length>0&&y>=0)){e.next=33;break}return i={tecnico_liteyca:b[a=y]?b[a]._id:null,auditor:b[a]&&b[a].auditor?b[a].auditor._id:null,gestor_liteyca:b[a]&&b[a].gestor?b[a].gestor._id:null,contrata:b[a]&&b[a].contrata?b[a].contrata._id:null,observacion:R},e.next=31,f(i);case 31:e.next=34;break;case 33:V.a.warn("Error asignando (cliente/lider).",{position:"top-right"});case 34:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),B=function(){if(b&&b.length>0){var e=[],t=[];b.forEach((function(t){t&&t.gestor&&t.gestor.nombre&&!e.includes(t.gestor.nombre+" "+t.gestor.apellidos)&&e.push(t.gestor.nombre+" "+t.gestor.apellidos)})),e.filter((function(e){return e})).forEach((function(e){var n=b.filter((function(t){return t.gestor&&t.gestor.nombre&&t.gestor.nombre+" "+t.gestor.apellidos===e}));t.push({value:e,label:e,children:n.map((function(e){return{value:b.findIndex((function(t){return t._id===e._id})),label:e.nombre+" "+e.apellidos}}))})})),k(t.filter((function(e){return e})))}};return n?Object(r.jsxs)(Fn.a,{title:"Asignar Orden",visible:i,onCancel:o,onOk:P,width:550,destroyOnClose:!0,centered:!0,children:[Object(r.jsx)("p",{children:"Asignar por Gestor o T\xe9cnico:"}),Object(r.jsxs)(Qe.a.Group,{onChange:function(e){return F(e.target.value)},defaultValue:q,style:{marginBottom:"1rem"},children:[Object(r.jsx)(Qe.a,{value:1,children:"Gestor"}),Object(r.jsx)(Qe.a,{value:2,children:"Tecnico"})]}),1===q?Object(r.jsx)(Je.a,{showSearch:!0,value:m,placeholder:"Seleccionar Gestor",style:{width:350,marginBottom:".5rem"},onChange:function(e){return v(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:d&&d.length>0?d.map((function(e){return Object(r.jsx)(Ki,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},e._id)})):Object(r.jsx)(Ki,{children:"No data"})}):Object(r.jsx)(Vi.a,{options:I,onChange:function(e,t){return S(t&&t[1]?t[1].value:null)},placeholder:"Seleccionar Tecnico",style:{width:500,marginBottom:".5rem"},showSearch:{filter:function(e,t){return t.some((function(t){return t.label.toLowerCase().indexOf(e.toLowerCase())>-1}))}}}),Object(r.jsx)(Zi,{placeholder:"Observaci\xf3n",onChange:function(e){return M(e.target.value)},rows:5,style:{width:500}})]}):Object(r.jsxs)(Fn.a,{title:"Asignar Orden",visible:i,onCancel:o,onOk:P,width:500,destroyOnClose:!0,centered:!0,children:[Object(r.jsx)("p",{children:"Asignar por Contrata, Gestor o T\xe9cnico:"}),Object(r.jsxs)(Qe.a.Group,{onChange:function(e){return F(e.target.value)},defaultValue:q,style:{marginBottom:"1rem"},children:[Object(r.jsx)(Qe.a,{value:1,children:"Contrata"}),Object(r.jsx)(Qe.a,{value:2,children:"Gestor"}),Object(r.jsx)(Qe.a,{value:3,children:"Tecnico"})]}),1===q?Object(r.jsx)(Je.a,{showSearch:!0,value:p,placeholder:"Seleccionar Contrata",style:{width:350,marginBottom:".5rem"},onChange:function(e){return O(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:s&&s.length>0?s.map((function(e){return Object(r.jsx)(Ki,{value:e._id,children:e.nombre},e._id)})):Object(r.jsx)(Ki,{children:"No data"})}):2===q?Object(r.jsx)(Je.a,{showSearch:!0,value:m,placeholder:"Seleccionar Gestor",style:{width:350,marginBottom:".5rem"},onChange:function(e){return v(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:d&&d.length>0?d.map((function(e){return Object(r.jsx)(Ki,{value:e._id,children:"".concat(e.nombre," ").concat(e.apellidos)},e._id)})):Object(r.jsx)(Ki,{children:"No data"})}):Object(r.jsx)(Je.a,{showSearch:!0,value:y,placeholder:"Seleccionar Tecnico",style:{width:350,marginBottom:".5rem"},onChange:function(e){return S(e)},filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:b&&b.length>0?b.map((function(e,t){return Object(r.jsx)(Ki,{value:t,children:"".concat(e.nombre," ").concat(e.apellidos)},e._id)})):Object(r.jsx)(Ki,{children:"No data"})}),Object(r.jsx)(Zi,{placeholder:"Observaci\xf3n",onChange:function(e){return M(e.target.value)},rows:4,style:{width:350}})]})},Wi=function(e){switch(e){case"cancelado":return{background:qn.grey[1],color:qn.grey.primary};case"completado":case ai:return{background:qn.green[1],color:qn.green.primary};case ti:return{background:qn.blue[1],color:qn.blue.primary};case ni:return{background:qn.cyan[1],color:qn.cyan.primary};case"iniciado":return{background:qn.geekblue[1],color:qn.geekblue.primary};case"no realizada":return{background:qn.magenta[1],color:qn.magenta.primary};case ei:return{background:qn.orange[1],color:qn.orange.primary};case ii:case di:return{background:qn.red[1],color:qn.red.primary};case li:case si:return{background:qn.purple[1],color:qn.purple.primary};case"efectiva":return{background:qn.green[1],color:qn.green.primary};case"inefectiva":return{background:qn.red[1],color:qn.red.primary};case"no_corresponde":return{background:"#DBDBDB",color:qn.grey.primary};default:return{background:"",color:""}}},Xi=function(e,t,n){return n&&"-"!==n?{background:qn.blue[1],color:qn.blue.primary}:t===Xt?Number(e)<12?{background:qn.green[1],color:qn.green.primary}:Number(e)>=12&&Number(e)<24?{background:qn.orange[1],color:qn.orange.primary}:Number(e)>=24?{background:qn.red[1],color:qn.red.primary}:{background:"",color:""}:t===Qt?Number(e)<24?{background:qn.green[1],color:qn.green.primary}:Number(e)>=24&&Number(e)<72?{background:qn.orange[1],color:qn.orange.primary}:Number(e)>=72?{background:qn.red[1],color:qn.red.primary}:{background:"",color:""}:{background:"",color:""}},Qi=function(e,t){return t&&"-"!==t?{background:qn.blue[1],color:qn.blue.primary}:Number(e)<1?{background:qn.green[1],color:qn.green.primary}:Number(e)>=1&&Number(e)<5?{background:qn.orange[1],color:qn.orange.primary}:Number(e)>=5?{background:qn.red[1],color:qn.red.primary}:{background:"",color:""}};var $i=function(e){var t=e.metodo,n=e.tipo,i=e.setLoading,o=e.ordenesSeleccionadas,s=void 0===o?[]:o,l=Object(a.useState)([]),d=Object(ae.a)(l,2),u=d[0],b=d[1],f=Object(a.useRef)(null);function j(e){return h.apply(this,arguments)}function h(){return(h=Object(N.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r||!(s.length<=0)){e.next=2;break}return e.abrupt("return");case 2:return i(!0),e.next=5,pi(!0,{metodo:t,todo:r,tipo:n,id_ordenes:s}).then(function(){var e=Object(N.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!((n=t.data)&&n.length>0)){e.next=5;break}return e.next=4,b(n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{infancia_registro:e.infancia&&e.infancia.fecha_registro?tt()(e.infancia.fecha_registro).format("DD/MM/YY HH:mm"):"-",infancia_liquidado:e.infancia&&e.infancia.fecha_liquidado?tt()(e.infancia.fecha_liquidado).format("DD/MM/YY HH:mm"):"-",fecha_cita:e.fecha_cita?tt()(e.fecha_cita).format("DD/MM/YY"):"-",fecha_registro:e.fecha_registro?tt()(e.fecha_registro).format("DD/MM/YY HH:mm"):"-",fecha_asignado:e.fecha_asignado?tt()(e.fecha_asignado).format("DD/MM/YY HH:mm"):"-",horas_registro:e.fecha_registro?tt()().diff(e.fecha_registro,"hours"):"-",horas_asignado:e.fecha_asignado?tt()().diff(e.fecha_asignado,"hours"):"-",dias_asignado:e.fecha_asignado?tt()().diff(e.fecha_asignado,"days"):"-"})})));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e)})).finally((function(){return i(!1)}));case 5:return e.abrupt("return",e.sent);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){u&&u.length>0&&function(e){try{var t=e.workbookOptions(),n=t.sheets[0].rows,r=-1,a=-1,i=-1,o=-1,c=-1,s=-1,l=-1;n.forEach((function(e){"header"===e.type&&(r=e.cells.findIndex((function(e){return"Negocio"===e.value})),a=e.cells.findIndex((function(e){return"Estado Toa"===e.value})),i=e.cells.findIndex((function(e){return"Estado Gestor"===e.value})),o=e.cells.findIndex((function(e){return"Horas Registro"===e.value})),c=e.cells.findIndex((function(e){return"Horas Asignado"===e.value})),s=e.cells.findIndex((function(e){return"Dias Asignado"===e.value})),l=e.cells.findIndex((function(e){return"Time Slot"===e.value}))),"data"===e.type&&(e.cells.forEach((function(e){e.borderBottom={size:.5},e.borderLeft={size:.5},e.borderRight={size:.5},e.borderTop={size:.5}})),a>-1&&(e.cells[a].background=Wi(e.cells[a].value).background,e.cells[a].color=Wi(e.cells[a].value).color,e.cells[a].value=vn(e.cells[a].value),e.cells[a].textAlign="center"),i>-1&&(e.cells[i].background=Wi(e.cells[i].value).background,e.cells[i].color=Wi(e.cells[i].value).color,e.cells[i].value=vn(e.cells[i].value),e.cells[i].textAlign="center"),o>-1&&l>-1&&r>-1&&(e.cells[o].background=Xi(e.cells[o].value,e.cells[r].value,e.cells[l].value).background,e.cells[o].color=Xi(e.cells[o].value,e.cells[r].value,e.cells[l].value).color,e.cells[o].textAlign="center"),c>-1&&l>-1&&r>-1&&(e.cells[c].background=Xi(e.cells[c].value,e.cells[r].value,e.cells[l].value).background,e.cells[c].color=Xi(e.cells[c].value,e.cells[r].value,e.cells[l].value).color,e.cells[c].textAlign="center"),s>-1&&l>-1&&(e.cells[s].background=Qi(e.cells[s].value,e.cells[l].value).background,e.cells[s].color=Qi(e.cells[s].value,e.cells[l].value).color,e.cells[s].textAlign="center"))})),e.save(t)}catch(d){console.log(d)}}(f.current)}),[u]);var p={background:"#F3C775",bold:!0,fontSize:17,autoWidth:!0};return Object(r.jsxs)(me.a,{children:[Object(r.jsx)(me.a.Item,{style:{margin:0,heigth:"2.1rem"},onClick:function(){return j(!0)},children:"Todo"},1),Object(r.jsx)(me.a.Item,{style:{margin:0,heigth:"2.1rem"},onClick:function(){return j(!1)},children:"Seleccionado"},2),Object(r.jsxs)(Ma.a,{data:u,fileName:"pendientes_".concat(n,"_").concat(tt()().format("DD_MM_YYYY"),".xlsx"),ref:f,children:["gestor"===n?Object(r.jsx)(Ma.b,{field:"tipo",title:"Negocio",locked:!0,width:90,headerCellOptions:p}):null,Object(r.jsx)(Ma.b,{field:"codigo_requerimiento",title:"Requerimiento",locked:!0,width:90,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"codigo_cliente",title:"Codigo Cliente",headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"nombre_cliente",title:"Cliente",width:340,headerCellOptions:p}),"gestor"===n||n===Qt?Object(r.jsx)(Ma.b,{field:"codigo_trabajo",title:"Orden Trabajo",width:90,headerCellOptions:p}):null,"gestor"===n||n===Qt?Object(r.jsx)(Ma.b,{field:"codigo_peticion",title:"Petici\xf3n",width:90,headerCellOptions:p}):null,"gestor"===n||n===Qt?Object(r.jsx)(Ma.b,{field:"tipo_requerimiento",title:"Tipo Req.",width:90,headerCellOptions:p}):null,Object(r.jsx)(Ma.b,{field:"tipo_tecnologia",title:"Tecnolog\xeda",width:90,headerCellOptions:p}),"gestor"===n||n===Qt?Object(r.jsx)(Ma.b,{field:"indicador_pai",title:"PAI",width:90,headerCellOptions:p}):null,Object(r.jsx)(Ma.b,{field:"codigo_ctr",title:"CTR",width:60,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"codigo_nodo",title:"Nodo",width:60,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"codigo_troba",title:"Troba",width:60,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"subtipo_actividad",title:"Subtipo Actividad",width:170,headerCellOptions:p}),"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"numero_reiterada",title:"Reiterada",width:90,headerCellOptions:p}):null,"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"infancia.codigo_requerimiento",title:"Infancia Req.",width:90,headerCellOptions:p}):null,"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"infancia.codigo_ctr",title:"Infancia CTR",width:120,headerCellOptions:p}):null,"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"infancia.tecnico_liquidado.apellidos",title:"Infancia Tecnico",width:200,headerCellOptions:p}):null,"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"infancia.tecnico_liquidado.carnet",title:"Infancia Carnet",width:120,headerCellOptions:p}):null,"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"infancia_registro",title:"Infancia Registro",width:120,headerCellOptions:p}):null,"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"infancia_liquidado",title:"Infancia Liquidado",width:120,headerCellOptions:p}):null,Object(r.jsx)(Ma.b,{field:"distrito",title:"Distrito",width:200,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"direccion",title:"Direcci\xf3n",width:300,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"bucket",title:"Bucket",width:200,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"contrata.nombre",title:"Contrata",width:250,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"gestor_liteyca.nombre",title:"Gestor Asignado",width:250,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"auditor.nombre",title:"Auditor",width:250,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"tecnico.nombre",title:"Tecnico Nombre",width:200,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"tecnico.apellidos",title:"Tecnico Apellidos",width:200,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"tecnico.carnet",title:"Tecnico Carnet",width:120,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"estado_toa",title:"Estado Toa",width:120,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"estado_gestor",title:"Estado Gestor",width:120,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"tipo_agenda",title:"Time Slot",width:100,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"fecha_cita",title:"Fecha Cita",width:100,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"fecha_registro",title:"Fecha Registro",width:150,headerCellOptions:p}),"gestor"===n||n===Qt?Object(r.jsx)(Ma.b,{field:"fecha_asignado",title:"Fecha Asignado",width:150,headerCellOptions:p}):null,"gestor"===n||n===Xt?Object(r.jsx)(Ma.b,{field:"horas_registro",title:"Horas Registro",width:90,headerCellOptions:p}):null,"gestor"===n||n===Qt?Object(r.jsx)(Ma.b,{field:"horas_asignado",title:"Horas Asignado",width:90,headerCellOptions:p}):null,"gestor"===n||n===Qt?Object(r.jsx)(Ma.b,{field:"dias_asignado",title:"Dias Asignado",width:90,headerCellOptions:p}):null,Object(r.jsx)(Ma.b,{field:"detalle_trabajo",title:"Detalle Ttrabajo",width:340,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"observacion_gestor",title:"Observacion Gestor",width:340,headerCellOptions:p}),Object(r.jsx)(Ma.b,{field:"observacion_toa",title:"Observacion Toa",width:340,headerCellOptions:p}),"gestor"!==n?Object(r.jsx)(Ma.b,{field:"tipo",title:"Negocio",locked:!0,width:90,headerCellOptions:p}):null]})]})},eo=P.a.Search;var to=function(e){var t=e.gestores,n=void 0===t?[]:t,i=e.tecnicos,o=void 0===i?[]:i,s=Object(a.useState)([]),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)([]),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)(!1),O=Object(ae.a)(p,2),g=O[0],x=O[1],m=Object(a.useState)([]),v=Object(ae.a)(m,2),_=v[0],w=v[1],y=Object(a.useState)([]),S=Object(ae.a)(y,2),C=S[0],A=S[1],I=Object(a.useState)([]),k=Object(ae.a)(I,2),T=k[0],E=k[1],R=Object(a.useState)(!1),M=Object(ae.a)(R,2),L=M[0],z=M[1],q=Object(a.useState)(!1),F=Object(ae.a)(q,2),P=F[0],Y=F[1],G=Object(a.useState)(!1),H=Object(ae.a)(G,2),U=H[0],K=H[1],Z=Object(a.useState)(!1),J=Object(ae.a)(Z,2),W=J[0],X=J[1],Q=Object(a.useState)(!1),$=Object(ae.a)(Q,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),re=Object(ae.a)(ne,2),ie=re[0],oe=re[1],ce=Object(a.useState)(!1),se=Object(ae.a)(ce,2),le=se[0],de=se[1],ue=Object(a.useState)(!1),be=Object(ae.a)(ue,2),fe=be[0],je=be[1],he=Object(a.useState)(!1),pe=Object(ae.a)(he,2),Oe=pe[0],ge=pe[1],me=Object(a.useState)(!1),ve=Object(ae.a)(me,2),_e=ve[0],we=ve[1],ye=Object(a.useState)(!1),Se=Object(ae.a)(ye,2),Ce=Se[0],Ae=Se[1],Ie=Object(a.useState)(null),ke=Object(ae.a)(Ie,2),Te=ke[0],Ee=ke[1];function Re(){return De.apply(this,arguments)}function De(){return(De=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,pi(!0,{metodo:Ot,todo:!0}).then((function(e){var t=e.data;t&&u(t)})).catch((function(e){return console.log(e)})).finally((function(){return x(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ne(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A([t]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Le(e){return ze.apply(this,arguments)}function ze(){return(ze=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.next=3,pi(!0,{metodo:mt,id:t}).then((function(e){var t=e.data;t&&t.length>0&&w(t)})).catch((function(e){return console.log(e)})).finally((function(){return K(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function qe(){return(qe=Object(N.a)(D.a.mark((function e(t,n,r,a,i){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T&&T.length>0)){e.next=4;break}return z(!0),e.next=4,xi({metodo:wt,ordenes:T,bucket:t,contrata:n,tecnico:r,fecha_cita:a,observacion:i}).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return z(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(){return(Fe=Object(N.a)(D.a.mark((function e(t,n){var r,a,i=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:[],!(T&&T.length>0)){e.next=12;break}return(a=new FormData).append("metodo",St),a.append("ordenes",JSON.stringify(T)),a.append("estado",t),a.append("observacion",n),r.forEach((function(e){a.append("files",e)})),Y(!0),Ge(),e.next=12,mi(a).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return Y(!1)}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){Re()}),[]),Object(a.useEffect)((function(){d.length>0&&h(d)}),[d]);var Pe=function(){return oe(!ie)},Be=function(){return de(!le)},Ye=function(){return je(!fe)},Ge=function(){return ge(!Oe)},He=function(){return we(!_e)},Ue=function(){return Ae(!Ce)},Ve=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ye(),e.next=3,Ne(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return He(),e.next=3,Le(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function Ze(){return(Ze=Object(N.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T&&T.length>0)){e.next=8;break}return n=t,X(!0),Ue(),e.next=6,xi(Object(c.a)({metodo:yt,ordenes:T},n)).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Re();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return X(!1)}));case 6:e.next=9;break;case 8:V.a.warn("No hay ordenes seleccionadas.",{position:"top-right"});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{style:{marginBottom:".5rem",marginTop:"1rem"},children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{type:"primary",icon:g?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Va.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:Re,children:"Actualizar"}),Object(r.jsx)(B.a,{icon:L?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(xe.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:0===T.length,onClick:Pe,children:"Agendar"}),Object(r.jsx)(B.a,{icon:W?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Ka.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:0===T.length,onClick:Ue,children:"Asignar"}),Object(r.jsx)(B.a,{icon:P?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Za.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:0===T.length,onClick:Ge,children:"Estado"}),Object(r.jsx)(eo,{placeholder:"Requerimiento...",onSearch:function(e){e&&e.length>1?h(d.filter((function(t){return String(t.codigo_requerimiento).includes(e)}))):h(d)},style:{width:180,marginRight:".5rem"},allowClear:!0}),Object(r.jsx)(wa.a,{overlay:Object(r.jsx)($i,{metodo:pt,tipo:"gestor",setLoading:te,ordenesSeleccionadas:T}),placement:"bottomLeft",trigger:["click"],arrow:!0,children:Object(r.jsx)(B.a,{icon:ee?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(ta.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},children:"Exportar"})})]}),Object(r.jsx)(Ti,{asignadas:!0,data:j,loading:g,ordenesSeleccionadas:T,setOrdenesSeleccionadas:E,abrirReiterada:function(e){Ee(e),Be()},abrirInfancia:Ve,abrirRegistro:Ke}),Object(r.jsx)(Ji,{tipo:!0,visible:Ce,abrir:Ue,gestores:n,tecnicos:o,asignar:function(e){return Ze.apply(this,arguments)}}),Object(r.jsx)(Ui,{visible:ie,abrir:Pe,buckets:$a,tecnicos:o,agendar:function(e,t,n,r,a){return qe.apply(this,arguments)}}),Object(r.jsx)(Yi,{visible:Oe,abrir:Ge,actualizarEstado:function(e,t){return Fe.apply(this,arguments)}}),Object(r.jsx)(Li,{visible:le,abrir:Be,codigo_cliente:Te}),Object(r.jsx)(Ni,{visible:fe,abrir:Ye,loading:!1,orden:C}),Object(r.jsx)(Ri,{visible:_e,abrir:He,loading:U,registros:_})]})},no=Pe.a.Text;var ro=function(e){var t=e.tipo,n=e.setLoading,i=e.ordenesSeleccionadas,o=void 0===i?[]:i,s=e.fechaInicio,l=e.fechaFin,d=Object(a.useState)([]),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useRef)(null);function h(e){return p.apply(this,arguments)}function p(){return(p=Object(N.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(2===r&&o.length<=0)){e.next=4;break}return e.abrupt("return",V.a.warn("Debes seleccionar algunas ordenes primero.",{position:"top-right"}));case 4:if(3!==r||s){e.next=8;break}return e.abrupt("return",V.a.warn("Debes seleccionar la fecha de inicio.",{position:"top-right"}));case 8:if(3!==r||l){e.next=12;break}return e.abrupt("return",V.a.warn("Debes seleccionar la fecha de fin.",{position:"top-right"}));case 12:return n(!0),e.next=15,pi(!0,{metodo:ht,todo:1===r,tipo:t,id_ordenes:o,fechaInicio:3===r?s:null,fechaFin:3===r?l:null}).then(function(){var e=Object(N.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.data,e.next=3,g(n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).then((function(){return O(j.current)})).catch((function(e){return console.log(e)})).finally((function(){return n(!1)}));case 15:return e.abrupt("return",e.sent);case 16:case 17:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(e){try{var t=e.workbookOptions(),n=t.sheets[0].rows,r=-1,a=-1,i=-1,o=-1,c=-1,s=-1,l=-1;n.forEach((function(e){"header"===e.type&&(r=e.cells.findIndex((function(e){return"Negocio"===e.value})),a=e.cells.findIndex((function(e){return"Estado Toa"===e.value})),i=e.cells.findIndex((function(e){return"Estado Gestor"===e.value})),o=e.cells.findIndex((function(e){return"Estado Liquidado"===e.value})),c=e.cells.findIndex((function(e){return"Horas Registro"===e.value})),s=e.cells.findIndex((function(e){return"Horas Asignado"===e.value})),l=e.cells.findIndex((function(e){return"Time Slot"===e.value}))),"data"===e.type&&(e.cells.forEach((function(e){e.borderBottom={size:.5},e.borderLeft={size:.5},e.borderRight={size:.5},e.borderTop={size:.5}})),a>-1&&(e.cells[a].background=Wi(e.cells[a].value).background,e.cells[a].color=Wi(e.cells[a].value).color,e.cells[a].value=vn(e.cells[a].value),e.cells[a].textAlign="center"),i>-1&&(e.cells[i].background=Wi(e.cells[i].value).background,e.cells[i].color=Wi(e.cells[i].value).color,e.cells[i].value=vn(e.cells[i].value),e.cells[i].textAlign="center"),o>-1&&(e.cells[o].background=Wi(e.cells[o].value).background,e.cells[o].color=Wi(e.cells[o].value).color,e.cells[o].value=vn(e.cells[o].value),e.cells[o].textAlign="center"),c>-1&&l>-1&&r>-1&&(e.cells[c].background=Xi(e.cells[c].value,e.cells[r].value,e.cells[l].value).background,e.cells[c].color=Xi(e.cells[c].value,e.cells[r].value,e.cells[l].value).color,e.cells[c].textAlign="center"),s>-1&&l>-1&&r>-1&&(e.cells[s].background=Xi(e.cells[s].value,e.cells[r].value,e.cells[l].value).background,e.cells[s].color=Xi(e.cells[s].value,e.cells[r].value,e.cells[l].value).color,e.cells[s].textAlign="center"))})),e.save(t)}catch(d){console.log(d)}}function g(e){return x.apply(this,arguments)}function x(){return(x=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t&&t.length>0)){e.next=6;break}return e.next=3,f(t.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{fecha_cita:e.fecha_cita?tt()(e.fecha_cita).format("DD/MM/YY"):"-",fecha_registro:e.fecha_registro?tt()(e.fecha_registro).format("DD/MM/YY HH:mm"):"-",fecha_asignado:e.fecha_asignado?tt()(e.fecha_asignado).format("DD/MM/YY HH:mm"):"-",fecha_liquidado:e.fecha_liquidado?tt()(e.fecha_liquidado).format("DD/MM/YY HH:mm"):"-",horas_registro:e.fecha_registro?tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours"):"-",horas_asignado:e.fecha_asignado?tt()(e.fecha_liquidado).diff(e.fecha_asignado,"hours"):"-"})})));case 3:return e.abrupt("return",e.sent);case 6:f([]);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var m={background:"#60CE48",bold:!0,fontSize:17,autoWidth:!0};return Object(r.jsxs)(me.a,{children:[Object(r.jsx)(me.a.Item,{style:{margin:0,heigth:"2.1rem"},onClick:function(){return h(1)},children:"Hoy"},1),Object(r.jsx)(me.a.Item,{style:{margin:0,heigth:"2.1rem"},onClick:function(){return h(2)},children:"Seleccionado"},2),Object(r.jsx)(me.a.Item,{style:{margin:0,heigth:"2.1rem"},onClick:function(){return h(3)},children:"Fechas"},3),Object(r.jsxs)(Ma.a,{data:b,fileName:"liquidadas_".concat(t,"_").concat(tt()().format("DD_MM_YYYY"),".xlsx"),ref:j,children:["gestor"===t?Object(r.jsx)(Ma.b,{field:"tipo",title:"Negocio",locked:!0,width:90,headerCellOptions:m}):null,Object(r.jsx)(Ma.b,{field:"codigo_requerimiento",title:"Requerimiento",locked:!0,width:90,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"tipo_averia",title:"Tipo Averia",locked:!0,width:90,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"codigo_cliente",title:"Codigo Cliente",headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"nombre_cliente",title:"Cliente",width:340,headerCellOptions:m}),"gestor"===t||t===Qt?Object(r.jsx)(Ma.b,{field:"codigo_trabajo",title:"Orden Trabajo",width:90,headerCellOptions:m}):null,"gestor"===t||t===Qt?Object(r.jsx)(Ma.b,{field:"codigo_peticion",title:"Petici\xf3n",width:90,headerCellOptions:m}):null,"gestor"===t||t===Qt?Object(r.jsx)(Ma.b,{field:"tipo_requerimiento",title:"Tipo Req.",width:90,headerCellOptions:m}):null,Object(r.jsx)(Ma.b,{field:"tipo_tecnologia",title:"Tecnolog\xeda",width:90,headerCellOptions:m}),"gestor"===t||t===Qt?Object(r.jsx)(Ma.b,{field:"indicador_pai",title:"PAI",width:90,headerCellOptions:m}):null,Object(r.jsx)(Ma.b,{field:"codigo_ctr",title:"CTR",width:60,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"codigo_nodo",title:"Nodo",width:60,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"codigo_troba",title:"Troba",width:60,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"subtipo_actividad",title:"Subtipo Actividad",width:170,headerCellOptions:m}),"gestor"===t||t===Xt?Object(r.jsx)(Ma.b,{field:"numero_reiterada",title:"Reiterada",width:90,headerCellOptions:m}):null,"gestor"===t||t===Xt?Object(r.jsx)(Ma.b,{field:"infancia.codigo_requerimiento",title:"Infancia Req.",width:90,headerCellOptions:m}):null,"gestor"===t||t===Xt?Object(r.jsx)(Ma.b,{field:"infancia.codigo_ctr",title:"Infancia CTR",width:120,headerCellOptions:m}):null,Object(r.jsx)(Ma.b,{field:"distrito",title:"Distrito",width:200,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"bucket",title:"Bucket",width:200,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"contrata.nombre",title:"Contrata",width:250,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"gestor.nombre",title:"Gestor",width:250,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"auditor.nombre",title:"Auditor",width:250,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"tecnico.nombre",title:"Tecnico Nombre",width:200,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"tecnico.apellidos",title:"Tecnico Apellidos",width:200,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"tecnico.carnet",title:"Tecnico Carnet",width:120,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"estado_toa",title:"Estado Toa",width:120,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"estado_gestor",title:"Estado Gestor",width:120,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"estado_liquidado",title:"Estado Liquidado",width:120,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"tipo_agenda",title:"Time Slot",width:100,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"fecha_cita",title:"Fecha Cita",width:100,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"fecha_registro",title:"Fecha Registro",width:150,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"fecha_liquidado",title:"Fecha Liquidado",width:150,headerCellOptions:m}),"gestor"===t||t===Qt?Object(r.jsx)(Ma.b,{field:"fecha_asignado",title:"Fecha Asignado",width:150,headerCellOptions:m}):null,"gestor"===t||t===Xt?Object(r.jsx)(Ma.b,{field:"horas_registro",title:"Horas Registro",width:90,headerCellOptions:m}):null,"gestor"===t||t===Qt?Object(r.jsx)(Ma.b,{field:"horas_asignado",title:"Horas Asignado",width:90,headerCellOptions:m}):null,Object(r.jsx)(Ma.b,{field:"observacion_gestor",title:"Observacion Gestor",width:340,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"observacion_toa",title:"Observacion Toa",width:340,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"observacion_liquidado",title:"Observacion Liquidado",width:340,headerCellOptions:m}),Object(r.jsx)(Ma.b,{field:"descripcion_codigo_liquidado",title:"Descripci\xf3n Liquidado",width:150,headerCellOptions:m}),"gestor"!==t?Object(r.jsx)(Ma.b,{field:"tipo",title:"Negocio",locked:!0,width:90,headerCellOptions:m}):null]})]})},ao=Pe.a.Text;var io=Xe.a.RangePicker;var oo=function(e){var t=e.tipo,n=e.gestor,i=Object(a.useState)([]),o=Object(ae.a)(i,2),c=o[0],s=o[1],l=Object(a.useState)([]),d=Object(ae.a)(l,2),u=d[0],b=d[1],f=Object(a.useState)([]),j=Object(ae.a)(f,2),h=j[0],p=j[1],O=Object(a.useState)(!1),g=Object(ae.a)(O,2),x=g[0],m=g[1],v=Object(a.useState)(!1),_=Object(ae.a)(v,2),w=_[0],y=_[1],S=Object(a.useState)(!1),C=Object(ae.a)(S,2),A=C[0],I=C[1],k=Object(a.useState)(!1),T=Object(ae.a)(k,2),E=T[0],R=T[1],M=Object(a.useState)(!1),L=Object(ae.a)(M,2),z=L[0],q=L[1],F=Object(a.useState)([]),P=Object(ae.a)(F,2),Y=P[0],G=P[1],H=Object(a.useState)([]),U=Object(ae.a)(H,2),K=U[0],Z=U[1],J=Object(a.useState)([]),W=Object(ae.a)(J,2),X=W[0],Q=W[1],$=Object(a.useState)([]),ee=Object(ae.a)($,2),te=ee[0],ne=ee[1],re=Object(a.useState)([]),ie=Object(ae.a)(re,2),oe=ie[0],ce=ie[1],se=Object(a.useState)([]),le=Object(ae.a)(se,2),de=le[0],ue=le[1],be=Object(a.useState)([]),fe=Object(ae.a)(be,2),je=fe[0],he=fe[1],pe=Object(a.useState)([]),Oe=Object(ae.a)(pe,2),ge=Oe[0],xe=Oe[1],me=Object(a.useState)([]),ve=Object(ae.a)(me,2),_e=ve[0],we=ve[1],ye=Object(a.useState)([]),Se=Object(ae.a)(ye,2),Ce=Se[0],Ae=Se[1],Ie=Object(a.useState)(!1),ke=Object(ae.a)(Ie,2),Te=ke[0],Ee=ke[1],Re=Object(a.useState)(null),De=Object(ae.a)(Re,2),Ne=De[0],Me=De[1],Le=Object(a.useState)(null),ze=Object(ae.a)(Le,2),qe=ze[0],Fe=ze[1];function Pe(){return Be.apply(this,arguments)}function Be(){return(Be=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y(!0),m(!0),p([]),e.next=5,pi(!0,{metodo:At.ORDENES_OBTENER_LIQUIDADAS,tipo:t,fechaInicio:null,fechaFin:null}).then((function(e){var t=e.data;t&&t.length>0?Ze(t):Ke()})).catch((function(e){return console.log(e)})).finally((function(){y(!1),m(!1)}));case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ye(){return(Ye=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!Ne||!qe){e.next=8;break}return y(!0),I(!0),p([]),e.next=6,pi(!0,{metodo:At.ORDENES_OBTENER_LIQUIDADAS,tipo:t,fechaInicio:Ne,fechaFin:qe}).then((function(e){var t=e.data;t&&t.length>0?Ze(t):Ke()})).catch((function(e){return console.log(e)})).finally((function(){y(!1),I(!1)}));case 6:e.next=9;break;case 8:V.a.warn("Debes seleccionar un rango de fechas.",{position:"top-right"});case 9:case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){Pe()}),[]);var Ge=function(){return Ee(!Te)};function He(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return q(!0),e.next=3,pi(!0,{metodo:null,id:t}).then((function(e){var t=e.data;t&&t.length>0&&b(t)})).catch((function(e){return console.log(e)})).finally((function(){return q(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Ve=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Ge(),e.next=3,He(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ke=function(){s([]),G([]),Z([]),Q([]),he([]),xe([]),ne([])},Ze=function(e){s(e),G(Br(e,"distrito")),Z(Br(e,"estado_toa")),Q(Br(e,"estado_gestor")),he(Br(e,"tipo_tecnologia")),xe(Br(e,"codigo_nodo")),we(Br(e,"codigo_ctr")),Ae(Br(e,"tipo_agenda")),ne(Pr(e,"contrata")),ce(Pr(e,"gestor",!0)),ue(Pr(e,"tecnico_liquidado"))};return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{type:"primary",icon:x?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Va.a,{}),disabled:x,style:{marginBottom:"1rem",marginRight:".5rem"},onClick:Pe,children:"Actualizar"}),Object(r.jsx)(wa.a,{overlay:Object(r.jsx)(ro,{tipo:n?"gestor":t,setLoading:R,ordenesSeleccionadas:h,fechaInicio:Ne,fechaFin:qe}),placement:"bottomLeft",trigger:["click"],arrow:!0,children:Object(r.jsx)(B.a,{icon:E?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(ta.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:E,children:"Exportar"})}),Object(r.jsx)(io,{onChange:function(e){e?(Me(e[0].format("YYYY/MM/DD")),Fe(e[1].format("YYYY/MM/DD"))):(Me(null),Fe(null))},style:{marginBottom:"1rem",marginRight:".5rem"}}),Object(r.jsx)(B.a,{type:"primary",icon:A?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(pa.a,{}),disabled:A,onClick:function(){return Ye.apply(this,arguments)},children:"Buscar"})]}),Object(r.jsx)(hn.a,{rowKey:"_id",rowSelection:{columnWidth:50,selectedRowKeys:h,onChange:function(e){return p(e)}},columns:n?function(){var e=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],t=arguments.length>9?arguments[9]:void 0,n=arguments.length>10?arguments[10]:void 0;return[{title:"#",width:50,fixed:"left",render:function(e,t,n){return n+1}},{title:"Negocio",dataIndex:"tipo",width:100,fixed:"left"},{title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,fixed:"left",render:function(e){return Object(r.jsx)(ao,{copyable:!0,children:e})}},{title:"Codigo Cliente",dataIndex:"codigo_cliente",width:120,render:function(e){return Object(r.jsx)(ao,{copyable:!0,children:e})}},{title:"Tecnologia",dataIndex:"tipo_tecnologia",align:"center",width:120,filters:(arguments.length>4&&void 0!==arguments[4]?arguments[4]:[])||[],onFilter:function(e,t){return 0===t.tipo_tecnologia.indexOf(e)}},{title:"CTR",dataIndex:"codigo_ctr",width:60,filters:(arguments.length>6&&void 0!==arguments[6]?arguments[6]:[])||[],onFilter:function(e,t){return 0===String(t.codigo_ctr).indexOf(String(e))}},{title:"Nodo",dataIndex:"codigo_nodo",width:70,filters:(arguments.length>5&&void 0!==arguments[5]?arguments[5]:[])||[],onFilter:function(e,t){return 0===t.codigo_nodo.indexOf(e)}},{title:"Troba",dataIndex:"codigo_troba",width:70,sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0}},{title:"Distrito",dataIndex:"distrito",width:160,filters:(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])||[],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{title:"Estado Toa",dataIndex:"estado_toa",width:150,align:"center",filters:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Estado Gestor",dataIndex:"estado_gestor",width:150,align:"center",filters:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])||[],onFilter:function(e,t){return 0===t.estado_gestor.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Estado Liquidado",dataIndex:"estado_liquidado",width:150,align:"center",render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])||[],onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre:"-",children:e?e.nombre:"-"})}},{title:"Tecnico Liquidado",dataIndex:"tecnico_liquidado",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>7&&void 0!==arguments[7]?arguments[7]:[])||[],onFilter:function(e,t){return"-"===e?!t.tecnico_liquidado:!!t.tecnico_liquidado&&0===t.tecnico_liquidado._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{title:"Usuario Liquidado",dataIndex:"codigo_usuario_liquidado",width:150},{title:"Tipo Averia",dataIndex:"tipo_averia",width:150},{title:"Descripci\xf3n Liquidado",dataIndex:"descripcion_codigo_liquidado",width:250},{title:"Observaci\xf3n Gestor",dataIndex:"observacion_gestor",width:250},{title:"Observaci\xf3n Liquidado",dataIndex:"observacion_liquidado",width:250},{title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Fecha Liquidado",dataIndex:"fecha_liquidado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Time Slot",dataIndex:"tipo_agenda",width:100,align:"center",fixed:"right",filters:e?e.filter((function(e){return e.text})):[],onFilter:function(e,t){return!(!t.tipo_agenda||!e)&&0===t.tipo_agenda.indexOf(e)},render:function(e){return e?Object(r.jsx)(gn.a,{color:"#f50",children:e}):void 0}},{title:"Horas",dataIndex:"fecha_registro",width:80,align:"center",fixed:"right",sorter:function(e,t){return tt()().diff(e.fecha_registro,"hours")<tt()().diff(t.fecha_registro,"hours")?-1:tt()().diff(e.fecha_registro,"hours")>tt()().diff(t.fecha_registro,"hours")?1:0},render:function(e,t){if(!t.fecha_cita&&e){if(t.tipo===Qt&&t.fecha_asignado){var n=tt()().diff(t.fecha_asignado,"hours");return Object(r.jsx)(gn.a,{color:n>=72?"error":n<72&&n>=24?"warning":n<24?"success":"",children:n})}if(t.tipo===Xt){var a=tt()().diff(e,"hours");return Object(r.jsx)(gn.a,{color:a>=24?"error":a<24&&a>=12?"warning":a<12?"success":"",children:a})}return Object(r.jsx)(gn.a,{children:"-"})}return Object(r.jsx)(gn.a,{color:"blue",children:tt()().diff(e,"hours")})}},{title:"Acciones",dataIndex:"_id",width:100,align:"center",fixed:"right",render:function(e,a){return Object(r.jsxs)("div",{children:[Object(r.jsx)(ji.a,{style:{fontSize:"1.5rem",marginRight:".5rem"},onClick:function(){return t(e)}}),Object(r.jsx)(vi,{row:a,listarOrdenes:n})]})}}]}(Y,K,X,te,je,ge,_e,de,Ce,Ve,Pe):function(e){var t=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],n=arguments.length>11?arguments[11]:void 0,a=arguments.length>12?arguments[12]:void 0,i=[{averias:!0,altas:!0,title:"#",width:50,fixed:"left",render:function(e,t,n){return n+1}},{averias:!0,altas:!0,title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,fixed:"left",render:function(e){return Object(r.jsx)(no,{copyable:!0,children:e})}},{averias:!1,altas:!0,title:"Orden Trabajo",dataIndex:"codigo_trabajo",width:120,render:function(e){return Object(r.jsx)(no,{copyable:!0,children:e})}},{averias:!1,altas:!0,title:"Peticion",dataIndex:"codigo_peticion",width:120,render:function(e){return Object(r.jsx)(no,{copyable:!0,children:e})}},{averias:!0,altas:!0,title:"Codigo Cliente",dataIndex:"codigo_cliente",width:120,render:function(e){return Object(r.jsx)(no,{copyable:!0,children:e})}},{averias:!0,altas:!0,title:"Tecnologia",dataIndex:"tipo_tecnologia",align:"center",width:120,filters:(arguments.length>7&&void 0!==arguments[7]?arguments[7]:[])||[],onFilter:function(e,t){return 0===t.tipo_tecnologia.indexOf(e)}},{averias:!0,altas:!0,title:"CTR",dataIndex:"codigo_ctr",width:60,filters:(arguments.length>9&&void 0!==arguments[9]?arguments[9]:[])||[],onFilter:function(e,t){return 0===String(t.codigo_ctr).indexOf(String(e))}},{averias:!0,altas:!0,title:"Nodo",dataIndex:"codigo_nodo",width:70,filters:(arguments.length>8&&void 0!==arguments[8]?arguments[8]:[])||[],onFilter:function(e,t){return 0===t.codigo_nodo.indexOf(e)}},{averias:!0,altas:!0,title:"Troba",dataIndex:"codigo_troba",width:70,sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0}},{averias:!0,altas:!0,title:"Distrito",dataIndex:"distrito",width:160,filters:(arguments.length>1&&void 0!==arguments[1]?arguments[1]:[])||[],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{averias:!0,altas:!0,title:"Estado Toa",dataIndex:"estado_toa",width:150,align:"center",filters:(arguments.length>2&&void 0!==arguments[2]?arguments[2]:[])||[],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!0,title:"Estado Gestor",dataIndex:"estado_gestor",width:150,align:"center",filters:(arguments.length>3&&void 0!==arguments[3]?arguments[3]:[])||[],onFilter:function(e,t){return 0===t.estado_gestor.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!0,title:"Estado Liquidado",dataIndex:"estado_liquidado",width:150,align:"center",render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!0,title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>4&&void 0!==arguments[4]?arguments[4]:[])||[],onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre:"-",children:e?e.nombre:"-"})}},{averias:!0,altas:!0,title:"Gestor",dataIndex:"gestor",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>5&&void 0!==arguments[5]?arguments[5]:[])||[],onFilter:function(e,t){return"-"===e?!t.gestor:void 0!==t.gestor&&0===t.gestor._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{averias:!0,altas:!0,title:"Tecnico Liquidado",dataIndex:"tecnico_liquidado",width:200,ellipsis:{showTitle:!1},filters:(arguments.length>6&&void 0!==arguments[6]?arguments[6]:[])||[],onFilter:function(e,t){return"-"===e?!t.tecnico_liquidado:!!t.tecnico_liquidado&&0===t.tecnico_liquidado._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{averias:!0,altas:!1,title:"Usuario Liquidado",dataIndex:"codigo_usuario_liquidado",width:150},{averias:!0,altas:!1,title:"Tipo Averia",dataIndex:"tipo_averia",width:150},{averias:!0,altas:!1,title:"Descripci\xf3n Liquidado",dataIndex:"descripcion_codigo_liquidado",width:250},{averias:!0,altas:!0,title:"Observaci\xf3n Gestor",dataIndex:"observacion_gestor",width:250},{averias:!0,altas:!0,title:"Observaci\xf3n Liquidado",dataIndex:"observacion_liquidado",width:250},{averias:!0,altas:!0,title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{averias:!0,altas:!0,title:"Fecha Liquidado",dataIndex:"fecha_liquidado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{averias:!0,altas:!0,title:"Time Slot",dataIndex:"tipo_agenda",width:100,align:"center",fixed:"right",filters:t?t.filter((function(e){return e.text})):[],onFilter:function(e,t){return!(!t.tipo_agenda||!e)&&0===t.tipo_agenda.indexOf(e)},render:function(e){return e?Object(r.jsx)(gn.a,{color:"#f50",children:e}):void 0}},{averias:!0,altas:!1,title:"Plazo 24h",dataIndex:"fecha_registro",width:100,align:"center",fixed:"right",sorter:function(e,t){return tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")<tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?-1:tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")>tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?1:0},render:function(e,t){return Object(r.jsx)(_i,{fecha:e,tipo:t.tipo,tipoAgenda:t.tipo_agenda})}},{averias:!1,altas:!0,title:"Plazo 72h",dataIndex:"fecha_registro",width:100,align:"center",fixed:"right",sorter:function(e,t){return tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")<tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?-1:tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")>tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?1:0},render:function(e,t){if(e){var n=tt()(t.fecha_liquidado).diff(e,"hours");return Object(r.jsx)(gn.a,{color:t.fecha_cita?"geekblue":n<72&&!t.fecha_cita?"success":72!==n||t.fecha_cita?"error":"warning",children:n})}return Object(r.jsx)(gn.a,{children:"-"})}},{averias:!0,altas:!0,title:"Acciones",dataIndex:"_id",width:100,align:"center",fixed:"right",render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(ji.a,{style:{fontSize:"1.5rem",marginRight:".5rem"},onClick:function(){return n(e)}}),Object(r.jsx)(vi,{row:t,listarOrdenes:a})]})}}],o=i.filter((function(e){return e.averias})),c=i.filter((function(e){return e.altas}));switch(e){case Xt:return o;case Qt:return c}}(t,Y,K,X,te,oe,de,je,ge,_e,Ce,Ve,Pe),dataSource:c,loading:w,size:"small",scroll:{y:"65vh"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]}}),Object(r.jsx)(Ri,{visible:Te,abrir:Ge,loading:z,registros:u})]})},co=P.a.Search;var so=function(e){var t=e.gestores,n=void 0===t?[]:t,i=e.tecnicos,o=void 0===i?[]:i,s=Object(a.useState)([]),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)([]),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)(!1),O=Object(ae.a)(p,2),g=O[0],x=O[1],m=Object(a.useState)([]),v=Object(ae.a)(m,2),_=v[0],w=v[1],y=Object(a.useState)([]),S=Object(ae.a)(y,2),C=S[0],A=S[1],I=Object(a.useState)([]),k=Object(ae.a)(I,2),T=k[0],E=k[1],R=Object(a.useState)(!1),M=Object(ae.a)(R,2),L=M[0],z=M[1],q=Object(a.useState)(!1),F=Object(ae.a)(q,2),P=F[0],Y=F[1],G=Object(a.useState)(!1),H=Object(ae.a)(G,2),U=H[0],K=H[1],Z=Object(a.useState)(!1),J=Object(ae.a)(Z,2),W=J[0],X=J[1],Q=Object(a.useState)(!1),$=Object(ae.a)(Q,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),re=Object(ae.a)(ne,2),ie=re[0],oe=re[1],ce=Object(a.useState)(null),se=Object(ae.a)(ce,2),le=se[0],de=se[1];function ue(){return be.apply(this,arguments)}function be(){return(be=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),e.next=3,pi(!0,{metodo:Ot,todo:!1}).then((function(e){var t=e.data;t&&u(t)})).catch((function(e){return console.log(e)})).finally((function(){return x(!1)}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e){return je.apply(this,arguments)}function je(){return(je=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:A([t]);case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){return pe.apply(this,arguments)}function pe(){return(pe=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.next=3,pi(!0,{metodo:mt,id:t}).then((function(e){var t=e.data;t&&t.length>0&&w(t)})).catch((function(e){return console.log(e)})).finally((function(){return z(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){ue()}),[]),Object(a.useEffect)((function(){d.length>0&&h(d)}),[d]);var Oe=function(){return K(!U)},ge=function(){return X(!W)},xe=function(){return te(!ee)},me=function(){return oe(!ie)},ve=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ge(),e.next=3,fe(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_e=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return xe(),e.next=3,he(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();function we(){return(we=Object(N.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(T&&T.length>0)){e.next=8;break}return n=t,Y(!0),me(),e.next=6,xi(Object(c.a)({metodo:yt,ordenes:T},n)).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return Y(!1)}));case 6:e.next=9;break;case 8:V.a.warn("No hay ordenes seleccionadas.",{position:"top-right"});case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.jsxs)("div",{style:{marginBottom:".5rem",marginTop:"1rem"},children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{type:"primary",icon:g?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Va.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:ue,children:"Actualizar"}),Object(r.jsx)(B.a,{icon:P?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Ka.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:0===T.length,onClick:me,children:"Asignar"}),Object(r.jsx)(co,{placeholder:"Requerimiento...",onSearch:function(e){e&&e.length>1?h(d.filter((function(t){return String(t.codigo_requerimiento).includes(e)}))):h(d)},style:{width:180,marginRight:".5rem"},allowClear:!0})]}),Object(r.jsx)(Ti,{data:j,loading:g,ordenesSeleccionadas:T,setOrdenesSeleccionadas:E,abrirReiterada:function(e){de(e),Oe()},abrirInfancia:ve,abrirRegistro:_e}),Object(r.jsx)(Ji,{tipo:!0,visible:ie,abrir:me,gestores:n,tecnicos:o,asignar:function(e){return we.apply(this,arguments)}}),Object(r.jsx)(Li,{visible:U,abrir:Oe,codigo_cliente:le}),Object(r.jsx)(Ni,{visible:W,abrir:ge,loading:!1,orden:C}),Object(r.jsx)(Ri,{visible:ee,abrir:xe,loading:L,registros:_})]})},lo=bn.a.TabPane;var uo=[{path:I,exact:!0,component:function(){return Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Lista de Rutas",subtitulo:"Operativa"}),Object(r.jsx)(nt,{children:Object(r.jsx)(Ya,{gestor:!0})})]})}},{path:k,exact:!0,component:function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1];function d(){return(d=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!1,{metodo:At.EMPLEADOS_LISTAR_GESTORES}).then((function(e){var t=e.data;return i(t||[])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function u(){return(u=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!1,{metodo:At.EMPLEADOS_LISTAR_TECNICOS}).then((function(e){var t=e.data;t&&l(t)})).catch((function(e){return console.log(e)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){d.apply(this,arguments)}(),function(){u.apply(this,arguments)}()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Lista de Ordenes",subtitulo:"Gestionar Ordenes"}),Object(r.jsx)(nt,{children:Object(r.jsxs)(bn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)(lo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Ha.a,{}),"Ordenes Pendientes"]}),children:Object(r.jsx)(to,{gestores:n,tecnicos:s})},"1"),Object(r.jsx)(lo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Dt.a,{}),"Ordenes Liquidadas"]}),children:Object(r.jsx)(oo,{tipo:null,gestor:!0})},"2"),Object(r.jsx)(lo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Ua.a,{}),"Ordenes Sin Asignar"]}),children:Object(r.jsx)(so,{gestores:n,tecnicos:s})},"3")]})})]})}}],bo=n(679),fo=n(680),jo=n(219),ho=n(220);function po(){return(po=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,n){try{var r=new FileReader,a=!!r.readAsBinaryString;r.onload=function(t){var n=t.target.result,r=ho.read(n,{type:a?"binary":"array",bookVBA:!0}),i=r.SheetNames[0],o=r.Sheets[i],c=ho.utils.sheet_to_json(o),s=[];return c.map((function(e){return s.push(Object.keys(e).reduce((function(t,n){return t[n.trim().toLowerCase()]=e[n],t}),{}))})),e(s)},a?r.readAsBinaryString(t):r.readAsArrayBuffer(t)}catch(i){return n(i)}})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Oo(e,t){var n=new Date(86400*(e-25569)*1e3);return t?n:new Date(n.setHours(n.getHours()+5))}function go(e,t){if(!Number(e))return null;var n=tt()(e).format("DD"),r=tt()(e).format("MM"),a=tt()(e).format("YYYY"),i=new Date(a+"-"+r+"-"+n+"T".concat(t,".000Z"));return new Date(i.setHours(i.getHours()+5))}var xo=n(135),mo=n.n(xo);function vo(){return _o.apply(this,arguments)}function _o(){return(_o=Object(N.a)(D.a.mark((function e(){var t,n,r=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],n=t.map((function(e,t){var n=!0,r="";mo()(String(e[Ja[0].cabecera]).trim())&&(n=!1),isNaN(e[Ja[1].cabecera])&&isNaN(e[Ja[1].cabecera_2])&&(n=!1);var a={key:t,verificado:n,tipo:Xt};return Ja.forEach((function(t){t.cabecera_2?void 0!==e[t.cabecera]&&null!==e[t.cabecera]?a[t.propiedad]=t.fecha?Oo(e[t.cabecera]):String(e[t.cabecera]).replace(/,/g,""):void 0!==e[t.cabecera_2]&&null!==e[t.cabecera_2]&&(a[t.propiedad]=t.fecha?Oo(e[t.cabecera_2]):String(e[t.cabecera_2]).replace(/,/g,"")):void 0!==e[t.cabecera]&&null!==e[t.cabecera]&&(a[t.propiedad]=t.fecha?Oo(e[t.cabecera]):String(e[t.cabecera]).replace(/,/g,""))})),Wa.forEach((function(t){void 0!==e[t.cabecera]&&null!==e[t.cabecera]&&(r=r+t.espacio+e[t.cabecera])})),a.direccion=String(r).substr(1),a})),e.abrupt("return",Promise.all(n).catch((function(e){return console.log("Error en la promesa"),console.log(e),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function wo(){return yo.apply(this,arguments)}function yo(){return(yo=Object(N.a)(D.a.mark((function e(){var t,n,r,a=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1&&void 0!==a[1]?a[1]:[],r=t.map((function(e,t){var r=!0,a=null,i=ui.includes(String(e.tipave)),o=bi.includes(String(e.tipave)),c=fi.includes(String(e.tipave));if(isNaN(e[Ja[1].cabecera])&&isNaN(e[Ja[1].cabecera_2])&&(r=!1),6===String(e.codtecliq).trim().length){var s=n.findIndex((function(t){return t.carnet===e.codtecliq}));s>0&&(a=n[s]._id)}var l={key:t,verificado:r,tipo_liquidacion:e.edoxot,tecnico_liquidado:a,estado_liquidado:i?"efectiva":o?"inefectiva":c?"no_corresponde":"-"};return Qa.forEach((function(t){t.cabecera_2?void 0!==e[t.cabecera]&&null!==e[t.cabecera]?l[t.propiedad]=t.fecha?Oo(e[t.cabecera]):e[t.cabecera]:void 0!==e[t.cabecera_2]&&null!==e[t.cabecera_2]&&(l[t.propiedad]=t.fecha?Oo(e[t.cabecera_2]):e[t.cabecera_2]):void 0!==e[t.cabecera]&&null!==e[t.cabecera]&&(l[t.propiedad]=t.fecha?Oo(e[t.cabecera]):e[t.cabecera])})),l})),e.abrupt("return",Promise.all(r).catch((function(e){return console.log("Error en la promesa"),console.log(e),e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function So(){return Co.apply(this,arguments)}function Co(){return(Co=Object(N.a)(D.a.mark((function e(){var t,n,r=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:[],n=t.filter((function(e){return on.includes(e.codnod)})).map((function(e,t){var n=!0;mo()(String(e[Xa[0].cabecera]).trim())&&mo()(String(e[Xa[0].cabecera_2]).trim())&&mo()(String(e[Xa[0].cabecera_3]).trim())&&(n=!1),isNaN(e[Xa[1].cabecera])&&isNaN(e[Xa[1].cabecera_2])&&isNaN(e[Xa[1].cabecera_3])&&(n=!1);var r={key:t,verificado:n,tipo:Qt};return Xa.forEach((function(t){void 0!==e[t.cabecera]&&null!==e[t.cabecera]?r[t.propiedad]=t.fecha?Oo(e[t.cabecera]):String(e[t.cabecera]).replace(/,/g,""):void 0!==e[t.cabecera_2]&&null!==e[t.cabecera_2]?t.fecha?r[t.propiedad]=go(Oo(e[t.cabecera_2]),e[t.hora]):r[t.propiedad]=String(e[t.cabecera_2]).replace(/,/g,""):void 0!==e[t.cabecera_3]&&null!==e[t.cabecera_3]&&(t.fecha?r[t.propiedad]=go(Oo(e[t.cabecera_3]),e[t.hora]):r[t.propiedad]=String(e[t.cabecera_3]).replace(/,/g,""))})),r})),e.abrupt("return",Promise.all(n).catch((function(e){return console.log("Error en la promesa"),console.log(e),e})));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ao(){return Io.apply(this,arguments)}function Io(){return(Io=Object(N.a)(D.a.mark((function e(){var t,n,r,a=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=a.length>0&&void 0!==a[0]?a[0]:[],n=a.length>1&&void 0!==a[1]?a[1]:[],r=t.filter((function(e){return on.includes(e.codnod)})).filter((function(e){return e.edoxot})).map((function(e,t){var r=!0,a=null,i=ui.includes(e.tipave),o=bi.includes(e.tipave),c=fi.includes(e.tipave);if(isNaN(e[Xa[1].cabecera])&&isNaN(e[Xa[1].cabecera_2])&&isNaN(e[Xa[1].cabecera_3])&&(r=!1),6===String(e.codtecliq).trim().length){var s=n.findIndex((function(t){return t.carnet===e.codtecliq}));s>0&&(a=n[s]._id)}var l={key:t,verificado:r,tipo_liquidacion:e.edoxot,tecnico_liquidado:a,estado_liquidado:i?"efectiva":o?"inefectiva":c?"no_corresponde":"-"};return Qa.forEach((function(t){t.cabecera_2||t.cabecera_3?void 0!==e[t.cabecera]&&null!==e[t.cabecera]?l[t.propiedad]=t.fecha?Oo(e[t.cabecera]):e[t.cabecera]:void 0!==e[t.cabecera_2]&&null!==e[t.cabecera_2]?l[t.propiedad]=t.fecha?Oo(e[t.cabecera_2]):e[t.cabecera_2]:void 0!==e[t.cabecera_3]&&null!==e[t.cabecera_3]&&(l[t.propiedad]=t.fecha?Oo(e[t.cabecera_3]):e[t.cabecera_3]):void 0!==e[t.cabecera]&&null!==e[t.cabecera]&&(l[t.propiedad]=t.fecha?Oo(e[t.cabecera]):e[t.cabecera])})),l})),e.abrupt("return",Promise.all(r).catch((function(e){return console.log("Error en la promesa"),console.log(e),e})));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ko(e,t,n,r){return To.apply(this,arguments)}function To(){return(To=Object(N.a)(D.a.mark((function e(t,n,r,a){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=n,e.next=e.t0===Xt?3:e.t0===Qt?16:25;break;case 3:if(1!==r){e.next=9;break}return e.next=6,vo(t);case 6:return e.abrupt("return",e.sent);case 9:if(2!==r){e.next=15;break}return e.next=12,wo(t,a);case 12:return e.abrupt("return",e.sent);case 15:return e.abrupt("return",[]);case 16:if(1!==r){e.next=22;break}return e.next=19,So(t);case 19:return e.abrupt("return",e.sent);case 22:return e.next=24,Ao(t,a);case 24:return e.abrupt("return",e.sent);case 25:return e.abrupt("break",26);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Eo(){return Ro.apply(this,arguments)}function Ro(){return(Ro=Object(N.a)(D.a.mark((function e(){var t,n,r,a,i,o,c=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=c.length>0&&void 0!==c[0]?c[0]:[],n=c.length>1?c[1]:void 0,t||!(t.length<0)){e.next=6;break}return e.abrupt("return",[]);case 6:for(r=0,a=n,i=t,o=[];i.length>0;)o.push(t.slice(r,a)),i=i.slice(0,-n),r+=n,a+=n;if(!(o.length>0)){e.next=15;break}return e.abrupt("return",o.filter((function(e){return e&&e.length>0})));case 15:return e.abrupt("return",[]);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var Do=function(e){var t=e.tipoOrden,n=e.tecnicos,i=Object(a.useState)(1),o=Object(ae.a)(i,2),s=o[0],l=o[1],d=Object(a.useState)("done"),u=Object(ae.a)(d,2),b=u[0],f=u[1],j=Object(a.useState)(""),h=Object(ae.a)(j,2),p=h[0],O=h[1],g=Object(a.useState)([]),x=Object(ae.a)(g,2),m=x[0],v=x[1],_=Object(a.useState)(0),w=Object(ae.a)(_,2),y=w[0],S=w[1],C=Object(a.useState)(0),A=Object(ae.a)(C,2),I=A[0],k=A[1],T=Object(a.useState)(!1),E=Object(ae.a)(T,2),R=E[0],M=E[1],L=Object(a.useState)([]),F=Object(ae.a)(L,2),P=F[0],Y=F[1];function G(e,t){return H.apply(this,arguments)}function H(){return(H=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V.a.info("Enviando paquetes de datos ".concat(n,"/").concat(m.length," (500u.)..."),{position:"top-right"}),e.next=3,Oi({metodo:At.ORDENES_SUBIR_DATA,ordenes:t}).then((function(e){var n=P,r=e&&e.data?e.data:{};n.push(Object(c.a)(Object(c.a)({},r),{},{id:Date.now(),cantidad:t.length})),Y(n.filter((function(e){return e})))})).catch((function(e){return console.log(e)}));case 3:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(e,t){return Z.apply(this,arguments)}function Z(){return(Z=Object(N.a)(D.a.mark((function e(t,n){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return V.a.info("Enviando paquetes de datos ".concat(n,"/").concat(m.length," (500u.)..."),{position:"top-right"}),e.next=3,gi({metodo:At.ORDENES_ACTUALIZAR_LIQUIDADAS,ordenes:t}).then((function(e){var n=P,r=e&&e.data?e.data:{};n.push(Object(c.a)(Object(c.a)({},r),{},{id:Date.now(),cantidad:t.length})),Y(n.filter((function(e){return e})))})).catch((function(e){return console.log(e)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function J(){return(J=Object(N.a)(D.a.mark((function e(){var t,n,r,a,i,o,c,l,d,u,b,f,j,h,p,O;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(0!==m.length){e.next=4;break}V.a.warn("No hay ordenes para subir.",{position:"top-right"}),e.next=106;break;case 4:if(1!==s){e.next=56;break}e.prev=5,M(!0),t=1,n=!0,r=!1,e.prev=10,i=Object(jo.a)(m);case 12:return e.next=14,i.next();case 14:return o=e.sent,n=o.done,e.next=18,o.value;case 18:if(c=e.sent,n){e.next=27;break}return l=c,e.next=23,G(l,t);case 23:t+=1;case 24:n=!0,e.next=12;break;case 27:e.next=33;break;case 29:e.prev=29,e.t0=e.catch(10),r=!0,a=e.t0;case 33:if(e.prev=33,e.prev=34,n||null==i.return){e.next=38;break}return e.next=38,i.return();case 38:if(e.prev=38,!r){e.next=41;break}throw a;case 41:return e.finish(38);case 42:return e.finish(33);case 43:e.next=50;break;case 46:e.prev=46,e.t1=e.catch(5),V.a.error("Error en el cliente.",{position:"top-right"}),console.log(e.t1);case 50:return e.prev=50,M(!1),e.finish(50);case 53:e.next=105;break;case 56:e.prev=56,M(!0),d=1,u=!0,b=!1,e.prev=61,j=Object(jo.a)(m);case 63:return e.next=65,j.next();case 65:return h=e.sent,u=h.done,e.next=69,h.value;case 69:if(p=e.sent,u){e.next=78;break}return O=p,e.next=74,U(O,d);case 74:d+=1;case 75:u=!0,e.next=63;break;case 78:e.next=84;break;case 80:e.prev=80,e.t2=e.catch(61),b=!0,f=e.t2;case 84:if(e.prev=84,e.prev=85,u||null==j.return){e.next=89;break}return e.next=89,j.return();case 89:if(e.prev=89,!b){e.next=92;break}throw f;case 92:return e.finish(89);case 93:return e.finish(84);case 94:e.next=101;break;case 97:e.prev=97,e.t3=e.catch(56),V.a.error("Error en el cliente.",{position:"top-right"}),console.log(e.t3);case 101:return e.prev=101,M(!1),e.finish(101);case 104:case 105:case 106:case"end":return e.stop()}}),e,null,[[5,46,50,53],[10,29,33,43],[34,,38,42],[56,97,101,104],[61,80,84,94],[85,,89,93]])})))).apply(this,arguments)}Object(a.useEffect)((function(){f("done"),O(""),v([]),S(0),k(0),Y([])}),[s]);var W=[{title:"#",width:50,render:function(e,t,n){return n+1}},{title:"Cantidad",width:100,dataIndex:"cantidad",render:function(e){return e?Object(r.jsx)(gn.a,{color:"blue",children:e}):"-"}},{title:"Nuevos",width:100,dataIndex:"nuevos",render:function(e){return e?Object(r.jsx)(gn.a,{color:"green",children:e}):"-"}},{title:"Actualizados",width:100,dataIndex:"actualizados",render:function(e){return e?Object(r.jsx)(gn.a,{color:"geekblue",children:e}):"-"}},{title:"Duplicados",width:100,dataIndex:"duplicados",render:function(e){return e?Object(r.jsx)(gn.a,{color:"warning",children:e}):"-"}},{title:"Errores",width:100,dataIndex:"errores",render:function(e){return e?Object(r.jsx)(gn.a,{color:"error",children:e}):Object(r.jsx)(gn.a,{children:"-"})}}];return Object(r.jsxs)("div",{children:[Object(r.jsxs)(z.a,{children:[Object(r.jsxs)(q.a,{sm:10,md:10,lg:12,xl:12,spellCheck:!0,children:[Object(r.jsx)("p",{children:"Tipo de Archivo:"}),Object(r.jsxs)(Qe.a.Group,{onChange:function(e){return l(e.target.value)},value:s,children:[Object(r.jsx)(Qe.a,{value:1,children:"Pendientes"}),Object(r.jsx)(Qe.a,{value:2,children:"Liquidadas"})]}),Object(r.jsx)("div",{style:{width:"14rem",margin:"1rem 0"},children:Object(r.jsx)(zi.a,{accept:".xls,.xlsx",beforeUpload:function(e){return f("uploading"),O(e.name),Y([]),K.formatosAdmitidos.includes(e.type)?(function(e){return po.apply(this,arguments)}(e).then(function(){var e=Object(N.a)(D.a.mark((function e(r){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ko(r,t,s,n).then((function(e){return S(e.length),e.filter((function(e){return e.verificado}))})).then(function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return f("done"),e.t0=v,e.next=4,Eo(t,500);case 4:e.t1=e.sent,(0,e.t0)(e.t1),k(t.length),V.a.success("".concat(t.length," Ordenes encontradas."),{position:"top-right"});case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){return console.log(e,"Error asignando valores")}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()).catch((function(e){f("error"),V.a.error("Error convirtiendo el archivo",{position:"top-right"}),console.log(e)})),!1):(f("error"),V.a.warn("Formato Incorrecto.",{position:"top-right"}),!1)},onRemove:function(){O(""),f("done"),v([])},fileList:[{uid:"-1",name:p,status:b}],children:Object(r.jsxs)(B.a,{children:[Object(r.jsx)(qi.a,{})," ","Subir Archivo"]})})})]}),Object(r.jsxs)(q.a,{sm:14,md:14,lg:12,xl:12,children:[Object(r.jsx)(Rt.a,{title:"Ordenes:",value:I,suffix:"/ ".concat(y)}),Object(r.jsx)(B.a,{disabled:R,style:{marginTop:".5rem"},type:"primary",icon:R?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)($n.a,{}),onClick:function(){return J.apply(this,arguments)},children:"Guardar"})]})]}),Object(r.jsx)(hn.a,{rowKey:"id",columns:W,dataSource:P.filter((function(e){return e})),pagination:!1,style:{marginBottom:"1rem"},bordered:!0})]})},No=n(676),Mo=n(677),Lo=n(678);var zo=function(e){var t=e.fecha,n=tt()().diff(t,"days");return t&&tt()(t).isValid()?Object(r.jsx)(gn.a,{color:n>=3?"error":n<3&&n>=2?"warning":n<2&&n>=1?"lime":n<1?"success":"",children:n}):Object(r.jsx)(gn.a,{color:"blue",children:"-"})},qo=Pe.a.Text;function Fo(e){var t=e.tipo,n=e.filtros,a=void 0===n?{}:n,i=e.filtroDistrito,o=void 0===i?[]:i,c=e.filtroBucket,s=void 0===c?[]:c,l=e.filtroEstadoToa,d=void 0===l?[]:l,u=e.filtroEstadoGestor,b=void 0===u?[]:u,f=e.filtroContrata,j=void 0===f?[]:f,h=e.filtroGestorAsignado,p=void 0===h?[]:h,O=e.filtroTecnicoToa,g=void 0===O?[]:O,x=e.filtroTecnicoAsignado,m=void 0===x?[]:x,v=e.filtroTipoReq,_=void 0===v?[]:v,w=e.filtroTecnologia,y=void 0===w?[]:w,S=e.filtroNodo,C=void 0===S?[]:S,A=e.filtroTroba,I=void 0===A?[]:A,k=e.filtroPai,T=void 0===k?[]:k,E=e.filtroCtr,R=void 0===E?[]:E,D=e.filtroTimeSlot,N=void 0===D?[]:D,M=e.filtroObservacion,L=void 0===M?[]:M,z=e.filtroFechaCita,q=void 0===z?[]:z,F=e.abrirReiterada,P=e.abrirInfancia,B=e.abrirRegistro,Y=e.listarOrdenes,G=[{averias:!0,altas:!0,title:"#",width:50,fixed:"left",render:function(e,t,n){return Number(n)+1}},{averias:!0,altas:!0,title:"Requerimiento",dataIndex:"codigo_requerimiento",width:140,fixed:"left",render:function(e,t){return t.subtipo_actividad&&Jt.includes(t.subtipo_actividad)?Object(r.jsx)(gn.a,{color:"#108ee9",style:{fontSize:"1rem"},children:Object(r.jsx)(qo,{copyable:!0,strong:!0,style:{color:"#ffffff !important"},children:e})}):Object(r.jsx)(qo,{copyable:!0,strong:!0,children:e})}},{averias:!1,altas:!0,title:"Orden Trabajo",dataIndex:"codigo_trabajo",width:120,render:function(e){return Object(r.jsx)(qo,{copyable:!0,children:e})}},{averias:!1,altas:!0,title:"Peticion",dataIndex:"codigo_peticion",width:120,render:function(e){return Object(r.jsx)(qo,{copyable:!0,children:e})}},{averias:!0,altas:!0,title:"Codigo Cliente",dataIndex:"codigo_cliente",width:120,render:function(e){return Object(r.jsx)(qo,{copyable:!0,children:e})}},{averias:!0,altas:!0,title:"Tecnologia",dataIndex:"tipo_tecnologia",align:"center",width:120,filteredValue:a&&a.tipo_tecnologia?a.tipo_tecnologia:null,filters:y||[{text:"",value:""}],onFilter:function(e,t){return 0===t.tipo_tecnologia.indexOf(e)}},{averias:!1,altas:!0,title:"PAI",dataIndex:"indicador_pai",width:60,aling:"center",filteredValue:a&&a.indicador_pai?a.indicador_pai:null,filters:T||[{text:"",value:""}],onFilter:function(e,t){return 0===String(t.indicador_pai).indexOf(String(e))}},{averias:!0,altas:!0,title:"CTR",dataIndex:"codigo_ctr",width:60,filteredValue:a&&a.codigo_ctr?a.codigo_ctr:null,filters:R||[{text:"",value:""}],onFilter:function(e,t){return 0===String(t.codigo_ctr).indexOf(String(e))}},{averias:!1,altas:!0,title:"Tipo Req.",dataIndex:"tipo_requerimiento",align:"center",width:100,filteredValue:a&&a.tipo_requerimiento?a.tipo_requerimiento:null,filters:_||[{text:"",value:""}],onFilter:function(e,t){return 0===t.tipo_requerimiento.indexOf(e)}},{averias:!0,altas:!0,title:"Nodo",dataIndex:"codigo_nodo",width:70,filteredValue:a&&a.codigo_nodo?a.codigo_nodo:null,filters:C||[{text:"",value:""}],onFilter:function(e,t){return 0===t.codigo_nodo.indexOf(e)}},{averias:!0,altas:!0,title:"Troba",dataIndex:"codigo_troba",width:90,sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0},filteredValue:a&&a.codigo_troba?a.codigo_troba:null,filters:I||[{text:"",value:""}],onFilter:function(e,t){return 0===t.codigo_troba.indexOf(e)}},{averias:!0,altas:!1,title:"Reiterada",dataIndex:"numero_reiterada",width:100,align:"center",sorter:function(e,t){return e.numero_reiterada-t.numero_reiterada},render:function(e,t){return e&&"0"!==e&&"-"!==e?Object(r.jsx)(gn.a,{color:"#E5302F",onClick:function(){return F(t.codigo_cliente)},style:{cursor:"pointer"},children:e}):"-"}},{averias:!0,altas:!1,title:"Infancia",dataIndex:"infancia",width:90,align:"center",filteredValue:a&&a.infancia?a.infancia:null,filters:[{text:"Si",value:!0},{text:"No",value:!1}],onFilter:function(e,t){return e?t.infancia:!t.infancia},render:function(e){return e&&e.length>0?Object(r.jsx)(gn.a,{color:"purple",onClick:function(){return P(e)},style:{cursor:"pointer"},children:"Si"}):"-"}},{averias:!0,altas:!1,title:"Cliente",dataIndex:"nombre_cliente",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{averias:!0,altas:!0,title:"Distrito",dataIndex:"distrito",width:160,filteredValue:a&&a.distrito?a.distrito:null,filters:o||[{text:"",value:""}],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{averias:!0,altas:!1,title:"Direcci\xf3n",dataIndex:"direccion",width:250,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{averias:!0,altas:!0,title:"Bucket",dataIndex:"bucket",width:200,ellipsis:{showTitle:!1},filteredValue:a&&a.bucket?a.bucket:null,filters:s||[{text:"",value:""}],onFilter:function(e,t){return 0===t.bucket.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{averias:!0,altas:!0,title:"Estado Toa",dataIndex:"estado_toa",width:150,align:"center",filteredValue:a&&a.estado_toa?a.estado_toa:null,filters:d||[{text:"",value:""}],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!0,title:"Estado Gestor",dataIndex:"estado_gestor",width:150,align:"center",filteredValue:a&&a.estado_gestor?a.estado_gestor:null,filters:b||[{text:"",value:""}],onFilter:function(e,t){return 0===t.estado_gestor.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!0,title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filteredValue:a&&a.contrata?a.contrata:null,filters:j||[{text:"",value:""}],onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre:"-",children:e?e.nombre:"-"})}},{averias:!0,altas:!0,title:"Gestor Asignado",dataIndex:"gestor_liteyca",width:200,ellipsis:{showTitle:!1},filteredValue:a&&a.gestor_liteyca?a.gestor_liteyca:null,filters:p||[{text:"",value:""}],onFilter:function(e,t){return"-"===e?!t.gestor_liteyca:!!t.gestor_liteyca&&0===t.gestor_liteyca._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{averias:!0,altas:!0,title:"Tecnico Toa",dataIndex:"tecnico",width:200,ellipsis:{showTitle:!1},filteredValue:a&&a.tecnico?a.tecnico:null,filters:g||[{text:"",value:""}],onFilter:function(e,t){return"-"===e?!t.tecnico:!!t.tecnico&&0===t.tecnico._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{averias:!0,altas:!0,title:"Tecnico Asignado",dataIndex:"tecnico_liteyca",width:200,ellipsis:{showTitle:!1},filteredValue:a&&a.tecnico_liteyca?a.tecnico_liteyca:null,filters:m||[{text:"",value:""}],onFilter:function(e,t){return"-"===e?!t.tecnico_liteyca:!!t.tecnico_liteyca&&0===t.tecnico_liteyca._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{averias:!0,altas:!0,title:"Observacion Gestor",dataIndex:"observacion_gestor",width:250,ellipsis:{showTitle:!1},filteredValue:a&&a.observacion_gestor?a.observacion_gestor:null,filters:L||[{text:"",value:""}],onFilter:function(e,t){return"-"===e?!t.observacion_gestor:!!t.observacion_gestor&&0===String(t.observacion_gestor).toLowerCase().replace(/ /g,"").indexOf(String(e).toLowerCase().replace(/ /g,""))},render:function(e){return Object(r.jsxs)(ln.a,{placement:"topLeft",title:e,children:[e," "]})}},{averias:!0,altas:!0,title:"Fecha Cita",dataIndex:"fecha_cita",width:150,align:"center",filteredValue:a&&a.fecha_cita?a.fecha_cita:null,filters:q||[{text:"",value:""}],onFilter:function(e,t){return"-"===e?!t.fecha_cita:!!t.fecha_cita&&0===tt()(t.fecha_cita).format("DD/MM/YY").toString().indexOf(String(e))},render:function(e){return e?tt()(e).format("DD/MM/YY"):"-"}},{averias:!1,altas:!0,title:"Fecha Asignado",dataIndex:"fecha_asignado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{averias:!0,altas:!0,title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{averias:!0,altas:!0,title:"Time Slot",dataIndex:"tipo_agenda",width:100,align:"center",fixed:"right",filteredValue:a&&a.tipo_agenda?a.tipo_agenda:null,filters:N?N.filter((function(e){return e.text})):[{text:"",value:""}],onFilter:function(e,t){return!(!t.tipo_agenda||!e)&&0===t.tipo_agenda.indexOf(e)},render:function(e){return e?Object(r.jsx)(gn.a,{color:"#f50",children:e}):void 0}},{averias:!0,altas:!1,title:"Horas",dataIndex:"fecha_registro",width:80,align:"center",fixed:"right",sorter:function(e,t){return tt()().diff(e.fecha_registro,"hours")<tt()().diff(t.fecha_registro,"hours")?-1:tt()().diff(e.fecha_registro,"hours")>tt()().diff(t.fecha_registro,"hours")?1:0},render:function(e,t){return Object(r.jsx)(_i,{fecha:e,tipo:Xt,tipoAgenda:t.tipo_agenda})}},{averias:!1,altas:!0,title:"Dias",dataIndex:"fecha_asignado",width:80,align:"center",fixed:"right",sorter:function(e,t){return e.fecha_asignado?t.fecha_asignado?tt()().diff(e.fecha_asignado,"days")<tt()().diff(t.fecha_asignado,"days")?-1:tt()().diff(e.fecha_asignado,"days")>tt()().diff(t.fecha_asignado,"days")?1:0:1:-1},render:function(e){return Object(r.jsx)(zo,{fecha:e})}},{averias:!0,altas:!0,title:"Acciones",dataIndex:"_id",width:100,align:"center",fixed:"right",render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(ji.a,{style:{fontSize:"1.5rem",marginRight:".5rem"},onClick:function(){return B(e)}}),Object(r.jsx)(vi,{row:t,listarOrdenes:Y})]})}}],H=G.filter((function(e){return e.averias})),U=G.filter((function(e){return e.altas}));switch(t){case Xt:return H;case Qt:return U}}var Po=P.a.Search;var Bo=function(e){var t=e.filtros,n=e.setFiltros,i=e.tipo,o=e.data,c=void 0===o?[]:o,s=e.loading,l=e.ordenesSeleccionadas,d=e.setOrdenesSeleccionadas,u=e.abrirReiterada,b=e.abrirInfancia,f=e.abrirRegistro,j=e.listarOrdenes,h=Object(a.useState)([]),p=Object(ae.a)(h,2),O=p[0],g=p[1],x=Object(a.useState)([]),m=Object(ae.a)(x,2),v=m[0],_=m[1],w=Object(a.useState)([]),y=Object(ae.a)(w,2),S=y[0],C=y[1],A=Object(a.useState)([]),I=Object(ae.a)(A,2),k=I[0],T=I[1],E=Object(a.useState)([]),R=Object(ae.a)(E,2),D=R[0],N=R[1],M=Object(a.useState)([]),L=Object(ae.a)(M,2),F=L[0],P=L[1],B=Object(a.useState)([]),Y=Object(ae.a)(B,2),G=Y[0],H=Y[1],U=Object(a.useState)([]),V=Object(ae.a)(U,2),K=V[0],Z=V[1],J=Object(a.useState)([]),W=Object(ae.a)(J,2),X=W[0],Q=W[1],$=Object(a.useState)([]),ee=Object(ae.a)($,2),te=ee[0],ne=ee[1],re=Object(a.useState)([]),ie=Object(ae.a)(re,2),oe=ie[0],ce=ie[1],se=Object(a.useState)([]),le=Object(ae.a)(se,2),de=le[0],ue=le[1],be=Object(a.useState)([]),fe=Object(ae.a)(be,2),je=fe[0],he=fe[1],pe=Object(a.useState)([]),Oe=Object(ae.a)(pe,2),ge=Oe[0],xe=Oe[1],me=Object(a.useState)([]),ve=Object(ae.a)(me,2),_e=ve[0],we=ve[1],ye=Object(a.useState)([]),Se=Object(ae.a)(ye,2),Ce=Se[0],Ae=Se[1],Ie=Object(a.useState)([]),ke=Object(ae.a)(Ie,2),Te=ke[0],Ee=ke[1],Re=Object(a.useState)([]),De=Object(ae.a)(Re,2),Ne=De[0],Me=De[1],Le=Object(a.useState)(null),ze=Object(ae.a)(Le,2),qe=ze[0],Fe=ze[1],Pe=Object(a.useState)(!1),Be=Object(ae.a)(Pe,2),Ye=Be[0],Ge=Be[1],He=Object(a.useState)(0),Ue=Object(ae.a)(He,2),Ve=Ue[0],Ke=Ue[1];Object(a.useEffect)((function(){c&&c.length>0?(g(c),Je(c)):g([])}),[c]),Object(a.useEffect)((function(){t||Ke(0)}),[t]);var Ze=function(){return Ge(!Ye)},Je=function(e){Ke(e.length),_(Br(e,"distrito")),C(Br(e,"bucket")),T(Br(e,"estado_toa")),N(Br(e,"estado_gestor")),ne(Br(e,"tipo_requerimiento")),ce(Br(e,"tipo_tecnologia")),ue(Br(e,"codigo_nodo")),he(Br(e,"codigo_troba")),xe(Br(e,"indicador_pai")),we(Br(e,"codigo_ctr")),Ae(Br(e,"observacion_gestor")),Ee(Br(e,"tipo_agenda")),Me(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;if(0===e.length)return[];var n=[];try{return e.forEach((function(e){void 0!==e[t]&&null!==e[t]&&-1===n.findIndex((function(n){return n.value===tt()(e[t]).format("DD/MM/YY")}))&&n.push({text:tt()(e[t]).format("DD/MM/YY"),value:tt()(e[t]).format("DD/MM/YY")})})),n.push({text:"-",value:"-"}),n}catch(r){return console.log(r),[]}}(e,"fecha_cita")),P(Pr(e,"contrata")),H(Pr(e,"gestor_liteyca",!0)),Z(Pr(e,"tecnico",!0)),Q(Pr(e,"tecnico_liteyca",!0))};function We(e){e&&e.length>1?g(c.filter((function(t){return String(t.codigo_requerimiento).includes(e)}))):g(c)}return Object(r.jsxs)("div",{children:[Object(r.jsx)(hn.a,{title:function(){return Object(r.jsx)(Po,{placeholder:"Requerimiento...",onSearch:We,style:{width:180,marginRight:"0rem",marginBottom:".5rem"},allowClear:!0})},rowKey:"_id",onRow:function(e){return{onDoubleClick:function(){return t=e._id,Fe(t),void Ze();var t}}},rowSelection:{columnWidth:50,selectedRowKeys:l,onChange:function(e){return d(e)}},onChange:function(e,t,r,a){Je(a.currentDataSource),n(t)},columns:Fo({tipo:i,filtros:t,setFiltros:n,filtroDistrito:v,filtroBucket:S,filtroEstadoToa:k,filtroEstadoGestor:D,filtroContrata:F,filtroGestorAsignado:G,filtroTecnicoToa:K,filtroTecnicoAsignado:X,filtroTipoReq:te,filtroTecnologia:oe,filtroNodo:de,filtroTroba:je,filtroPai:ge,filtroCtr:_e,filtroTimeSlot:Te,filtroObservacion:Ce,filtroFechaCita:Ne,abrirReiterada:u,abrirInfancia:b,abrirRegistro:f,listarOrdenes:j}),dataSource:O,loading:s,size:"small",scroll:{y:"65vh"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]},footer:function(){return Object(r.jsxs)(z.a,{gutter:16,children:[Object(r.jsx)(q.a,{span:4,children:Object(r.jsx)(Rt.a,{title:"Total",value:c.length})}),Object(r.jsx)(q.a,{span:12,children:Object(r.jsx)(Rt.a,{title:"Total Filtradas",value:Ve})})]})}}),Object(r.jsx)(Ai,{visible:Ye,abrir:Ze,orden:qe,tipo:i})]})},Yo=Je.a.Option,Go=P.a.TextArea;var Ho=function(e){var t=e.visible,n=e.abrir,i=(e.buckets,e.contratas,e.gestores),o=void 0===i?[]:i,c=e.agendar,s=Object(a.useState)(null),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)(null),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)(null),O=Object(ae.a)(p,2),g=O[0],x=O[1],m=Object(a.useState)(null),v=Object(ae.a)(m,2),_=v[0],w=v[1],y=Object(a.useState)(null),S=Object(ae.a)(y,2),C=S[0],A=S[1],I=Object(a.useState)(!1),k=Object(ae.a)(I,2),T=k[0],E=k[1];Object(a.useEffect)((function(){u(null),h(null),x(null),w(null),A(null)}),[]);var R=function(){var e=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!_){e.next=6;break}return E(!0),e.next=4,c(d,j,g,_,C);case 4:E(!1),n();case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(r.jsxs)(Fn.a,{title:"Agendar Orden",width:400,visible:t,onCancel:n,onOk:R,confirmLoading:!0,destroyOnClose:!0,centered:!0,footer:[Object(r.jsx)(B.a,{onClick:n,children:"Cancelar"},"back"),Object(r.jsx)(B.a,{disabled:!_,type:"primary",loading:T,onClick:R,children:"Aceptar"},"submit")],children:[Object(r.jsx)(Je.a,{showSearch:!0,placeholder:"Seleccionar Gestor",style:{width:300,marginBottom:".5rem"},onChange:function(e){return x(e)},defaultValue:g,filterOption:function(e,t){return t.children.toLowerCase().indexOf(e.toLowerCase())>=0},children:o&&o.length>0?o.map((function(e,t){return Object(r.jsx)(Yo,{value:e._id,children:e.nombre},t)})):Object(r.jsx)(Yo,{children:"Sin data"})}),Object(r.jsx)(Xe.a,{defaultValue:tt()(_||Date.now()),placeholder:"Seleccionar fecha de cita",style:{width:300,marginBottom:".5rem"},onChange:function(e){w(e?e.utc().format("YYYY-MM-DD HH:mm"):null)}}),Object(r.jsx)(Go,{rows:4,style:{width:300},defaultValue:C,placeholder:"Observacion",onChange:function(e){return A(e.target.value)}})]})};var Uo=function(e){var t=e.contratas,n=e.gestores,i=e.tecnicos,o=e.tipo,s=Object(a.useState)([]),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)([]),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)([]),O=Object(ae.a)(p,2),g=O[0],x=O[1],m=Object(a.useState)([]),v=Object(ae.a)(m,2),_=v[0],w=v[1],y=Object(a.useState)(!1),S=Object(ae.a)(y,2),C=S[0],A=S[1],I=Object(a.useState)(!1),k=Object(ae.a)(I,2),T=k[0],E=k[1],R=Object(a.useState)(!1),M=Object(ae.a)(R,2),L=M[0],z=M[1],q=Object(a.useState)(!1),F=Object(ae.a)(q,2),P=F[0],Y=F[1],G=Object(a.useState)(!1),H=Object(ae.a)(G,2),U=H[0],K=H[1],Z=Object(a.useState)(!1),J=Object(ae.a)(Z,2),W=J[0],X=J[1],Q=Object(a.useState)(!1),$=Object(ae.a)(Q,2),ee=$[0],te=$[1],ne=Object(a.useState)(!1),re=Object(ae.a)(ne,2),ie=re[0],oe=re[1],ce=Object(a.useState)(!1),se=Object(ae.a)(ce,2),le=se[0],de=se[1],ue=Object(a.useState)(!1),be=Object(ae.a)(ue,2),fe=be[0],je=be[1],he=Object(a.useState)(!1),pe=Object(ae.a)(he,2),Oe=pe[0],ge=pe[1],me=Object(a.useState)(!1),ve=Object(ae.a)(me,2),_e=ve[0],we=ve[1],ye=Object(a.useState)(!1),Se=Object(ae.a)(ye,2),Ce=Se[0],Ae=Se[1],Ie=Object(a.useState)(!1),ke=Object(ae.a)(Ie,2),Te=ke[0],Ee=ke[1],Re=Object(a.useState)(!1),De=Object(ae.a)(Re,2),Ne=De[0],Me=De[1],Le=Object(a.useState)(null),ze=Object(ae.a)(Le,2),qe=ze[0],Fe=ze[1],Pe=Object(a.useState)(null),Be=Object(ae.a)(Pe,2),Ye=Be[0],Ge=Be[1];function He(){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return A(!0),w([]),e.next=4,pi(!0,{metodo:ut,tipo:o}).then((function(e){var t=e.data;t&&t.length>0&&u(t)})).catch((function(e){return console.log(e)})).finally((function(){return A(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ve(e){return Ke.apply(this,arguments)}function Ke(){return(Ke=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return oe(!0),e.next=3,pi(!0,{metodo:xt,id:t}).then((function(e){var t=e.data;t&&t._id&&x([t])})).catch((function(e){return console.log(e)})).finally((function(){return oe(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ze(e){return Je.apply(this,arguments)}function Je(){return(Je=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return te(!0),e.next=3,pi(!0,{metodo:mt,id:t}).then((function(e){var t=e.data;t&&t.length>0&&h(t)})).catch((function(e){return console.log(e)})).finally((function(){return te(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function We(){return(We=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return E(!0),e.next=3,pi(!0,{metodo:dt,tipo:o}).then((function(e){"success"===e.status&&He()})).catch((function(e){return console.log(e)})).finally((function(){return E(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Xe(){return(Xe=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return z(!0),e.next=3,pi(!0,{metodo:lt}).then((function(e){"success"===e.status&&He()})).catch((function(e){return console.log(e)})).finally((function(){return z(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Qe(){return(Qe=Object(N.a)(D.a.mark((function e(t,n,r,a,i){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(_&&_.length>0)){e.next=4;break}return Y(!0),e.next=4,xi({metodo:_t,ordenes:_,bucket:t,contrata:n,gestor:r,fecha_cita:a,observacion:i}).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return Y(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $e(){return($e=Object(N.a)(D.a.mark((function e(t){var n;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(_&&_.length>0)){e.next=6;break}return n=t,K(!0),nt(),e.next=6,xi(Object(c.a)({metodo:yt,ordenes:_},n)).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return K(!1)}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function et(){return(et=Object(N.a)(D.a.mark((function e(t,n){var r,a,i=arguments;return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=i.length>2&&void 0!==i[2]?i[2]:[],!(_&&_.length>0)){e.next=12;break}return(a=new FormData).append("metodo",St),a.append("ordenes",JSON.stringify(_)),t&&a.append("estado",t),n&&a.append("observacion",n),r.forEach((function(e){a.append("files",e)})),X(!0),it(),e.next=12,mi(a).then(Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,He();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).catch((function(e){return console.log(e)})).finally((function(){return X(!1)}));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){return Et.emit("averiasPendientes","hola"),Et.on("error",(function(e){console.log(e),V.a.error("Error conectando al servidor.",{position:"top-left"})})),function(){Et.off("ordenesGraficos")}}),[]);var tt=function(){return je(!fe)},nt=function(){return ge(!Oe)},rt=function(){return we(!_e)},at=function(){return Ae(!Ce)},it=function(){return Ee(!Te)},ot=function(){return Me(!Ne)},ct=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return at(),e.next=3,Ve(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),st=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return ot(),e.next=3,Ze(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsxs)("div",{children:[Object(r.jsx)(B.a,{type:"primary",icon:C?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Va.a,{}),disabled:C,style:{marginBottom:"1rem",marginRight:".5rem"},onClick:He,children:"Actualizar"}),Object(r.jsx)(B.a,{icon:T?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(No.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:function(){return We.apply(this,arguments)},children:"Sincronizar"}),Object(r.jsx)(B.a,{icon:L?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Mo.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:function(){return Xe.apply(this,arguments)},children:"Comprobar Infancias"}),Object(r.jsx)(B.a,{icon:P?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(xe.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:0===_.length,onClick:tt,children:"Agendar"}),Object(r.jsx)(B.a,{icon:U?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Ka.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:0===_.length,onClick:nt,children:"Asignar"}),Object(r.jsx)(B.a,{icon:W?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Za.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},disabled:0===_.length,onClick:it,children:"Estado"}),Object(r.jsx)(wa.a,{overlay:Object(r.jsx)($i,{metodo:jt,tipo:o,setLoading:de,ordenesSeleccionadas:_}),placement:"bottomLeft",trigger:["click"],arrow:!0,children:Object(r.jsx)(B.a,{icon:le?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(ta.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},children:"Exportar"})}),Object(r.jsx)(B.a,{icon:Object(r.jsx)(Lo.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:function(){Ge(null)},children:"Filtros"})]}),Object(r.jsx)(Bo,{filtros:Ye,setFiltros:Ge,tipo:o,data:d,loading:C,ordenesSeleccionadas:_,setOrdenesSeleccionadas:w,abrirReiterada:function(e){Fe(e),rt()},abrirInfancia:ct,abrirRegistro:st,listarOrdenes:He}),Object(r.jsx)(Ho,{visible:fe,abrir:tt,buckets:$a,contratas:t,gestores:n,agendar:function(e,t,n,r,a){return Qe.apply(this,arguments)}}),Object(r.jsx)(Ji,{visible:Oe,abrir:nt,contratas:t,gestores:n,tecnicos:i,asignar:function(e){return $e.apply(this,arguments)}}),Object(r.jsx)(Yi,{visible:Te,abrir:it,actualizarEstado:function(e,t){return et.apply(this,arguments)}}),Object(r.jsx)(Li,{visible:_e,abrir:rt,codigo_cliente:qe}),Object(r.jsx)(Ni,{visible:Ce,abrir:at,loading:ie,orden:g}),Object(r.jsx)(Ri,{visible:Ne,abrir:ot,loading:ee,registros:j})]})},Vo=Pe.a.Text;function Ko(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],l=arguments.length>8?arguments[8]:void 0,d=arguments.length>9?arguments[9]:void 0,u=[{averias:!0,altas:!0,title:"#",width:50,fixed:"left",render:function(e,t,n){return n+1}},{averias:!0,altas:!0,title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,fixed:"left",render:function(e){return Object(r.jsx)(Vo,{copyable:!0,children:e})}},{averias:!1,altas:!0,title:"Orden Trabajo",dataIndex:"codigo_trabajo",width:120,render:function(e){return Object(r.jsx)(Vo,{copyable:!0,children:e})}},{averias:!1,altas:!0,title:"Peticion",dataIndex:"codigo_peticion",width:120,render:function(e){return Object(r.jsx)(Vo,{copyable:!0,children:e})}},{averias:!0,altas:!0,title:"Codigo Cliente",dataIndex:"codigo_cliente",width:120,render:function(e){return Object(r.jsx)(Vo,{copyable:!0,children:e})}},{averias:!0,altas:!0,title:"Tecnologia",dataIndex:"tipo_tecnologia",align:"center",width:120,filters:o||[],onFilter:function(e,t){return 0===t.tipo_tecnologia.indexOf(e)}},{averias:!0,altas:!0,title:"CTR",dataIndex:"codigo_ctr",width:60,filters:s||[],onFilter:function(e,t){return 0===String(t.codigo_ctr).indexOf(String(e))}},{averias:!0,altas:!0,title:"Descripci\xf3n CTR",dataIndex:"descripcion_ctr",width:150},{averias:!1,altas:!0,title:"Tipo Req.",dataIndex:"tipo_requerimiento",align:"center",width:100,filters:i||[],onFilter:function(e,t){return 0===t.tipo_requerimiento.indexOf(e)}},{averias:!0,altas:!0,title:"Nodo",dataIndex:"codigo_nodo",width:70,filters:c||[],onFilter:function(e,t){return 0===t.codigo_nodo.indexOf(e)}},{averias:!0,altas:!0,title:"Troba",dataIndex:"codigo_troba",width:70,sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0}},{averias:!0,altas:!0,title:"Distrito",dataIndex:"distrito",width:160,filters:t||[],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{averias:!0,altas:!0,title:"Estado Toa",dataIndex:"estado_toa",width:150,align:"center",filters:n||[],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!0,title:"Estado Gestor",dataIndex:"estado_gestor",width:150,align:"center",filters:a||[],onFilter:function(e,t){return 0===t.estado_gestor.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!1,title:"Estado Liquidado",dataIndex:"estado_liquidado",width:150,align:"center",render:function(e){return Object(r.jsx)(hi,{estado:e})}},{averias:!0,altas:!0,title:"Tecnico Liquidado",dataIndex:"nombre_liquidado",width:200,ellipsis:{showTitle:!1},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e,children:e})}},{averias:!0,altas:!0,title:"Carnet",dataIndex:"carnet_liquidado",width:100},{averias:!0,altas:!1,title:"Tipo Averia",dataIndex:"tipo_averia",width:150},{averias:!0,altas:!0,title:"Descripci\xf3n Liquidado",dataIndex:"descripcion_codigo_liquidado",width:250},{averias:!0,altas:!0,title:"Observaci\xf3n Gestor",dataIndex:"observacion_gestor",width:250},{averias:!0,altas:!0,title:"Observaci\xf3n Liquidado",dataIndex:"observacion_liquidado",width:250},{averias:!1,altas:!0,title:"Fecha Asignado",dataIndex:"fecha_asignado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{averias:!0,altas:!0,title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{averias:!0,altas:!0,title:"Fecha Liquidado",dataIndex:"fecha_liquidado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{averias:!0,altas:!1,title:"Plazo 24h",dataIndex:"fecha_registro",width:100,align:"center",fixed:"right",sorter:function(e,t){if(e.fecha_liquidado){if(tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")<tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours"))return-1}else{if(tt()().diff(e.fecha_registro,"hours")<tt()().diff(t.fecha_registro,"hours"))return-1;if(tt()().diff(e.fecha_registro,"hours")>tt()().diff(t.fecha_registro,"hours"))return 1}return tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")>tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?1:0},render:function(e,t){if(t.fecha_liquidado){if(e){var n=tt()(t.fecha_liquidado).diff(e,"hours");return Object(r.jsx)(gn.a,{color:t.agenda?"geekblue":n<24?"success":24===n?"warning":"error",children:n})}return Object(r.jsx)(gn.a,{children:"-"})}var a=tt()().diff(e,"hours");return Object(r.jsx)(gn.a,{children:a})}},{averias:!1,altas:!0,title:"Plazo 72h",dataIndex:"fecha_registro",width:100,align:"center",fixed:"right",sorter:function(e,t){if(e.fecha_liquidado){if(tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")<tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours"))return-1}else{if(tt()().diff(e.fecha_registro,"hours")<tt()().diff(t.fecha_registro,"hours"))return-1;if(tt()().diff(e.fecha_registro,"hours")>tt()().diff(t.fecha_registro,"hours"))return 1}return tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")>tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?1:0},render:function(e,t){if(t.fecha_liquidado){if(e){var n=tt()(t.fecha_liquidado).diff(e,"hours");return Object(r.jsx)(gn.a,{color:t.agenda?"blue":n<72?"success":72===n?"warning":"error",children:n})}return Object(r.jsx)(gn.a,{children:"-"})}var a=tt()().diff(e,"hours");return Object(r.jsx)(gn.a,{children:a})}},{averias:!0,altas:!0,title:"Acciones",dataIndex:"_id",width:100,align:"center",fixed:"right",render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(ji.a,{style:{fontSize:"1.5rem",marginRight:".5rem"},onClick:function(){return l(e)}}),Object(r.jsx)(vi,{row:t,listarOrdenes:d})]})}}],b=u.filter((function(e){return e.averias})),f=u.filter((function(e){return e.altas}));switch(e){case Xt:return b;case Qt:return f}}var Zo=function(e){var t=e.tipo,n=Object(a.useState)([]),i=Object(ae.a)(n,2),o=i[0],c=i[1],s=Object(a.useState)([]),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)([]),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)(!1),O=Object(ae.a)(p,2),g=O[0],x=O[1],m=Object(a.useState)(!1),v=Object(ae.a)(m,2),_=v[0],w=v[1],y=Object(a.useState)([]),S=Object(ae.a)(y,2),C=S[0],A=S[1],I=Object(a.useState)([]),k=Object(ae.a)(I,2),T=k[0],E=k[1],R=Object(a.useState)([]),M=Object(ae.a)(R,2),L=M[0],z=M[1],q=Object(a.useState)([]),F=Object(ae.a)(q,2),P=F[0],Y=F[1],G=Object(a.useState)([]),H=Object(ae.a)(G,2),U=H[0],V=H[1],K=Object(a.useState)([]),Z=Object(ae.a)(K,2),J=Z[0],W=Z[1],X=Object(a.useState)([]),Q=Object(ae.a)(X,2),$=Q[0],ee=Q[1],te=Object(a.useState)(!1),ne=Object(ae.a)(te,2),re=ne[0],ie=ne[1];function oe(){return ce.apply(this,arguments)}function ce(){return(ce=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),h([]),e.next=4,pi(!0,{metodo:ft,tipo:t}).then((function(e){var t=e.data;t&&t.length>0&&(c(t),A(Br(t,"distrito")),E(Br(t,"estado_toa")),z(Br(t,"estado_gestor")),Y(Br(t,"tipo_requerimiento")),V(Br(t,"tipo_tecnologia")),W(Br(t,"codigo_nodo")),ee(Br(t,"codigo_ctr")))})).catch((function(e){return console.log(e)})).finally((function(){return x(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){oe()}),[]);var se=function(){return ie(!re)};function le(e){return de.apply(this,arguments)}function de(){return(de=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,pi(!0,{metodo:mt,id:t}).then((function(e){var t=e.data;t&&t.length>0&&u(t)})).catch((function(e){return console.log(e)})).finally((function(){return w(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ue=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return se(),e.next=3,le(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(B.a,{type:"primary",disabled:g,icon:g?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Va.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:oe,children:"Actualizar"})}),Object(r.jsx)(hn.a,{rowKey:"_id",rowSelection:{columnWidth:50,selectedRowKeys:j,onChange:function(e){return h(e)}},columns:Ko(t,C,T,L,P,U,J,$,ue,oe),dataSource:o,loading:g,size:"small",scroll:{y:"65vh"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]}}),Object(r.jsx)(Ri,{visible:re,abrir:se,loading:_,registros:d})]})},Jo=bn.a.TabPane;var Wo=Pe.a.Text;function Xo(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:[],c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:[],d=arguments.length>9?arguments[9]:void 0,u=arguments.length>10?arguments[10]:void 0;return[{title:"#",width:50,fixed:"left",render:function(e,t,n){return n+1}},{title:"Requerimiento",dataIndex:"codigo_requerimiento",width:120,fixed:"left",render:function(e){return Object(r.jsx)(Wo,{copyable:!0,children:e})}},{title:"Orden Trabajo",dataIndex:"codigo_trabajo",width:120,render:function(e){return Object(r.jsx)(Wo,{copyable:!0,children:e})}},{title:"Peticion",dataIndex:"codigo_peticion",width:120,render:function(e){return Object(r.jsx)(Wo,{copyable:!0,children:e})}},{title:"Codigo Cliente",dataIndex:"codigo_cliente",width:120,render:function(e){return Object(r.jsx)(Wo,{copyable:!0,children:e})}},{title:"Tecnologia",dataIndex:"tipo_tecnologia",align:"center",width:120,filters:c||[],onFilter:function(e,t){return 0===t.tipo_tecnologia.indexOf(e)}},{title:"CTR",dataIndex:"codigo_ctr",width:60,filters:l||[],onFilter:function(e,t){return 0===String(t.codigo_ctr).indexOf(String(e))}},{title:"Nodo",dataIndex:"codigo_nodo",width:70,filters:s||[],onFilter:function(e,t){return 0===t.codigo_nodo.indexOf(e)}},{title:"Troba",dataIndex:"codigo_troba",width:70,sorter:function(e,t){return e.codigo_troba<t.codigo_troba?-1:e.codigo_troba>t.codigo_troba?1:0}},{title:"Distrito",dataIndex:"distrito",width:160,filters:e||[],onFilter:function(e,t){return 0===t.distrito.indexOf(e)}},{title:"Estado Toa",dataIndex:"estado_toa",width:150,align:"center",filters:t||[],onFilter:function(e,t){return 0===t.estado_toa.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Estado Gestor",dataIndex:"estado_gestor",width:150,align:"center",filters:n||[],onFilter:function(e,t){return 0===t.estado_gestor.indexOf(e)},render:function(e){return Object(r.jsx)(hi,{estado:e})}},{title:"Contrata",dataIndex:"contrata",width:200,ellipsis:{showTitle:!1},filters:a||[],onFilter:function(e,t){return"-"===e?!t.contrata:void 0!==t.contrata&&0===t.contrata._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre:"-",children:e?e.nombre:"-"})}},{title:"Gestor",dataIndex:"gestor",width:200,ellipsis:{showTitle:!1},filters:i||[],onFilter:function(e,t){return"-"===e?!t.gestor:void 0!==t.gestor&&0===t.gestor._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{title:"Tecnico Asignado",dataIndex:"tecnico",width:200,ellipsis:{showTitle:!1},filters:o||[],onFilter:function(e,t){return"-"===e?!t.tecnico_liquidado:!!t.tecnico_liquidado&&0===t.tecnico_liquidado._id.indexOf(e)},render:function(e){return Object(r.jsx)(ln.a,{placement:"topLeft",title:e?e.nombre+" "+e.apellidos:"-",children:e?e.nombre+" "+e.apellidos:"-"})}},{title:"Observaci\xf3n Gestor",dataIndex:"observacion_gestor",width:250},{title:"Observaci\xf3n Liquidado",dataIndex:"observacion_liquidado",width:250},{title:"Fecha Registro",dataIndex:"fecha_registro",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Fecha Liquidado",dataIndex:"fecha_liquidado",width:150,render:function(e){return e?tt()(e).format("DD/MM/YY HH:mm"):"-"}},{title:"Plazo 72h",dataIndex:"fecha_registro",width:100,align:"center",fixed:"right",sorter:function(e,t){return tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")<tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?-1:tt()(e.fecha_liquidado).diff(e.fecha_registro,"hours")>tt()(e.fecha_liquidado).diff(t.fecha_registro,"hours")?1:0},render:function(e,t){if(e){var n=tt()(t.fecha_liquidado).diff(e,"hours");return Object(r.jsx)(gn.a,{color:t.fecha_cita?"geekblue":n<72&&!t.fecha_cita?"success":72!==n||t.fecha_cita?"error":"warning",children:n})}return Object(r.jsx)(gn.a,{children:"-"})}},{title:"Acciones",dataIndex:"_id",width:100,align:"center",fixed:"right",render:function(e,t){return Object(r.jsxs)("div",{children:[Object(r.jsx)(ji.a,{style:{fontSize:"1.5rem",marginRight:".5rem"},onClick:function(){return d(e)}}),Object(r.jsx)(vi,{row:t,listarOrdenes:u})]})}}]}var Qo=function(e){var t=e.tipo,n=Object(a.useState)([]),i=Object(ae.a)(n,2),o=i[0],c=i[1],s=Object(a.useState)([]),l=Object(ae.a)(s,2),d=l[0],u=l[1],b=Object(a.useState)([]),f=Object(ae.a)(b,2),j=f[0],h=f[1],p=Object(a.useState)(!1),O=Object(ae.a)(p,2),g=O[0],x=O[1],m=Object(a.useState)(!1),v=Object(ae.a)(m,2),_=v[0],w=v[1],y=Object(a.useState)([]),S=Object(ae.a)(y,2),C=S[0],A=S[1],I=Object(a.useState)([]),k=Object(ae.a)(I,2),T=k[0],E=k[1],R=Object(a.useState)([]),M=Object(ae.a)(R,2),L=M[0],z=M[1],q=Object(a.useState)([]),F=Object(ae.a)(q,2),P=F[0],Y=F[1],G=Object(a.useState)([]),H=Object(ae.a)(G,2),U=H[0],V=H[1],K=Object(a.useState)([]),Z=Object(ae.a)(K,2),J=Z[0],W=Z[1],X=Object(a.useState)([]),Q=Object(ae.a)(X,2),$=Q[0],ee=Q[1],te=Object(a.useState)([]),ne=Object(ae.a)(te,2),re=ne[0],ie=ne[1],oe=Object(a.useState)([]),ce=Object(ae.a)(oe,2),se=ce[0],le=ce[1],de=Object(a.useState)(!1),ue=Object(ae.a)(de,2),be=ue[0],fe=ue[1];function je(){return he.apply(this,arguments)}function he(){return(he=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return x(!0),h([]),e.next=4,pi(!0,{metodo:bt,tipo:t}).then((function(e){var t=e.data;t&&t.length>0&&(c(t),A(Br(t,"distrito")),E(Br(t,"estado_toa")),z(Br(t,"estado_gestor")),Y(Br(t,"tipo_tecnologia")),V(Br(t,"codigo_nodo")),W(Br(t,"codigo_ctr")),ee(Pr(t,"contrata")),ie(Pr(t,"gestor")),le(Pr(t,"tecnico")))})).catch((function(e){return console.log(e)})).finally((function(){return x(!1)}));case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}Object(a.useEffect)((function(){je()}),[]);var pe=function(){return fe(!be)};function Oe(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return w(!0),e.next=3,pi(!0,{metodo:mt,id:t}).then((function(e){var t=e.data;t&&t.length>0&&u(t)})).catch((function(e){return console.log(e)})).finally((function(){return w(!1)}));case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var xe=function(){var e=Object(N.a)(D.a.mark((function e(t){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return pe(),e.next=3,Oe(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(r.jsxs)("div",{children:[Object(r.jsx)("div",{children:Object(r.jsx)(B.a,{type:"primary",icon:g?Object(r.jsx)(Qn.a,{spin:!0}):Object(r.jsx)(Va.a,{}),style:{marginBottom:"1rem",marginRight:".5rem"},onClick:je,children:"Actualizar"})}),Object(r.jsx)(hn.a,{rowKey:"_id",rowSelection:{columnWidth:50,selectedRowKeys:j,onChange:function(e){return h(e)}},columns:Xo(C,T,L,$,re,se,P,U,J,xe,je),dataSource:o,loading:g,size:"small",scroll:{y:"65vh"},pagination:{defaultPageSize:50,pageSizeOptions:[50,100,200]}}),Object(r.jsx)(Ri,{visible:be,abrir:pe,loading:_,registros:d})]})},$o=bn.a.TabPane;var ec=[{path:y,exact:!0,component:function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)([]),u=Object(ae.a)(d,2),b=u[0],f=u[1];function j(){return(j=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(!1,At.CONTRATA_LISTAR_NOMBRES).then((function(e){var t=e.data;return i(t||[])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!1,{metodo:At.EMPLEADOS_LISTAR_GESTORES}).then((function(e){var t=e.data;return l(t||[])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!1,{metodo:At.EMPLEADOS_LISTAR_TECNICOS}).then((function(e){var t=e.data;return f(t||[])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){j.apply(this,arguments)}(),function(){h.apply(this,arguments)}(),function(){p.apply(this,arguments)}()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Administrar Averias Hfc",subtitulo:"Operativa"}),Object(r.jsx)(nt,{children:Object(r.jsxs)(bn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)(Jo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(bo.a,{}),"Actualizar Ordenes"]}),children:Object(r.jsx)("div",{children:Object(r.jsx)(Do,{tipoOrden:Xt,tecnicos:b})})},"1"),Object(r.jsx)(Jo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Ha.a,{}),"Ordenes Pendientes"]}),children:Object(r.jsx)(Uo,{contratas:n,gestores:s,tecnicos:b,tipo:Xt})},"2"),Object(r.jsx)(Jo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Dt.a,{}),"Ordenes Liquidadas"]}),children:Object(r.jsx)(oo,{tipo:Xt})},"3"),Object(r.jsx)(Jo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(fo.a,{}),"Otras Bandejas"]}),children:Object(r.jsx)(Zo,{tipo:Xt})},"4"),Object(r.jsx)(Jo,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(xe.a,{}),"Aprobar Ordenes"]})},"5")]})})]})}},{path:S,exact:!0,component:function(){var e=Object(a.useState)([]),t=Object(ae.a)(e,2),n=t[0],i=t[1],o=Object(a.useState)([]),c=Object(ae.a)(o,2),s=c[0],l=c[1],d=Object(a.useState)([]),u=Object(ae.a)(d,2),b=u[0],f=u[1];function j(){return(j=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Dr(!1,At.CONTRATA_LISTAR_NOMBRES).then((function(e){var t=e.data;return i(t||[])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return(h=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!1,{metodo:At.EMPLEADOS_LISTAR_GESTORES}).then((function(e){var t=e.data;return l(t||[])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function p(){return(p=Object(N.a)(D.a.mark((function e(){return D.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,it(!1,{metodo:At.EMPLEADOS_LISTAR_TECNICOS}).then((function(e){var t=e.data;return f(t||[])})).catch((function(e){return console.log(e)}));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(a.useEffect)((function(){!function(){j.apply(this,arguments)}(),function(){h.apply(this,arguments)}(),function(){p.apply(this,arguments)}()}),[]),Object(r.jsxs)("div",{children:[Object(r.jsx)(at,{titulo:"Administrar Altas Hfc",subtitulo:"Operativa"}),Object(r.jsx)(nt,{children:Object(r.jsxs)(bn.a,{style:{paddingLeft:"1rem"},animated:!1,children:[Object(r.jsx)($o,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(bo.a,{}),"Actualizar Ordenes"]}),children:Object(r.jsx)(Do,{tipoOrden:Qt,tecnicos:b})},"1"),Object(r.jsx)($o,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Ha.a,{}),"Ordenes Pendientes"]}),children:Object(r.jsx)(Uo,{contratas:n,gestores:s,tecnicos:b,tipo:Qt})},"2"),Object(r.jsx)($o,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Dt.a,{}),"Ordenes Liquidadas"]}),children:Object(r.jsx)(oo,{tipo:Qt})},"3"),Object(r.jsx)($o,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(Or.a,{}),"Ordenes Anuladas"]}),children:Object(r.jsx)(Qo,{tipo:Qt})},"4"),Object(r.jsx)($o,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(fo.a,{}),"Otras Bandejas"]}),children:Object(r.jsx)(Zo,{tipo:Qt})},"5"),Object(r.jsx)($o,{tab:Object(r.jsxs)("span",{children:[Object(r.jsx)(xe.a,{}),"Aprobar Ordenes"]})},"6")]})})]})}},{path:C,exact:!0,component:function(){return Object(r.jsx)("div",{children:"administrar basicas"})}},{path:A,exact:!0,component:function(){return Object(r.jsx)("div",{children:"administrar speedy"})}}],tc=[].concat(Object(Ke.a)(Ga),Object(Ke.a)(uo),Object(Ke.a)(ec)),nc=[].concat(Object(Ke.a)(Tt),Object(Ke.a)(Zn),Object(Ke.a)(jr),Object(Ke.a)(ea),Object(Ke.a)(tc)),rc=n(326),ac=n(627);function ic(){return Object(r.jsx)(nt,{children:Object(r.jsx)(ac.a,{status:"403",title:"403",subTitle:"Lo sentimos, no tienes autorizacion para entrar a esta p\xe1gina.",extra:Object(r.jsx)(B.a,{type:"primary",onClick:function(){return window.location.pathname=j},children:"Inicio"})})})}var oc=function(e){var t=e.component,n=e.path,i=Object(rc.a)(e,["component","path"]),o=Object(a.useContext)(ie).views;return n&&o&&o.length>0?o.includes(n)?Object(r.jsx)(l.a,Object(c.a)(Object(c.a)({path:n},i),{},{render:function(e){return Object(r.jsx)(t,Object(c.a)({},e))}})):Object(r.jsx)(l.a,Object(c.a)(Object(c.a)({path:n},i),{},{render:function(){return Object(r.jsx)(ic,{})}})):null};function cc(){return Object(r.jsx)(d.b,{locale:u.a,children:Object(r.jsx)(s.a,{children:Object(r.jsxs)(l.c,{children:[Object(r.jsx)(l.a,{exact:!0,path:"/",component:E}),Object(r.jsx)(l.a,{exact:!0,path:b,component:re}),Object(r.jsx)(se,{children:Object(r.jsx)(Ve,{children:nc.map((function(e,t){return Object(r.jsx)(oc,{path:e.path,exact:e.exact,component:function(t){return Object(r.jsx)(e.component,Object(c.a)({},t))}},t)}))})})]})})})}var sc=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function lc(e,t){navigator.serviceWorker.register(e).then((function(e){e.onupdatefound=function(){var n=e.installing;null!=n&&(n.onstatechange=function(){"installed"===n.state&&(navigator.serviceWorker.controller?(console.log("New content is available and will be used when all tabs for this page are closed. See https://cra.link/PWA."),e.update(),t&&t.onUpdate&&t.onUpdate(e)):(console.log("Content is cached for offline use."),t&&t.onSuccess&&t.onSuccess(e)))})}})).catch((function(e){console.error("Error during service worker registration:",e)}))}o.a.render(Object(r.jsx)(cc,{}),document.getElementById("root")),function(e){if(console.log(!0),console.log("serviceWorker"in navigator),console.log(sc),"serviceWorker"in navigator){if(new URL("",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",(function(){var t="".concat("","/service-worker.js");sc?(!function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then((function(n){var r=n.headers.get("content-type");404===n.status||null!=r&&-1===r.indexOf("javascript")?navigator.serviceWorker.ready.then((function(e){e.unregister().then((function(){window.location.reload()}))})):lc(e,t)})).catch((function(){console.log("No internet connection found. App is running in offline mode.")}))}(t,e),navigator.serviceWorker.ready.then((function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://cra.link/PWA")}))):lc(t,e)}))}}()}},[[607,1,2]]]);
//# sourceMappingURL=main.1a0c65f6.chunk.js.map